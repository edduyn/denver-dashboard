<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Denver Satellite Dashboard</title>
    <link rel="manifest" href="data:application/json,{&quot;name&quot;:&quot;Denver Dashboard&quot;,&quot;short_name&quot;:&quot;Denver&quot;,&quot;display&quot;:&quot;standalone&quot;}">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: #fff; min-height: 100vh; }
        
        /* Login Screen */
        .login-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
        .login-box { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 40px; text-align: center; max-width: 400px; width: 100%; }
        .login-box h1 { color: #f59e0b; margin-bottom: 10px; font-size: 1.8em; }
        .login-box p { color: #94a3b8; margin-bottom: 30px; }
        .login-box input { width: 100%; padding: 15px; border: 2px solid #334155; background: #1e293b; color: #fff; border-radius: 10px; font-size: 16px; margin-bottom: 15px; }
        .login-box input:focus { outline: none; border-color: #f59e0b; }
        .login-box button { width: 100%; padding: 15px; background: #f59e0b; color: #000; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; }
        .login-box button:hover { background: #d97706; }
        .error-msg { color: #ef4444; margin-top: 10px; display: none; }
        
        /* Main Dashboard */
        .dashboard { display: none; min-height: 100vh; }
        .header { background: rgba(0,0,0,0.3); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .header-left { display: flex; align-items: center; gap: 15px; }
        .logo { height: 40px; }
        .header h1 { font-size: 1.3em; color: #f59e0b; }
        .header-right { display: flex; gap: 10px; align-items: center; }
        .header-btn { padding: 8px 15px; border-radius: 8px; border: none; cursor: pointer; font-size: 14px; font-weight: 500; }
        .btn-full { background: #3b82f6; color: #fff; }
        .btn-rotate { background: #10b981; color: #fff; }
        .btn-lock { background: #64748b; color: #fff; }
        .status-indicator { padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .status-active { background: #10b981; color: #fff; }
        .status-paused { background: #ef4444; color: #fff; }
        
        /* Tabs */
        .tabs { display: flex; background: rgba(0,0,0,0.2); padding: 10px; gap: 5px; overflow-x: auto; }
        .tab { padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 500; white-space: nowrap; transition: all 0.3s; }
        .tab:hover { background: rgba(255,255,255,0.1); }
        .tab.active { background: #f59e0b; color: #000; }
        .tab-goals { border-left: 3px solid #8b5cf6; }
        .tab-actions { border-left: 3px solid #ef4444; }
        .tab-overview { border-left: 3px solid #3b82f6; }
        .tab-employees { border-left: 3px solid #10b981; }
        .tab-workorders { border-left: 3px solid #f97316; }
        .tab-quotes { border-left: 3px solid #ec4899; }
        .tab-quality { border-left: 3px solid #06b6d4; }
        .tab-rankings { border-left: 3px solid #eab308; }
        .tab-wip { border-left: 3px solid #22c55e; }
        .tab-nqa { border-left: 3px solid #14b8a6; }
        .tab-training { border-left: 3px solid #a855f7; }
        
        /* Content */
        .content { padding: 20px; display: none; }
        .content.active { display: block; }
        
        /* Cards */
        .card { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 15px; padding: 20px; margin-bottom: 15px; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .card-title { font-size: 1.1em; color: #f59e0b; }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        
        /* Metrics */
        .metric { text-align: center; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 10px; }
        .metric-value { font-size: 2em; font-weight: bold; color: #f59e0b; }
        .metric-label { color: #94a3b8; font-size: 0.9em; margin-top: 5px; }
        .metric-sub { color: #64748b; font-size: 0.8em; }
        
        /* Progress Bars */
        .progress-container { margin: 10px 0; }
        .progress-bar { height: 20px; background: #334155; border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 10px; transition: width 0.5s; }
        .progress-green { background: linear-gradient(90deg, #10b981, #34d399); }
        .progress-amber { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .progress-red { background: linear-gradient(90deg, #ef4444, #f87171); }
        
        /* Tables */
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { color: #f59e0b; font-weight: 600; }
        tr:hover { background: rgba(255,255,255,0.05); }
        
        /* Status Badges */
        .badge { padding: 4px 10px; border-radius: 20px; font-size: 0.8em; font-weight: 600; }
        .badge-green { background: #10b981; color: #fff; }
        .badge-amber { background: #f59e0b; color: #000; }
        .badge-red { background: #ef4444; color: #fff; }
        .badge-blue { background: #3b82f6; color: #fff; }
        .badge-gray { background: #64748b; color: #fff; }
        
        /* Goal Cards */
        .goal-card { background: rgba(0,0,0,0.2); border-radius: 12px; padding: 15px; margin-bottom: 12px; }
        .goal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .goal-title { font-weight: 600; }
        .goal-progress { display: flex; align-items: center; gap: 10px; }
        .goal-pct { font-size: 1.2em; font-weight: bold; }
        .goal-notes { color: #94a3b8; font-size: 0.85em; margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.1); }
        
        /* Action Items */
        .action-item { display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(0,0,0,0.2); border-radius: 8px; margin-bottom: 8px; }
        .action-check { width: 24px; height: 24px; border: 2px solid #64748b; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .action-check.checked { background: #10b981; border-color: #10b981; }
        .action-check.checked::after { content: '‚úì'; color: #fff; font-weight: bold; }
        .action-text { flex: 1; }
        .action-priority { padding: 2px 8px; border-radius: 4px; font-size: 0.75em; }
        .priority-high { background: #ef4444; color: #fff; }
        .priority-med { background: #f59e0b; color: #000; }
        
        /* Alert Banner */
        .alert-banner { background: linear-gradient(90deg, #ef4444, #dc2626); padding: 15px 20px; text-align: center; font-weight: 600; }
        
        /* Rankings specific */
        .rank-item { display: flex; align-items: center; gap: 15px; padding: 10px; border-radius: 8px; margin-bottom: 5px; }
        .rank-item.denver { background: rgba(245, 158, 11, 0.2); border: 2px solid #f59e0b; }
        .rank-num { width: 30px; height: 30px; background: #334155; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .rank-shop { flex: 1; }
        .rank-value { font-weight: bold; }
        
        /* Responsive */
        @media (max-width: 768px) {
            .card-grid { grid-template-columns: 1fr 1fr; }
            .header h1 { font-size: 1.1em; }
            .metric-value { font-size: 1.5em; }
        }
        /* ‚îÄ‚îÄ TICKER BAR ‚îÄ‚îÄ */
        .ticker-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 38px;
            background: linear-gradient(90deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            border-top: 2px solid #334155;
            display: flex;
            align-items: center;
            z-index: 1000;
            overflow: hidden;
            font-size: 0.82em;
        }
        .ticker-label {
            flex-shrink: 0;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            font-weight: bold;
            padding: 4px 12px;
            font-size: 0.85em;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
            height: 100%;
            z-index: 2;
        }
        .ticker-label-ok {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        .ticker-track {
            flex: 1;
            overflow: hidden;
            position: relative;
            height: 100%;
            display: flex;
            align-items: center;
        }
        .ticker-content {
            display: flex;
            white-space: nowrap;
            animation: tickerScroll var(--ticker-duration, 60s) linear infinite;
            gap: 0;
        }
        .ticker-content:hover { animation-play-state: paused; }
        .ticker-item {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 0 24px;
            color: #e2e8f0;
            border-right: 1px solid #334155;
            height: 38px;
            flex-shrink: 0;
        }
        .ticker-item .t-icon { font-size: 1.1em; }
        .ticker-item .t-label { color: #94a3b8; font-size: 0.85em; }
        .ticker-item .t-value { font-weight: bold; }
        .ticker-item .t-urgent { color: #fca5a5; }
        .ticker-item .t-warn { color: #fde68a; }
        .ticker-item .t-ok { color: #a7f3d0; }
        @keyframes tickerScroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        /* pad bottom of dashboard so ticker doesn't cover content */
        .dashboard { padding-bottom: 48px; }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-box">
            <h1>üõ©Ô∏è Denver Satellite</h1>
            <p>Department 889 Performance Dashboard</p>
            <input type="password" id="passwordInput" placeholder="Enter access code" onkeypress="if(event.key==='Enter')login()">
            <button onclick="login()">Access Dashboard</button>
            <p class="error-msg" id="errorMsg">Invalid access code</p>
        </div>
    </div>
    
    <!-- Main Dashboard -->
    <div class="dashboard" id="dashboard">
        <div class="header">
            <div class="header-left">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAyCAYAAAAZUZThAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABHKSURBVHgB7V0JeFTV2X7PzGQnK0kghH0HZZFFBEURFFFRq1ZttW5V61K1Wpe6VO3ij9Zaa7VuRatVXKruooKKuIMbICCrbCHsEJYQQhKyzv+dc+6dO5NlMlkm+H/P8zBz7z3n3HPufM/3ne875wYYgQWwgGYBKxhvAdagPSBAxNh/rjEEE+eXY+G5pUZwxVHA+UOAUZ8AR58NHH4xQAcTkOc7ZwNvTwVe+w3wjwlA0Vot91VgPF8z6TjghgEENmzg3D4aWtPtNPRrAp2XpJzPJXL8TqEATkzUUkqaBBQXAkuuAl6dYAazk9qDJv4DovDhJGD0QuDqYUByP4Cnd/B5Ru+6UhpKCcQ7wIB7gcO3AGcc4gJWFQBJ/VT9WkZaLwCuP0bWP+Nx4M2vtJw2Zq/xxNZR1I5hAcn9AIwbE8tB2h3p6U4KLHKC6F8LrHsFWPgAcMKHwMLXgXMO1u7j/X8Gvv4XOPNuoMdEIIoJb95vgG8+0HI/ucwYxqFSHs8f9ZeQr6V0lgJ3PN+JOC6/D3h7AnDmQOCNGcDPJgJDHgZmTgemLDGJ7xdx2iNX6rJY6JXIvABh5M8Evv0AWHon8G/KxTPAqYOAr78E1lwNPDhMW8PF2cBJxwBfzBQ9+eWjtHp/sxB47nNNzgqyLIU4fhJmfn4u8MZU7TqKOCXZJCfdAVz0kJYrE0ZXLrNdH+VdU0LGLOwK9Bur/T9tpSbPX0A23YXA7J9qWq7I6t9qn/o5U8o3+Ry44TgtRU9gGwvgypeFSv2bAq0/nh9A8gD24NlCYG45W/t/d4GQm3kS/Vv5Zzxy+SHApyO1MuXlWt5gCTCTaZ8f0N4jIDvq6lxN/y4+TJPVNwLYtFfTvFNW8TW8g0k1TW3d36uqKlCi/LGJKbhxYCqOPqIEcYm2F7WM5bScpnVf4LGEyF/UVwDxAcYKOhSdBLSzwTcFPm9X1VXYGR2FXmkpGJSQhMMO31e4LSCGPz2N3ZpL0JcSGJCURPknCTMnxuLqd+K0uq5JgvBXDvEkptB2U8z/kTx3oJDQzQ6NwNQBQMkhWl4fG3TvdU5yJp6MT8KWogIsLorlI1QmxYQQnA+RvXVDJG7pn4y+MTR3fGIQHyMIr3U6wTFDCCwSaLBIDqGQ+I6A71Kz8o5S2pGfAb/pBBx7pZYy4C/X2Nwf0HJVFpEPaG2FIoLGQJAXVScUVVTC5/NhdHQ0zkyNw83RMbilXzK6R0ciVOj5w5GHhuhOiJKv3CJI73whNYE5K3v4bXhLkL1lJfk0jHQ+R23dFbiyZzL6dOuBGLqeM4Mj8Oe4SNzYKwnd6B7eVJkQPr9P8wpCRJ+RqcXFiIpMCFp9oO3IIZ5bSRD+NuKrYggWANZ6ABTt0FKIv+kvpg1dg2H4TdIE0VCYE/T1VW6BYwnh3CfkNpPK+ygzBGmLfn/pexT5XLmG5hYCG8K3wGr3bwAOIeIcE0jf0ULaJz6aDKL4FCLnELBmM/DWVi0XFkvJOTSEd2S1xxjlKKzBbqqWV5dNbG+u/FtbYRvd/Y/EABxeCNhG0y+hX5E+OhSqQRiTiQfxKl3bTCStxqSxQk0L8R5avhbE3VIhOX8HcHkO8GC2VuZf6dp3aNf9I0FLObcfhehcX0WBYDdq2BDJgOZ8EnLThXS9h3R9JlF7Nen0NeS7n3T9e5JuXwqUbJUjJZMwhXRdIoQjjCAShHgqkLuYEiW7lxI1j5OQTyJS7qM6t1M4l8ywgdpoD12vPqRbnw/RkGynEPk7RL7/JCGW0fd3JAj7KITYSmV20P2vJfI+Q/cfIZ/T6VpHUuIDlL+U7puHuMxaVjAJy/y06xNJWEXEuZdCsnWk00O0gPVkj3Gt4kKgqJBiR7L7+I5BuoU0LxLoJuoIcusyCqEQOlMkYYIQ1kfA8gMdDOlRVAYU9W7E4OU7CHzv5BYsI7JNJ93m0u8P6P5vkP6/I4JtTQv9NM2z0oMUdHQ4aDxBfQw3F9C1cok4T9M67CMBshCpLjXNdB+V+x8hRQbJr4jI8D9qe0cK52Q7hWNkc49qfhdSuX/TtRupnfUU4q8mnSeSTv8mIpdRmWK6xkJqM5fu8zS1U0L14ynB+P4L6F7vkD5fpXqPkX5KKJz6L4XZc2m9z9MqfER1e9HnbJKVU1v7U9l30e8L6bMpBBgO7jUCYOJ+IPUQgqBPUBlzYqSJ0EhEKEvd0NdGdP23OATnNrJTcxZnKjvJYu7zk0nqnKQ6tEiSe/8xJO3+FQL8gQhxCYVqb1P+M9Q2E4PHpLfnAI50BDw4kH1cJNiAfPYnUlxL13uT2tiWvmfa/4fE+F9bNUCj/x1xpJ0UpJEsJ4CIGzNAqERtjAEw4Sgtu4L0vIPKXUt13qD6t1KCsf/X0ucmCjvfI+KNJy5YQvL8F72e7xMSzCJu4e+/Iv3fSqS5imo6nMKPuYzJwHW7a6k6MciLNJdO0yI/B70OfOB7gK8h/pjDq0+J6+S8Ru1yqnsdqoLQ6FE5f5MQkRcTUa4hYn1BBCA9MiGeo+wM9wgS86VsqusqSpz2vIrWjj8nAj5GoWIyhUi/SxCGG6VJb/wHfTLbYiKWWIvfJu6YS7/5OyRLNRH0EapjA4UwxVSmO7Vn5n0VUP8NijG4huJxIhdvJbDT/v8lcvP9EinBKLSaQqQZSonbiKy+3Qm4ePb1d4k7HqN7cyj0NpXxNtXxKtV1NKVlpNdP6HP87p+k+1Mpu4Duzy4SJ02n+79N+X2o7utJzh/TfZdRnoiJSYQmopFsPZvamU/3upx+J9CCM+k+k4gY1Xzti+k+E0j+TdTOxyGdGYuIuIUCqC+p/g5kJO4nYvNK/Hy6N4fIt1GoOpUI/zl9P4fkuYbqGcF1Ennuo3pvovL+Q4lfpHj3oPvNoLo/pXv+jwi1gar7hD7Po/sso/vnUvqS7r2J7vsM3eMY8rC3EFne0wYUFQJlxdTH1O5uAgr3/YqmcZqGCPTNvSSiR5Ck2lLdS0mWKRQuJJLcNxApbiDdk/j/sZTvH9TGxaRfJrdB+o2iazxA+c+h6z2W5NlBfbaT2thIIvyRiHMpYesqumYefV5L+uX7X0+fs+nePahPGDvWkB7vo3tfRv1wGX0m0Xf+/wHVdw/V/zGR8Xa6/r6kvztIvlv43pT/BIUwRZTNoLJvkjxDqN5/04KwnO6zhIi6O33/HNV3A/UJ/z+IFoQ/UHs7KY/n/qj5hBTqS/Oo/ggic9lOQvY2IqWP8u+j+r9OhJ9A5b+A2hpM5Z9C2BRLdebRQo+nRbGMyn1CZf6HyrFhYf6RQva+lL5bRwQ0Fx1F1A/sTF9L95hK9XwZISfh6XgPJdj/z9Tn66nO1ylPk2YBecWRWshDhP4HkYgXCH4IkO7JhBhL8lxC97iY8i+i+xPf3E5ECqf7xRCdDQu/R6TvDnYJNhOxZxJRJgUj6QryeN9T3pnUDvfHrdTGn4lQ6ST7K1TmHyR7Ll1/GWHWV1T2bepvXqzmEx+9Qi7DEPrN8o+gtp+m9j6l39dQ/hqqw3xKHRASFpI+c6neFfR7NrWTQ6ldqH8n0D0mUJts1F6g+i+l3w9Sm8uoHKdDKMzLpzJLqE4jdtNiVHEVcbdYr2bk+MgJEuuTa3gNfJh6hUItb8bR47Rg6SRIdYF0s8ijNJfqjCdyMDkuo4SZT78zyHW9R4Tj5+ffn6bpzf9vpFCiuJxyc+h+nLzX0fcr6fpMJB7vQ/mZFCo9HgjJliTrCCHH0vfdyE2EAYlbSBf8uwx9I1E/jqaRwVziInpAUmYihTsXsS2kNF6ij5DuY+7PJA1+Z6PiEqJ3KUiw9q2c3hzyOgKFVLSGPZLqnUokbQOCpPwS4rsn6TdPWHgnEVX8oknZ70m2V+n3O/T7K7oHk+q7xhSnRANDLXOo7lIqyyFOPBH+FMJBXrDz4VFkdI6nbN7bvZ3qfIu0xP8PILIdSx5qJnmEuPAgn5EMRX5H3IXueYZckDtJcV//L0rjWM7F9Dkx8Nuh/n2Q7vVTKnMOhSC/I45aSm38iDzHdSTXkZR/Oc+3n3j6U0Ii5cG4qBXqQy7qOvo/yLCifdIj1nEH/9jvujbSg7b1xfQNTl9RXK9RQR7hO69lEI4lfZ5kkIg3UNaJHVTXvMCzlLK47K3kk7TybNsIZ2upX5Y6gzTJ1nf67ybyT9Ri9WPKvJMlzAhiMv4c1fCYZY9mL7vTtejk15fJHkPoMUu0L5WbDCdBPm2lBTx5LNfU+jGuI66x7mUTk4Ihqa4gPKH0/UWUl7u0+n028Ih3sMU7rxEdfwN4aE/E6r1dVbnU7QGfULa4fXrKSrLt1XCZD2fCHkzEeRQsmRhdK+pJC+7qhdkYpAkPLLIPIr+T0i2NyhNfZbaMWIp5zV1lY6mcrVp9BPH2KNK+YuUF6tyvqH8HCoykfT7TzKufLg45WMTXGZaSudReWuYPpfKl1EXvpnaPJKu8+OQ7nSS4x9ElKPY9DqPrmce+5jyM+j+HXWJJSV7yGi6meT6ZTCGiTe4jCBPVAu5qY16j6d0LMk4hsixHx1mxe19h/5+g+R+mNK0oDCpjup8g7RU4uxpTBNB4jzJ0+Qh0u/8lDrOpIXjPAqJr6LPgyndzVbFOSzpYeKAd4mkE4iMw6kvphCxL6f+TSqluK2WSncN+Y0Lqe1L6P4xPPGbSfd5kO71IhHvTiJFZ+r7aSSLeTDQWFqk82nupeTpeND/CKqLw8cqakeCyHU65Z1GpKcHEzA+Qd5PqT+uoc+bw0Lsj+l+RjypVNePSSej8YKuhp+bMYNFNBdJEX0y8G8y7u+SzFPIW8VT/jm0mHxPsk6ltILK5lD5KPqcLxRpLZ0I2Zh+PpRqmU0hkZoMIT1T3X2fovsmhdjnB9VOJNXJoTfvi7qFiDSRjOG3ySCtIWQbqX/vJnlyHf5K9w8h2ZZR3VeSDtLIQp9CfZFI9Z0ZYqF5QkJrOZ7qPJLKZwQvDHGJQI0FVFiQAMDJuhZ+k8ivJAiwxMQlI1Gd+o/kvI4IJQ4LSqD7HkYhA+/VnExZW0aEa3AaQRzVL5SHYLGLfAgtAm8QHGdQu/wdA15qbEJmD6MKqJGfktHvHORVMwERnT1GOB3Y+jL1S5mL7BwOj5FmAONzC5AudKbVnKTq2S2C+pLLOPGKd+X5O7rkGiJdBEqKEEHCR6Jkm9C/MgCgO+ltNf3fMhQd2NbpPAvKM4WyQ+T8S+IA+8/2/jzYTJYQQgdoZ3kTa0tZtGPpKh6hy/I+R0YTe60E8hSPpMw8asuHU4jRLm6yBdMpj07SZk05LBPRj2T14dAe1hEoIShD0FJC30hAtUMYpKBkE32qfqH2c4gUvYhETHQeYLaGQhXehs2H3C2KvkCfJURqXjSiKeTvQLoyJPR6Cul2pPsfGkjH93B7eoYw5EfQh8DFpEslLVL7EhF+L2F8DfBc+3v02TJk2n8h8rYhdBB2tLIe9CgP5Oiltn0eNuxTkHSi2YnSuOBcBLVnb+DUfTvKp2oqNMJKzS2g+rgHBN0knW2w3qGFjY/cZvZxJBT7fF5gPyLgOzq8z0yG5lHHdqSwJi7E9o+GrKXwZCi9r6XQaQ8V60Vh4Q40kJxqgX9AcqRaAtSIPZhIbO7xW4fMc8nYJdmzHHJ0IPlupPPNOpK8y3tUn3M+hRCPkGE08zG8kPQ5SOJQC0FHSv1j6I/qD4InSq1kbHOI5v8LqluaF3T7fOi1EBJaAMcz0TJxGW/xCU+HH7xwwb6efvBCEd/X+nkF6yjvYJLtwDAlzn9rINf/BSu/v/p/AP/CwLpMBN9GAAAAAElFTkSuQmCC" class="logo" alt="Duncan Aviation">
                <h1>Denver Satellite (889)</h1>
                <span id="headerTimestamp" style="color:#64748b;font-size:0.72em;font-weight:400;">Last updated: Feb 4, 2026 ¬∑ 8:30 AM MST</span>
            </div>
            <div class="header-right">
                <span class="status-indicator" id="statusIndicator">Ready</span>
                <button class="header-btn btn-full" onclick="toggleFullscreen()">‚õ∂ Full</button>
                <button class="header-btn btn-rotate" id="rotateBtn" onclick="toggleRotate()">‚ñ∂Ô∏è Auto</button>
                <button class="header-btn btn-lock" onclick="logout()">üîí Lock</button>
            </div>
        </div>
        
        <div class="tabs">
            <div class="tab tab-goals active" data-tab="goals">üéØ Goals</div>
            <div class="tab tab-actions" data-tab="actions">‚ö° Actions</div>
            <div class="tab tab-overview" data-tab="overview">üìä Overview</div>
            <div class="tab tab-employees" data-tab="employees">üë• Employees</div>
            <div class="tab tab-workorders" data-tab="workorders">üìã Work Orders</div>
            <div class="tab tab-training" data-tab="training">üìö Training</div>
            <div class="tab tab-quality" data-tab="quality">‚úÖ Quality</div>
            <div class="tab tab-wip" data-tab="wip">üí∞ WIP</div>
            <div class="tab tab-nqa" data-tab="nqa">üìã NQA</div>
            <div class="tab tab-rankings" data-tab="rankings">üèÜ Rankings</div>
            <div class="tab tab-reference" data-tab="reference">üìñ Reference</div>
        </div>
        
        <!-- GOALS TAB -->
        <div class="content active" id="goals">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">2026 Performance Goals - Overall Progress</span>
                    <span class="badge badge-amber">45% Complete</span>
                </div>
                
                <!-- ALL GOALS RENDERED DYNAMICALLY BY renderGoals() -->
                <div id="goalsContainer"></div>
            </div>
        </div>
        
        <!-- ACTIONS TAB -->
        <div class="content" id="actions">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">‚òÄÔ∏è Morning Checklist</span>
                    <span class="badge badge-green">02/04/26</span>
                </div>
                <div class="action-item"><div class="action-check checked"></div><span class="action-text">Review yesterday's Time Sold report</span><span style="color:#10b981;font-size:0.8em;margin-left:auto;">‚úì Processed</span></div>
                <div class="action-item"><div class="action-check checked"></div><span class="action-text">Check Anchor for WOs ready to bill</span><span style="color:#10b981;font-size:0.8em;margin-left:auto;">‚úì 90 open, 2 AOG</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">Assign techs to billable customer work first</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">Andrew Watson ‚Äî MidYear Review DUE TODAY</span><span class="action-priority priority-high">HIGH</span></div>
                <div style="background:#0f172a;padding:8px;border-radius:6px;margin-top:10px;font-size:0.75em;color:#94a3b8;">
                    üìä <strong>Reports processed:</strong> Anchor ‚úì (02/04 8:29 AM) | Time Sold ‚úì (8:31 AM) | Paid Hrs ‚úì (8:31 AM) | Billed WO ‚úì (8:32 AM) | Job View ‚úì (8:33 AM)
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üåô End of Day Checklist</span>
                    <span class="badge badge-green">02/04/26</span>
                </div>
                <div class="action-item"><div class="action-check checked"></div><span class="action-text">Pull daily reports (Time Sold, Billed, Anchor, Job View, Paid Hrs)</span><span style="color:#10b981;font-size:0.8em;margin-left:auto;">‚úì All pulled 8:29-8:33 AM</span></div>
                <div class="action-item"><div class="action-check checked"></div><span class="action-text">Upload to Claude for analysis</span><span style="color:#10b981;font-size:0.8em;margin-left:auto;">‚úì Dashboard updated</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">Bill any completed WOs (within 1 week target)</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">Plan tomorrow's assignments</span></div>
                <div style="background:#0f172a;padding:8px;border-radius:6px;margin-top:10px;font-size:0.75em;color:#94a3b8;">
                    üìà <strong>Feb MTD (2 days):</strong> A/B 41.0% ‚úÖ | 6 WOs Billed ($14,881 rev) | ELR $193/hr | 90 Open WOs | 2 AOG
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üö® Critical Actions</span>
                    <span class="badge badge-red">Urgent</span>
                </div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">‚≠ê NPS Survey - One-Click in Goals tab - READY!</span><span class="action-priority priority-high">HIGH</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">Andrew Watson ‚Äî MidYear Review DUE TODAY Feb 4</span><span class="action-priority priority-high">HIGH</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">Guillermo Tovar S. - 90-Day Review due Feb 8 (4 days)</span><span class="action-priority priority-high">HIGH</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">7 SDV WOs missing expected hours ‚Äî Goal #4 compliance</span><span class="action-priority priority-high">HIGH</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">CG4NA - 188+ days old, vendor dispute (Kauffman)</span><span class="action-priority priority-high">HIGH</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">Michael Hannas ‚Äî 0 hours all Jan pay periods (LOA status?)</span><span class="action-priority priority-med">MED</span></div>
                <div class="action-item"><div class="action-check" onclick="this.classList.toggle('checked')"></div><span class="action-text">Juan Medina ‚Äî 14% OT in Jan (33h). Monitor Feb</span><span class="action-priority priority-med">MED</span></div>
                <div class="action-item"><div class="action-check checked" onclick="this.classList.toggle('checked')"></div><span class="action-text">‚úÖ Reply to Brian Zitek Over 30 list with WO notes</span><span class="action-priority" style="background:#10b981;color:#fff">DONE</span></div>
            </div>
            
            <div class="card" style="border:2px solid #60a5fa;">
                <div class="card-header">
                    <span class="card-title">üìÖ Weekly Goals</span>
                    <span class="badge badge-blue" id="weeklyDateBadge">Loading...</span>
                </div>
                <div id="weeklyGoalsContainer"></div>
            </div>
            
            <!-- NPS SURVEY CANDIDATES -->
            <div class="card" style="border:2px solid #a855f7;">
                <div class="card-header">
                    <span class="card-title">‚≠ê NPS Survey - Goal #2</span>
                    <span class="badge" id="npsBadge" style="background:#ef4444;">Jan: 0/1 ‚ö†Ô∏è</span>
                </div>
                
                <!-- Stats Banner -->
                <div id="npsStats" style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:15px;">
                    <div style="background:#1e293b;padding:10px;border-radius:8px;text-align:center;">
                        <div style="color:#94a3b8;font-size:0.7em;">SENT / BILLED</div>
                        <div id="statSent" style="color:#60a5fa;font-size:1.3em;font-weight:bold;">0/41</div>
                    </div>
                    <div style="background:#1e293b;padding:10px;border-radius:8px;text-align:center;">
                        <div style="color:#94a3b8;font-size:0.7em;">COMPLETED</div>
                        <div id="statCompleted" style="color:#10b981;font-size:1.5em;font-weight:bold;">0</div>
                    </div>
                    <div style="background:#1e293b;padding:10px;border-radius:8px;text-align:center;">
                        <div style="color:#94a3b8;font-size:0.7em;">PENDING</div>
                        <div id="statPending" style="color:#f59e0b;font-size:1.5em;font-weight:bold;">0</div>
                    </div>
                    <div style="background:#1e293b;padding:10px;border-radius:8px;text-align:center;">
                        <div style="color:#94a3b8;font-size:0.7em;">RESPONSE RATE</div>
                        <div id="statRate" style="color:#a855f7;font-size:1.5em;font-weight:bold;">-</div>
                    </div>
                </div>
                
                <div style="background:linear-gradient(135deg,#581c87,#7c3aed);padding:20px;border-radius:10px;margin-bottom:15px;">
                    <div style="color:#e9d5ff;font-size:0.9em;margin-bottom:15px;font-weight:bold;">üìß SEND NPS SURVEY</div>
                    
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:10px;">
                        <div>
                            <label style="color:#c4b5fd;font-size:0.8em;display:block;margin-bottom:5px;">Customer Name *</label>
                            <input type="text" id="npsCustomerName" placeholder="Customer name" style="width:100%;padding:10px;border-radius:6px;border:none;background:#1e1b4b;color:white;font-size:1em;">
                        </div>
                        <div>
                            <label style="color:#c4b5fd;font-size:0.8em;display:block;margin-bottom:5px;">WO# *</label>
                            <input type="text" id="npsWO" placeholder="WO number" style="width:100%;padding:10px;border-radius:6px;border:none;background:#1e1b4b;color:white;font-size:1em;text-transform:uppercase;">
                        </div>
                    </div>
                    
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px;">
                        <div>
                            <label style="color:#c4b5fd;font-size:0.8em;display:block;margin-bottom:5px;">Customer Email *</label>
                            <input type="email" id="npsCustomerEmail" placeholder="email@company.com" style="width:100%;padding:10px;border-radius:6px;border:none;background:#1e1b4b;color:white;font-size:1em;">
                        </div>
                        <div>
                            <label style="color:#c4b5fd;font-size:0.8em;display:block;margin-bottom:5px;">Aircraft Registration (optional)</label>
                            <input type="text" id="npsRegNumber" placeholder="N12345 or leave blank" style="width:100%;padding:10px;border-radius:6px;border:none;background:#1e1b4b;color:white;font-size:1em;text-transform:uppercase;">
                        </div>
                    </div>
                    
                    <div style="display:grid;grid-template-columns:2fr 1fr;gap:10px;">
                        <button onclick="logNpsSurvey(true)" style="padding:15px;background:linear-gradient(135deg,#10b981,#059669);color:white;border:none;border-radius:8px;font-size:1em;font-weight:bold;cursor:pointer;">
                            üìß Send & Log Survey
                        </button>
                        <button onclick="logNpsSurvey(false)" style="padding:15px;background:#475569;color:white;border:none;border-radius:8px;font-size:0.9em;cursor:pointer;">
                            üìù Log Only
                        </button>
                    </div>
                    
                    <div id="npsError" style="display:none;color:#fca5a5;font-size:0.85em;margin-top:10px;text-align:center;">‚ö†Ô∏è Please enter customer name and email</div>
                    <div id="npsSuccess" style="display:none;color:#86efac;font-size:0.85em;margin-top:10px;text-align:center;">‚úÖ Survey logged!</div>
                </div>
                
                <!-- Tracking Table -->
                <div style="background:#0f172a;padding:15px;border-radius:8px;margin-bottom:15px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                        <span style="color:#a855f7;font-weight:bold;">üìä Survey Tracking Log</span>
                        <button id="clearLastNps" style="background:#f59e0b;color:white;border:none;padding:4px 10px;border-radius:4px;font-size:0.75em;cursor:pointer;">Undo Last</button>
                    </div>
                    <div class="table-container" style="max-height:200px;overflow-y:auto;">
                        <table id="npsTrackingTable" style="font-size:0.85em;">
                            <thead>
                                <tr><th>Date</th><th>Customer</th><th>WO#</th><th>Status</th><th>Score</th><th>Action</th></tr>
                            </thead>
                            <tbody id="npsTrackingBody">
                                <tr><td colspan="6" style="color:#64748b;text-align:center;">No surveys logged yet</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                    <span style="color:#94a3b8;font-size:0.85em;">üìä Customer Email Database: <span id="customerDbCount">51</span> contacts (<span id="customerDbTimestamp">Updated 02/03 10:00AM</span>) - <span style="color:#a78bfa;">1 per customer/month</span></span>
                    <label style="font-size:0.8em;color:#94a3b8;cursor:pointer;">
                        <input type="checkbox" id="showSentCustomers" onchange="renderCustomerTable()" style="margin-right:5px;">
                        Show all
                    </label>
                </div>
                <div class="table-container" style="max-height:300px;overflow-y:auto;">
                    <table>
                        <thead>
                            <tr><th>Customer</th><th>Email</th><th>WO#</th><th>Reg#</th><th>Revenue</th><th>Action</th></tr>
                        </thead>
                        <tbody id="customerDbBody">
                            <!-- Dynamically populated -->
                        </tbody>
                    </table>
                </div>
                <div id="npsDbSummary" style="background:#1e3a5f;padding:8px;border-radius:6px;margin-top:10px;font-size:0.8em;color:#93c5fd;">
                    üìä Loading survey status...
                </div>
                <div style="background:#0f172a;padding:8px;border-radius:6px;margin-top:5px;font-size:0.75em;color:#94a3b8;">
                    ‚ö†Ô∏è <strong>Data Note:</strong> Billed WO report has multiple rows per WO (by Sqk Type). Using MAX revenue per WO to avoid duplicates.
                </div>
            </div>
        </div>
        
        <!-- OVERVIEW TAB -->
        <div class="content" id="overview">
            <div class="alert-banner">
                ‚ö†Ô∏è FEBRUARY MTD: A/B 41.0% (2 days) ‚Äî UP 8.5 pts from Jan 32.5% | Target: 58.5% | 6 WOs Billed ($14,881 rev) | ELR $193/hr ‚úÖ
            </div>
            
            <!-- A/B COMPARISON CARD ‚Äî FORMULA CRACKED -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üìä A/B Ratio ‚Äî February 2026 MTD</span>
                    <span class="badge badge-green">Feb 4 Report ‚úì</span>
                </div>
                <!-- MAIN METRIC: Matched to Matt's methodology -->
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
                    <!-- LEFT: February MTD -->
                    <div style="background:linear-gradient(135deg,#1e3a5f,#1e40af);padding:20px;border-radius:12px;">
                        <div style="text-align:center;margin-bottom:8px;">
                            <div style="color:#93c5fd;font-size:0.85em;text-transform:uppercase;letter-spacing:1px;">üìä February MTD (2 days)</div>
                            <div style="color:#60a5fa;font-size:0.72em;margin-top:2px;">Non-Shop Sold √∑ Total Sold</div>
                        </div>
                        <div style="text-align:center;">
                            <div style="font-size:3em;font-weight:bold;color:#10b981;">41.0%</div>
                            <div style="color:#86efac;font-size:0.85em;margin-top:3px;">Budget: 58.5% | Gap: -17.5 pts</div>
                        </div>
                        <div style="margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:8px;">
                            <div style="background:rgba(0,0,0,0.25);padding:8px;border-radius:6px;text-align:center;">
                                <div style="color:#93c5fd;font-size:0.75em;">Non-Shop (A)</div>
                                <div style="color:#4ade80;font-weight:bold;font-size:1.0em;">81.9h</div>
                            </div>
                            <div style="background:rgba(0,0,0,0.25);padding:8px;border-radius:6px;text-align:center;">
                                <div style="color:#93c5fd;font-size:0.75em;">All Sold (B)</div>
                                <div style="color:#4ade80;font-weight:bold;font-size:1.0em;">200.0h</div>
                            </div>
                        </div>
                        <div style="margin-top:8px;background:rgba(0,0,0,0.2);padding:6px;border-radius:6px;font-size:0.75em;color:#86efac;text-align:center;">
                            ‚úÖ UP 8.5 pts from Jan 32.5% ‚Äî early but trending right
                        </div>
                    </div>
                    <!-- RIGHT: January Final -->
                    <div style="background:linear-gradient(135deg,#14532d,#166534);padding:20px;border-radius:12px;">
                        <div style="text-align:center;margin-bottom:8px;">
                            <div style="color:#86efac;font-size:0.85em;text-transform:uppercase;letter-spacing:1px;">üì° January Final (Matt)</div>
                            <div style="color:#4ade80;font-size:0.72em;margin-top:2px;">Month Closed</div>
                        </div>
                        <div style="text-align:center;">
                            <div style="font-size:3em;font-weight:bold;color:#f59e0b;">32.5%</div>
                            <div style="color:#86efac;font-size:0.85em;margin-top:3px;">720.1h √∑ 2,168.5h sold</div>
                        </div>
                        <div style="margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:8px;">
                            <div style="background:rgba(0,0,0,0.25);padding:8px;border-radius:6px;text-align:center;">
                                <div style="color:#86efac;font-size:0.75em;">Network Rank</div>
                                <div style="color:#ef4444;font-weight:bold;font-size:1.1em;">19 / 21</div>
                            </div>
                            <div style="background:rgba(0,0,0,0.25);padding:8px;border-radius:6px;text-align:center;">
                                <div style="color:#86efac;font-size:0.75em;">Network Avg</div>
                                <div style="color:#f59e0b;font-weight:bold;font-size:1.1em;">49.2%</div>
                            </div>
                        </div>
                        <div style="margin-top:8px;background:rgba(0,0,0,0.2);padding:6px;border-radius:6px;font-size:0.75em;color:#86efac;text-align:center;">
                            Paid Hrs: 3,177h | Billed WOs: 51
                        </div>
                    </div>
                </div>
                <!-- PAYROLL PERSPECTIVE -->
                <div style="background:#1e293b;padding:12px;border-radius:8px;margin-top:12px;">
                    <div style="color:#60a5fa;font-size:0.85em;font-weight:bold;margin-bottom:8px;">üí∞ February Billing Summary (Feb 1-4)</div>
                    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;text-align:center;">
                        <div style="background:rgba(0,0,0,0.25);padding:8px;border-radius:6px;">
                            <div style="color:#94a3b8;font-size:0.75em;">WOs Billed</div>
                            <div style="color:#10b981;font-weight:bold;font-size:1.2em;">6</div>
                            <div style="color:#64748b;font-size:0.7em;">34.0h actual</div>
                        </div>
                        <div style="background:rgba(0,0,0,0.25);padding:8px;border-radius:6px;">
                            <div style="color:#94a3b8;font-size:0.75em;">Total Revenue</div>
                            <div style="color:#10b981;font-weight:bold;font-size:1.2em;">$14,881</div>
                            <div style="color:#64748b;font-size:0.7em;">GP: $9,752</div>
                        </div>
                        <div style="background:rgba(0,0,0,0.25);padding:8px;border-radius:6px;">
                            <div style="color:#94a3b8;font-size:0.75em;">ELR (Blended)</div>
                            <div style="color:#10b981;font-weight:bold;font-size:1.2em;">$193/hr</div>
                            <div style="color:#64748b;font-size:0.7em;">Target: $140/hr ‚úÖ</div>
                        </div>
                    </div>
                </div>
                <!-- 6-MONTH TREND -->
                <div style="background:#1e293b;padding:12px;border-radius:8px;margin-top:12px;">
                    <div style="color:#60a5fa;font-size:0.85em;font-weight:bold;margin-bottom:10px;">üìà 7-Month A/B Trend (Local Calc ‚Äî Same Formula as Matt)</div>
                    <div style="display:flex;align-items:flex-end;gap:4px;height:120px;padding:0 5px;">
                        <!-- Aug -->
                        <div style="flex:1;display:flex;flex-direction:column;align-items:center;">
                            <div style="font-size:0.7em;color:#4ade80;margin-bottom:4px;">43.4%</div>
                            <div style="width:100%;background:linear-gradient(to top,#166534,#4ade80);border-radius:4px 4px 0 0;height:86.8px;"></div>
                            <div style="font-size:0.65em;color:#94a3b8;margin-top:4px;">Aug</div>
                        </div>
                        <!-- Sep -->
                        <div style="flex:1;display:flex;flex-direction:column;align-items:center;">
                            <div style="font-size:0.7em;color:#f59e0b;margin-bottom:4px;">36.4%</div>
                            <div style="width:100%;background:linear-gradient(to top,#92400e,#f59e0b);border-radius:4px 4px 0 0;height:72.8px;"></div>
                            <div style="font-size:0.65em;color:#94a3b8;margin-top:4px;">Sep</div>
                        </div>
                        <!-- Oct -->
                        <div style="flex:1;display:flex;flex-direction:column;align-items:center;">
                            <div style="font-size:0.7em;color:#ef4444;margin-bottom:4px;">32.9%</div>
                            <div style="width:100%;background:linear-gradient(to top,#7f1d1d,#ef4444);border-radius:4px 4px 0 0;height:65.8px;"></div>
                            <div style="font-size:0.65em;color:#94a3b8;margin-top:4px;">Oct</div>
                        </div>
                        <!-- Nov -->
                        <div style="flex:1;display:flex;flex-direction:column;align-items:center;">
                            <div style="font-size:0.7em;color:#ef4444;margin-bottom:4px;">34.4%</div>
                            <div style="width:100%;background:linear-gradient(to top,#7f1d1d,#ef4444);border-radius:4px 4px 0 0;height:68.8px;"></div>
                            <div style="font-size:0.65em;color:#94a3b8;margin-top:4px;">Nov</div>
                        </div>
                        <!-- Dec -->
                        <div style="flex:1;display:flex;flex-direction:column;align-items:center;">
                            <div style="font-size:0.7em;color:#f59e0b;margin-bottom:4px;">36.6%</div>
                            <div style="width:100%;background:linear-gradient(to top,#92400e,#f59e0b);border-radius:4px 4px 0 0;height:73.2px;"></div>
                            <div style="font-size:0.65em;color:#94a3b8;margin-top:4px;">Dec</div>
                        </div>
                        <!-- Jan -->
                        <div style="flex:1;display:flex;flex-direction:column;align-items:center;">
                            <div style="font-size:0.7em;color:#ef4444;margin-bottom:4px;">33.2%</div>
                            <div style="width:100%;background:linear-gradient(to top,#7f1d1d,#ef4444);border-radius:4px 4px 0 0;height:66.4px;"></div>
                            <div style="font-size:0.65em;color:#94a3b8;margin-top:4px;">Jan</div>
                        </div>
                        <!-- Feb MTD -->
                        <div style="flex:1;display:flex;flex-direction:column;align-items:center;">
                            <div style="font-size:0.7em;color:#10b981;margin-bottom:4px;">41.0%</div>
                            <div style="width:100%;background:linear-gradient(to top,#065f46,#10b981);border-radius:4px 4px 0 0;height:82.0px;border:2px dashed #34d399;"></div>
                            <div style="font-size:0.65em;color:#10b981;margin-top:4px;font-weight:bold;">Feb*</div>
                        </div>
                    </div>
                    <div style="display:flex;align-items:center;justify-content:center;gap:15px;margin-top:8px;font-size:0.7em;">
                        <span style="color:#64748b;">Budget target:</span>
                        <span style="color:#60a5fa;font-weight:bold;">58.5%</span>
                        <span style="color:#64748b;">|</span>
                        <span style="color:#64748b;">6mo avg (closed):</span>
                        <span style="color:#f59e0b;font-weight:bold;">36.1%</span>
                        <span style="color:#64748b;">|</span>
                        <span style="color:#10b981;">*Feb MTD (2 days)</span>
                    </div>
                </div>
                <!-- FORMULA EXPLANATION -->
                <div style="background:rgba(37,99,235,0.1);border:1px solid rgba(37,99,235,0.3);padding:12px;border-radius:8px;margin-top:12px;font-size:0.82em;color:#93c5fd;">
                    <strong>üî¨ Formula Reverse-Engineered:</strong> Matt's "Actual/Bought" = <strong>Non-Shop WO Hours √∑ Total WO Hours Sold</strong>. Both A and B come from the Time Sold report (AS400), NOT payroll. Numerator = Component + Aircraft + Billing/Sales + Customer Assist. Denominator = all of the above + Shop WOs (cleanup, tech support, WO review, PTB, holiday, training, etc.). Validated within ¬±1.3pt across Aug '25, Sep '25, and Jan '26 against Matt's published figures.
                </div>
                <div style="background:#451a03;padding:10px;border-radius:6px;margin-top:8px;font-size:0.82em;color:#fef3c7;">
                    ‚ö†Ô∏è <strong>Why payroll A/B (24.5%) ‚â† Matt's A/B (32.5%) in January:</strong> Payroll-based A/B is lower because payroll includes 768.5h of paid-but-never-sold time (manager + Hannas LOA since 10/28/25, dual knee replacement). Matt's official formula correctly excludes these by using only Time Sold report data. February MTD at 41.0% is encouraging ‚Äî keep pushing billable hours.
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">January 2026 ‚Äî Month Closed</span>
                    <span class="badge badge-red">Final 02/02/26</span>
                </div>
                <div class="card-grid">
                    <div class="metric">
                        <div class="metric-value" style="color:#f59e0b;">33.2%</div>
                        <div class="metric-label">A/B (Matt Formula)</div>
                        <div class="metric-sub">720.1h / 2,168.5h sold</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">19/21</div>
                        <div class="metric-label">Network Rank</div>
                        <div class="metric-sub">Matt's: 32.5%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">$246K</div>
                        <div class="metric-label">Revenue MTD</div>
                        <div class="metric-sub">35% of $694K goal</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">51</div>
                        <div class="metric-label">Billed WOs</div>
                        <div class="metric-sub">$94K GP (38.2%)</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">2025 Reference (Full Year)</span>
                </div>
                <div class="card-grid">
                    <div class="metric">
                        <div class="metric-value">47.6%</div>
                        <div class="metric-label">A/B Ratio</div>
                        <div class="metric-sub">vs 43.2% in 2024</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">$8.1M</div>
                        <div class="metric-label">Revenue</div>
                        <div class="metric-sub">+17% vs 2024</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">$1.01M</div>
                        <div class="metric-label">Net Income</div>
                        <div class="metric-sub">+91% vs 2024</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">106%</div>
                        <div class="metric-label">Budget Achievement</div>
                        <div class="metric-sub">Exceeded NI target</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- EMPLOYEES TAB -->
        <div class="content" id="employees">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Employee Performance - A/B Efficiency</span>
                    <span class="badge badge-red">January Final | Corrected 02/02/26</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Rank</th><th>Employee</th><th>Billable</th><th>Paid</th><th>A/B %</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr style="background:rgba(16,185,129,0.2)"><td>1</td><td>Sean Macoomb</td><td>119.0h</td><td>241.0h</td><td>49.4%</td><td><span class="badge badge-amber">Below Target</span></td></tr>
                            <tr style="background:rgba(16,185,129,0.2)"><td>2</td><td>Juan Medina</td><td>118.5h</td><td>273.0h</td><td>43.4%</td><td><span class="badge badge-amber">Below Target</span></td></tr>
                            <tr><td>3</td><td>Kim Owen</td><td>62.1h</td><td>246.0h</td><td>25.2%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>4</td><td>Julia Langford</td><td>72.5h</td><td>242.0h</td><td>30.0%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>5</td><td>Michael Huber</td><td>70.0h</td><td>243.5h</td><td>28.7%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>6</td><td>Armando Triana-Cruz</td><td>58.5h</td><td>257.5h</td><td>22.7%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>7</td><td>Guillermo Tovar S.</td><td>49.0h</td><td>239.5h</td><td>20.5%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>8</td><td>Andrew Watson</td><td>42.5h</td><td>218.5h</td><td>19.5%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>9</td><td>Jose Noris</td><td>45.0h</td><td>240.0h</td><td>18.8%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>10</td><td>Ken Smith</td><td>39.0h</td><td>256.0h</td><td>15.2%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>11</td><td>John Watson</td><td>33.0h</td><td>240.0h</td><td>13.8%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr><td>12</td><td>Douglas Riera Guzman</td><td>11.0h</td><td>240.0h</td><td>4.6%</td><td><span class="badge badge-red">Critical</span></td></tr>
                            <tr style="background:rgba(100,116,139,0.2)"><td>‚Äî</td><td>Michael Hannas</td><td>0h</td><td>0h</td><td>‚Äî</td><td><span class="badge" style="background:#475569;">LOA since 10/28</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üóìÔ∏è Upcoming Evaluations</span>
                    <span class="badge badge-amber">2 Due in 30 Days</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Date</th><th>Employee</th><th>Type</th><th>Days</th></tr>
                        </thead>
                        <tbody>
                            <tr style="background:rgba(245,158,11,0.2)"><td>02/04</td><td>Watson, Andrew</td><td>MidYear</td><td><span class="badge badge-amber">9</span></td></tr>
                            <tr style="background:rgba(245,158,11,0.2)"><td>02/08</td><td>Guillermo Tovar S.</td><td>90-Day</td><td><span class="badge badge-amber">13</span></td></tr>
                            <tr><td>03/10</td><td>Noris, Jose</td><td>Yearly</td><td>43</td></tr>
                            <tr style="background:rgba(100,116,139,0.2)"><td>07/15</td><td>Hannas, Michael üî¥ LOA</td><td>Yearly</td><td>170</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- WORK ORDERS TAB -->
        <div class="content" id="workorders">
            <div class="card">
                <div class="card-header">
                <span class="card-title">Work Order Summary</span>
                <span class="badge badge-blue">54 Open WOs</span>
                </div>
                <div class="card-grid">
                <div class="metric">
                <div class="metric-value">54</div>
                <div class="metric-label">Total Open WOs</div>
                </div>
                <div class="metric">
                <div class="metric-value">42</div>
                <div class="metric-label">Billed WOs (Jan)</div>
                </div>
                <div class="metric">
                <div class="metric-value" style="color:#10b981">$45,920</div>
                <div class="metric-label">Total Open WIP</div>
                <div class="metric-sub">üí∞ 560.5h expected</div>
                </div>
                <div class="metric">
                <div class="metric-value" style="color:#f59e0b">560h</div>
                <div class="metric-label">Expected Hours</div>
                </div>
                </div>
            </div>
            
            <!-- WIP BY SHOP -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üí∞ WIP by Shop (Open WOs)</span>
                    <span class="badge badge-blue">01/30/26 8:17 AM</span>
                </div>
                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin-bottom:15px;">
                    <div style="background:linear-gradient(135deg,#1e40af,#3b82f6);padding:15px;border-radius:10px;text-align:center;">
                        <div style="font-size:0.8em;color:#bfdbfe;">SDN (Line)</div>
                        <div style="font-size:1.8em;font-weight:bold;">$14,428</div>
                        <div style="font-size:0.8em;color:#93c5fd;">99.5h √ó $145</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#854d0e,#ca8a04);padding:15px;border-radius:10px;text-align:center;border:2px solid #fbbf24;">
                        <div style="font-size:0.8em;color:#fef3c7;">SDV (Install) ‚≠ê</div>
                        <div style="font-size:1.8em;font-weight:bold;">$9,240</div>
                        <div style="font-size:0.8em;color:#fde68a;">132.0h √ó $70</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#c2410c,#f97316);padding:15px;border-radius:10px;text-align:center;">
                        <div style="font-size:0.8em;color:#fed7aa;">SDR (Recip)</div>
                        <div style="font-size:1.8em;font-weight:bold;">$15,515</div>
                        <div style="font-size:0.8em;color:#fdba74;">107.0h √ó $145</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#475569,#64748b);padding:15px;border-radius:10px;text-align:center;">
                        <div style="font-size:0.8em;color:#cbd5e1;">SHC</div>
                        <div style="font-size:1.8em;font-weight:bold;">$0</div>
                        <div style="font-size:0.8em;color:#94a3b8;">0.0h √ó $145</div>
                    </div>
                </div>
                <div style="background:#0f172a;padding:10px;border-radius:6px;font-size:0.85em;color:#94a3b8;">
                    üí° <strong>Total WIP:</strong> $39,182 (338.5h sold on OPEN WOs) | SDV @ $70/hr, others @ $145/hr<br>
                    ‚≠ê <strong>SDV Special (for Matt) >10h:</strong> CVN0A (38.5h/$2.7K), CV78A (16h/$1.1K) = <strong style="color:#fbbf24;">$3,815</strong> (excl DB1UA)
                </div>
            </div>
            
            <!-- TOP WIP WOs -->
            <div id="wipOverviewContainer"></div>
            
            <!-- SCHEDULED INSTALLS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üìÖ Scheduled Installs (SDV)</span>
                    <span class="badge badge-amber">Jan-Mar 2026</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Aircraft</th><th>Type</th><th>Work</th><th>Start</th><th>End</th><th>Exp Hrs</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr style="background:rgba(59,130,246,0.15)">
                                <td><strong>N4QL</strong></td>
                                <td>Beechcraft B200</td>
                                <td>Artex ELT-1000 Install (CVN0A)</td>
                                <td>Jan 27</td>
                                <td>Jan 29</td>
                                <td>41h</td>
                                <td><span class="badge badge-blue">In Progress</span></td>
                            </tr>
                            <tr style="background:rgba(16,185,129,0.2);border:2px solid #10b981;">
                                <td><strong>N303JJ</strong> üî•</td>
                                <td>Lear 60</td>
                                <td>Gogo Avance L3 (CV78A)</td>
                                <td>Feb 17</td>
                                <td>Mar 6</td>
                                <td style="color:#10b981;font-weight:bold;">400h</td>
                                <td><span class="badge badge-green">Firm - $28K WIP</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="margin-top:10px;font-size:0.8em;color:#94a3b8;">
                    üìã Schedule IDs: N4QL (Schd:86035) | N303JJ (Schd:85877) | üî• CV78A is the big one!
                </div>
            </div>
            
            <div id="workStatusContainer"></div>
            
            <!-- SDV EXPECTED HOURS TRACKER - Goal #4 -->
            <div id="sdvExpectedHoursContainer"></div>
            
            <!-- FLAT RATE PROFITABILITY ANALYSIS - Actual Billed Data -->
            <div class="card" style="border:2px solid #10b981;">
                <div class="card-header">
                    <span class="card-title">üí∞ Flat Rate Profitability Analysis (January 2026 Billed)</span>
                    <span class="badge badge-green">‚úÖ System is PROFITABLE</span>
                </div>
                <div style="background:rgba(16,185,129,0.15);padding:10px;border-radius:6px;margin-bottom:15px;font-size:0.85em;color:#a7f3d0;">
                    <strong style="color:#10b981;">üìä DATA SOURCE:</strong> Billed WO Report (AS400) | 42 WOs | $182K Revenue | Updated: 01/27/26 3:40 PM
                </div>
                
                <!-- Profitability Summary Cards -->
                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:15px;">
                    <div style="background:linear-gradient(135deg,#065f46,#10b981);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#a7f3d0;">Total Labor Billed</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">$51,687</div>
                        <div style="font-size:0.7em;color:#bbf7d0;">330.3 hours</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#1e3a5f,#3b82f6);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#bfdbfe;">If Hourly @$145</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">$47,894</div>
                        <div style="font-size:0.7em;color:#93c5fd;">Comparison baseline</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#065f46,#22c55e);padding:12px;border-radius:8px;text-align:center;border:2px solid #4ade80;">
                        <div style="font-size:0.75em;color:#bbf7d0;">Net Variance</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#4ade80;">+$3,793</div>
                        <div style="font-size:0.7em;color:#86efac;">üü¢ System profitable!</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#581c87,#a855f7);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#e9d5ff;">Effective Rate</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">$156/hr</div>
                        <div style="font-size:0.7em;color:#d8b4fe;">vs $145 target</div>
                    </div>
                </div>
                
                <!-- Shop-by-Shop Profitability ‚Äî auto-rendered -->
                <div id="shopProfitabilityContainer"></div>
                
            </div>
            
            <!-- AGING ANALYSIS ‚Äî auto-rendered -->
            <div id="openWipTableContainer"></div>
            
            <!-- CRITICAL / AGING WOs ‚Äî auto-rendered -->
            <div id="over30Container"></div>
        </div>
        
        <!-- TRAINING TAB -->
        <div class="content" id="training">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">2026 Training Status</span>
                    <span class="badge badge-amber">In Progress</span>
                </div>
                <div class="card-grid">
                    <div class="metric">
                        <div class="metric-value" style="color:#10b981">5/14</div>
                        <div class="metric-label">Training Completed</div>
                        <div class="metric-sub">Garmin (2) + GPP-0110 (3)</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:#f59e0b">6/8</div>
                        <div class="metric-label">Technical Scheduled</div>
                        <div class="metric-sub">75% - Need Ken + Juan</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:#10b981">5</div>
                        <div class="metric-label">Completed YTD</div>
                        <div class="metric-sub">Garmin (2) + GPP-0110 (3)</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:#f59e0b">2</div>
                        <div class="metric-label">Need Dates</div>
                        <div class="metric-sub">Ken + Juan</div>
                    </div>
                </div>
                <div style="background:#0f172a;padding:10px;border-radius:6px;margin-top:10px;font-size:0.85em;color:#94a3b8;">
                    üí° <strong>Tracking:</strong> Sessions completed / 14 available. Watson registered Apr 13-17. Ken + Juan still need dates.
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Technical Training Schedule (from Cassie/PDT)</span>
                    <span class="badge badge-amber">2 Need Dates</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Employee</th><th>Course</th><th>Location</th><th>Dates</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr style="background:rgba(16,185,129,0.15)"><td>Armando Triana-Cruz</td><td>Honeywell Primus EPIC Line Maint</td><td>Dallas, TX</td><td>Apr 27 - May 1</td><td><span class="badge badge-green">‚úÖ Scheduled</span></td></tr>
                            <tr style="background:rgba(16,185,129,0.15)"><td>Michael Huber</td><td>Virtual Garmin G3000/G5000</td><td>Virtual</td><td>Jan 28-29</td><td><span class="badge badge-green">‚úÖ COMPLETED</span></td></tr>
                            <tr style="background:rgba(16,185,129,0.15)"><td>Jose Noris</td><td>Virtual Garmin G1000 NXi</td><td>Virtual</td><td>Feb 26-27</td><td><span class="badge badge-green">‚úÖ Scheduled</span></td></tr>
                            <tr style="background:rgba(16,185,129,0.15)"><td>Michael Hannas</td><td>Virtual Garmin G3000/G5000</td><td>Virtual</td><td>Jun 17-18</td><td><span class="badge badge-green">‚úÖ Scheduled</span></td></tr>
                            <tr style="background:rgba(16,185,129,0.15)"><td>Julia Langford</td><td>Virtual Garmin G3000/G5000</td><td>Virtual</td><td>Jan 28-29</td><td><span class="badge badge-green">‚úÖ COMPLETED</span></td></tr>
                            <tr style="background:rgba(245,158,11,0.15)"><td>Ken Smith</td><td>Virtual Gogo Dealer Training</td><td>Virtual</td><td>TBD</td><td><span class="badge badge-amber">‚ö†Ô∏è Dates TBD</span></td></tr>
                            <tr style="background:rgba(16,185,129,0.15)"><td>John Watson</td><td>aeroIT Certification</td><td>TBD</td><td>Apr 13-17</td><td><span class="badge badge-green">‚úÖ Registered</span></td></tr>
                            <tr style="background:rgba(245,158,11,0.15)"><td>Juan Medina</td><td>Composite Repair</td><td>Lincoln, NE</td><td>TBD</td><td><span class="badge badge-amber">‚ö†Ô∏è Dates TBD</span></td></tr>
                        </tbody>
                    </table>
                </div>
                <div style="background:#451a03;padding:10px;border-radius:6px;margin-top:10px;font-size:0.9em;color:#fef3c7;">
                    <strong>‚ö†Ô∏è Action Required:</strong> Contact Cassie/PDT to schedule dates for Ken and Juan.
                </div>
            </div>
            
            <!-- MANDATORY LMS TRAINING -->
            <div class="card" style="border:2px solid #f59e0b;">
                <div class="card-header">
                    <span class="card-title">üìö Mandatory LMS Training (Assigned 01/30/26)</span>
                    <span class="badge badge-amber">Due Feb 28</span>
                </div>
                <div style="background:rgba(245,158,11,0.15);padding:12px;border-radius:8px;margin-bottom:15px;">
                    <strong style="color:#10b981;">‚úÖ GPP-0110 COMPLETED (all 3)</strong> <span style="color:#fef3c7;"> | 2 mandatory modules still pending ‚Äî VI/QI/RTS Recurrent + CMMC-CUI Security</span>
                </div>
                
                <!-- VI, QI, RTS Recurrent Training -->
                <div style="margin-bottom:15px;">
                    <div style="color:#60a5fa;font-weight:bold;margin-bottom:8px;">üîß VI, QI, RTS Recurrent Training 2026 - Satellites</div>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">Edduyn Pita</span>
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">Jose Noris</span>
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">Armando Triana-Cruz</span>
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">Michael Huber</span>
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">Ken Smith</span>
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">Julia Langford</span>
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">John Watson</span>
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">Sean Macoomb</span>
                        <span style="background:#1e3a5f;padding:4px 10px;border-radius:4px;font-size:0.85em;">Michael Hannas</span>
                    </div>
                </div>
                
                <!-- Brazil International Training -->
                <div style="margin-bottom:15px;">
                    <div style="color:#10b981;font-weight:bold;margin-bottom:8px;">üåé GPP-0110 Brazil International Training ‚Äî <span style="color:#10b981;">‚úÖ ALL COMPLETED</span></div>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <span style="background:#14532d;padding:4px 10px;border-radius:4px;font-size:0.85em;">‚úÖ Michael Huber</span>
                        <span style="background:#14532d;padding:4px 10px;border-radius:4px;font-size:0.85em;">‚úÖ Armando Triana-Cruz</span>
                        <span style="background:#14532d;padding:4px 10px;border-radius:4px;font-size:0.85em;">‚úÖ Ken Smith</span>
                    </div>
                </div>
                
                <!-- CMMC-CUI Security Training -->
                <div style="margin-bottom:10px;">
                    <div style="color:#a855f7;font-weight:bold;margin-bottom:8px;">üîí CMMC-CUI & ISP-1402 Security Training</div>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <span style="background:#581c87;padding:4px 10px;border-radius:4px;font-size:0.85em;">John Watson</span>
                        <span style="background:#581c87;padding:4px 10px;border-radius:4px;font-size:0.85em;">Jose Noris</span>
                    </div>
                </div>
                
                <div style="background:#0f172a;padding:10px;border-radius:6px;margin-top:10px;font-size:0.85em;color:#94a3b8;">
                    üí° <strong>Reminder:</strong> Complete via LMS portal by Feb 28, 2026. Forward completion certificates to Mana Butt.
                </div>
            </div>
        </div>
        
        <!-- QUALITY TAB -->
        <div class="content" id="quality">
            <!-- JANUARY 2026 AUDIT RESULTS -->
            <div class="card" style="border:2px solid #ef4444;">
                <div class="card-header">
                    <span class="card-title">üî¥ January 2026 AFL Audit Results</span>
                    <span class="badge badge-red">5 Findings</span>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;margin-bottom:15px;">
                    <div style="background:#1e293b;padding:12px;border-radius:8px;text-align:center;">
                        <div style="color:#94a3b8;font-size:0.85em;">Audit Date</div>
                        <div style="color:#60a5fa;font-size:1.3em;font-weight:bold;">Jan 21, 2026</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:8px;text-align:center;">
                        <div style="color:#94a3b8;font-size:0.85em;">Auditor</div>
                        <div style="color:#e2e8f0;font-size:1.1em;font-weight:bold;">Chris Demarest</div>
                    </div>
                    <div style="background:rgba(239,68,68,0.2);padding:12px;border-radius:8px;text-align:center;border:1px solid #ef4444;">
                        <div style="color:#fca5a5;font-size:0.85em;">Findings</div>
                        <div style="color:#ef4444;font-size:1.8em;font-weight:bold;">5</div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Item</th><th>Issue</th><th>WO#</th><th>Details</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr style="background:rgba(251,191,36,0.2);">
                                <td style="color:#fbbf24;font-weight:bold;">1.1 + 1.10</td>
                                <td>Flame Locker Checklist</td>
                                <td>-</td>
                                <td>In/Out checklist incomplete - <span style="color:#fbbf24;font-weight:bold;">‚ö†Ô∏è REPEAT from Dec 2025</span></td>
                                <td><span class="badge badge-red">Open</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight:bold;">2.9</td>
                                <td>Parts Segregation</td>
                                <td style="color:#60a5fa;">CTQMA</td>
                                <td>Unserviceable hoses mixed with serviceable parts, not tagged</td>
                                <td><span class="badge badge-red">Open</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight:bold;">1.3</td>
                                <td>Parts Storage</td>
                                <td style="color:#60a5fa;">CTQMA</td>
                                <td>Vendor parts in blue bin piled up, not documented in WO</td>
                                <td><span class="badge badge-red">Open</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight:bold;">1.4</td>
                                <td>Work Area Cleanliness</td>
                                <td>-</td>
                                <td>Heat shrink scraps left on work table</td>
                                <td><span class="badge badge-red">Open</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight:bold;">1.3</td>
                                <td>Parts Tagging</td>
                                <td style="color:#60a5fa;">CU0VA</td>
                                <td>Panels in unmarked cart, not tagged, not in AS400 removal tab</td>
                                <td><span class="badge badge-red">Open</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="background:rgba(251,191,36,0.15);padding:10px;border-radius:6px;margin-top:10px;border:1px solid #fbbf24;">
                    <strong style="color:#fbbf24;">‚ö†Ô∏è REPEAT FINDING:</strong> <span style="color:#fef3c7;">Flame locker In/Out checklist was cited in Dec 2025 audit. Work was started but abandoned. This is a compliance priority.</span>
                </div>
            </div>
            
            <!-- CORRECTIVE ACTION TRACKER -->
            <div class="card" style="border:2px solid #f59e0b;">
                <div class="card-header">
                    <span class="card-title">üìã Corrective Action Tracker - January 2026 Audit</span>
                    <span class="badge badge-amber">0/5 Closed</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Finding</th><th>Corrective Action</th><th>Owner</th><th>Due Date</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr style="background:rgba(251,191,36,0.15);">
                                <td style="color:#fbbf24;font-weight:bold;">1.1/1.10 REPEAT</td>
                                <td>Complete flame locker In/Out checklist implementation. Train all techs on procedure.</td>
                                <td>Edduyn</td>
                                <td style="color:#ef4444;">Feb 7</td>
                                <td><span class="badge badge-amber">In Progress</span></td>
                            </tr>
                            <tr>
                                <td>2.9 Parts Segregation</td>
                                <td>Create designated unserviceable parts area. Retrain team on RSGOM PP-14.</td>
                                <td>Jose</td>
                                <td>Feb 14</td>
                                <td><span class="badge badge-red">Not Started</span></td>
                            </tr>
                            <tr>
                                <td>1.3 Parts Storage</td>
                                <td>Update CTQMA work order with vendor parts. Implement parts documentation SOP.</td>
                                <td>John Watson</td>
                                <td>Feb 7</td>
                                <td><span class="badge badge-red">Not Started</span></td>
                            </tr>
                            <tr>
                                <td>1.4 Work Area</td>
                                <td>Implement end-of-shift cleanup checklist. Daily walk-through before close.</td>
                                <td>Ken</td>
                                <td>Feb 7</td>
                                <td><span class="badge badge-red">Not Started</span></td>
                            </tr>
                            <tr>
                                <td>1.3 Parts Tagging</td>
                                <td>Update CU0VA with panel removals in AS400. Retrain on parts tagging requirements.</td>
                                <td>Jose</td>
                                <td>Feb 7</td>
                                <td><span class="badge badge-red">Not Started</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="background:#0f172a;padding:10px;border-radius:6px;margin-top:10px;font-size:0.85em;color:#94a3b8;">
                    üìß <strong>Report to:</strong> Chris Demarest (Audit Dept) | <strong>Next audit:</strong> ~Feb/Mar 2026 | <strong>Goal:</strong> Close all findings before next audit
                </div>
            </div>
            
            <!-- JANUARY 2026 TECH DISCREPANCIES -->
            <div class="card" style="border:2px solid #10b981;">
                <div class="card-header">
                    <span class="card-title">‚úÖ January 2026 Tech Discrepancies</span>
                    <span class="badge badge-green">Only 2 ‚Äî Major Improvement!</span>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;margin-bottom:15px;">
                    <div style="background:#1e293b;padding:12px;border-radius:8px;text-align:center;">
                        <div style="color:#94a3b8;font-size:0.85em;">Month</div>
                        <div style="color:#60a5fa;font-size:1.3em;font-weight:bold;">January 2026</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:8px;text-align:center;">
                        <div style="color:#94a3b8;font-size:0.85em;">Reviewed By</div>
                        <div style="color:#e2e8f0;font-size:1.1em;font-weight:bold;">Chris Demarest</div>
                    </div>
                    <div style="background:rgba(16,185,129,0.2);padding:12px;border-radius:8px;text-align:center;border:1px solid #10b981;">
                        <div style="color:#6ee7b7;font-size:0.85em;">Discrepancies</div>
                        <div style="color:#10b981;font-size:1.8em;font-weight:bold;">2</div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>WO#</th><th>Code</th><th>Tech(s)</th><th>Issue</th><th>Date</th><th>Resolution</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color:#60a5fa;font-weight:bold;">CTVWA</td>
                                <td><span class="badge badge-amber">MI</span></td>
                                <td>Armando / Ken</td>
                                <td>Sqk 2 no corrective action, not signed off</td>
                                <td>Jan 5</td>
                                <td>Return to tech for completion</td>
                            </tr>
                            <tr>
                                <td style="color:#60a5fa;font-weight:bold;">CV98A</td>
                                <td><span class="badge badge-amber">MS</span></td>
                                <td>Sean Macoomb</td>
                                <td>91.411 chart checkboxes/signature incomplete</td>
                                <td>Jan 21</td>
                                <td>Return to tech for correction</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="background:rgba(16,185,129,0.15);padding:10px;border-radius:6px;margin-top:10px;border:1px solid #10b981;">
                    <strong style="color:#10b981;">üìâ Trend:</strong> <span style="color:#d1fae5;">Down from 2025 avg of ~2.8/month. Only 2 discrepancies ‚Äî best performance trend. Codes: MI=Missing Inspection, MS=Missing Signature/Checkbox.</span>
                </div>
            </div>
            
            <!-- DAILY WORK ORDERS - READY TO BILL -->
            <div class="card" style="border:1px solid #60a5fa;">
                <div class="card-header">
                    <span class="card-title">üìã Daily Work Orders ‚Äî QA Complete (Feb 2)</span>
                    <span class="badge badge-blue">From Chris Demarest</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>WO#</th><th>Tail#</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color:#60a5fa;font-weight:bold;">CVYQA</td>
                                <td>N972GV</td>
                                <td><span class="badge badge-green">‚úÖ Billed $634</span></td>
                            </tr>
                            <tr>
                                <td style="color:#60a5fa;font-weight:bold;">CW2UA</td>
                                <td>N856MB</td>
                                <td><span class="badge badge-green">‚úÖ Billed $2,950</span></td>
                            </tr>
                            <tr style="background:rgba(251,191,36,0.15);">
                                <td style="color:#fbbf24;font-weight:bold;">CU97A</td>
                                <td>N3278</td>
                                <td><span class="badge badge-amber">‚ö†Ô∏è NEEDS BILLING</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 2026 YTD SUMMARY -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Goal #7: 2026 Audit Performance</span>
                    <span class="badge badge-red">5 AFL Findings + 2 Tech Discrepancies YTD</span>
                </div>
                <div class="card-grid">
                    <div class="metric">
                        <div class="metric-value" style="color:#ef4444">0%</div>
                        <div class="metric-label">Clean Audits</div>
                        <div class="metric-sub">2026 YTD (0/1)</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:#ef4444">5</div>
                        <div class="metric-label">AFL Findings</div>
                        <div class="metric-sub">Jan 2026 Audit</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:#10b981">2</div>
                        <div class="metric-label">Tech Discrepancies</div>
                        <div class="metric-sub">Jan 2026 (‚Üì improved)</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:#ef4444">0</div>
                        <div class="metric-label">Closed</div>
                        <div class="metric-sub">Corrective Actions</div>
                    </div>
                </div>
            </div>
            
            <!-- 2025 REFERENCE DATA -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üìä 2025 Reference Data</span>
                    <span class="badge badge-gray">Historical</span>
                </div>
                <div class="card-grid">
                    <div class="metric">
                        <div class="metric-value">43%</div>
                        <div class="metric-label">Clean Audits (3/7)</div>
                        <div class="metric-sub">2025 QI Audits</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">50%</div>
                        <div class="metric-label">Clean Months (6/12)</div>
                        <div class="metric-sub">2025 Tech Discrepancies</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">16</div>
                        <div class="metric-label">Audit Findings</div>
                        <div class="metric-sub">2025 Total</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">34</div>
                        <div class="metric-label">Tech Discrepancies</div>
                        <div class="metric-sub">2025 Total</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Recurring Issues to Address</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Issue</th><th>Occurrences</th><th>Action</th></tr>
                        </thead>
                        <tbody>
                            <tr style="background:rgba(239,68,68,0.15);"><td style="color:#ef4444;font-weight:bold;">‚ö†Ô∏è Flammable Locker Control</td><td style="color:#ef4444;">3 + Jan 2026 AFL</td><td>PRIORITY - Complete In/Out checklist</td></tr>
                            <tr style="background:rgba(239,68,68,0.15);"><td style="color:#ef4444;font-weight:bold;">‚ö†Ô∏è Parts Traceability/Tagging</td><td style="color:#ef4444;">5 + Jan 2026 AFL</td><td>PRIORITY - Retrain team on RSGOM PP-13/14</td></tr>
                            <tr><td>Missing Inspection (MI)</td><td>Jan 2026 (CTVWA)</td><td>Ensure corrective actions signed off</td></tr>
                            <tr><td>Tool Control</td><td>2</td><td>Audit before QI visits</td></tr>
                            <tr><td>RTS/Paperwork</td><td>12 + Jan 2026 (MS)</td><td>Tech training on 91.411 documentation</td></tr>
                            <tr><td>Work Authorization</td><td>11</td><td>Verify signatures before work</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Top Offenders (2025 + Jan 2026 Tech Discrepancies)</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Tech</th><th>2025</th><th>Jan 2026</th><th>Total</th><th>Focus Area</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Ken Smith (SMIKZ)</td><td>13</td><td style="color:#fbbf24;">1</td><td style="font-weight:bold;">14</td><td>Documentation + RTS + MI</td></tr>
                            <tr><td>Armando (CRUZA)</td><td>6</td><td style="color:#fbbf24;">1</td><td style="font-weight:bold;">7</td><td>Work Auth + MI</td></tr>
                            <tr><td>Sean Macoomb (MACOS)</td><td>0</td><td style="color:#fbbf24;">1</td><td style="font-weight:bold;">1</td><td>91.411 Charts (MS)</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- WIP TAB -->
        <div class="content" id="wip">
            <!-- WIP EXPLAINED - THE THREE WIP FIGURES -->
            <div class="card" style="border:2px solid #60a5fa;">
                <div class="card-header">
                    <span class="card-title">üìñ Understanding WIP: Three Different Figures</span>
                    <span class="badge badge-blue">Know Your Numbers</span>
                </div>
                
                <div style="background:#0f172a;padding:20px;border-radius:12px;margin-bottom:20px;">
                    <div style="color:#93c5fd;font-size:1.1em;font-weight:bold;margin-bottom:15px;">Denver tracks THREE different WIP figures ‚Äî don't confuse them:</div>
                    
                    <!-- Three WIP Types Grid -->
                    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-bottom:20px;">
                        
                        <!-- WIP Account -->
                        <div style="background:linear-gradient(135deg,#7f1d1d,#991b1b);padding:20px;border-radius:12px;border:2px solid #ef4444;">
                            <div style="color:#fca5a5;font-size:0.9em;font-weight:bold;margin-bottom:5px;">1Ô∏è‚É£ WIP ACCOUNT 0889.35015</div>
                            <div style="color:#ef4444;font-size:2.2em;font-weight:bold;">-$8,600</div>
                            <div style="color:#fecaca;font-size:0.85em;margin-top:8px;">Accounting ledger balance</div>
                            <div style="color:#f87171;font-size:0.75em;margin-top:5px;font-style:italic;">‚ö†Ô∏è NEGATIVE = In the hole</div>
                        </div>
                        
                        <!-- SDV Total WIP -->
                        <div style="background:linear-gradient(135deg,#065f46,#047857);padding:20px;border-radius:12px;border:2px solid #10b981;">
                            <div style="color:#6ee7b7;font-size:0.9em;font-weight:bold;margin-bottom:5px;">2Ô∏è‚É£ SDV TOTAL WIP</div>
                            <div style="color:#10b981;font-size:2.2em;font-weight:bold;">$9,240</div>
                            <div style="color:#a7f3d0;font-size:0.85em;margin-top:8px;">All open SDV WOs √ó $70/hr</div>
                            <div style="color:#34d399;font-size:0.75em;margin-top:5px;">132.0 hours sold</div>
                        </div>
                        
                        <!-- SDV Special WIP -->
                        <div style="background:linear-gradient(135deg,#78350f,#92400e);padding:20px;border-radius:12px;border:2px solid #f59e0b;">
                            <div style="color:#fcd34d;font-size:0.9em;font-weight:bold;margin-bottom:5px;">3Ô∏è‚É£ SDV SPECIAL WIP (Matt)</div>
                            <div style="color:#fbbf24;font-size:2.2em;font-weight:bold;">$3,815</div>
                            <div style="color:#fde68a;font-size:0.85em;margin-top:8px;">WOs >10h √ó $70 (excl DB1UA)</div>
                            <div style="color:#fcd34d;font-size:0.75em;margin-top:5px;">54.5h | CVN0A + CV78A</div>
                        </div>
                    </div>
                    
                    <!-- Explanation Text -->
                    <div style="background:#1e293b;padding:15px;border-radius:8px;margin-bottom:15px;">
                        <div style="color:#f8fafc;font-size:0.95em;line-height:1.7;">
                            <strong style="color:#60a5fa;">What's the difference?</strong><br>
                            ‚Ä¢ <strong>#2 SDV Total WIP</strong> = All open SDV WOs √ó $70 (based on actual sold hours)<br>
                            ‚Ä¢ <strong>#3 SDV Special WIP</strong> = Only >10h WOs with hours sold in Jan (for Matt's report)<br>
                            CV78A ($28K) excluded from Jan ‚Üí work starts Feb 17
                        </div>
                    </div>
                    
                    <!-- KEY METHODOLOGY -->
                    <div style="background:linear-gradient(135deg,#1e3a5f,#1e40af);padding:15px;border-radius:8px;border-left:4px solid #60a5fa;">
                        <div style="color:#93c5fd;font-size:0.95em;font-weight:bold;margin-bottom:8px;">üîë KEY: WIP = Hours Actually SOLD by Month End</div>
                        <div style="color:#e0e7ff;font-size:0.9em;line-height:1.6;">
                            WIP is based on <strong>actual hours charged</strong> to the WO by Jan 31, NOT expected hours.<br>
                            Example: CV78A has 400h expected, but work starts Feb 17 ‚Üí <strong>January WIP = $0</strong>, February WIP = $28K
                        </div>
                    </div>
                </div>
                
                <!-- THE CRITICAL INSIGHT: Budget Impact -->
                <div style="background:linear-gradient(135deg,#450a0a,#7f1d1d);padding:20px;border-radius:12px;border-left:5px solid #ef4444;">
                    <div style="color:#fca5a5;font-size:1.1em;font-weight:bold;margin-bottom:10px;">‚ö†Ô∏è CRITICAL: What Negative WIP Means for Your Budget</div>
                    <div style="color:#fef2f2;font-size:1em;line-height:1.8;">
                        The <strong style="color:#ef4444;">-$8,600 WIP Account</strong> is a <strong>deficit you're carrying forward</strong>.<br><br>
                        <div style="background:#0f172a;padding:15px;border-radius:8px;margin:10px 0;">
                            <div style="color:#94a3b8;font-size:0.9em;">Your math:</div>
                            <div style="font-family:monospace;color:#f8fafc;margin-top:8px;">
                                Budget Target = <span style="color:#60a5fa;">X</span><br>
                                WIP Account = <span style="color:#ef4444;">-$8,600</span> (in the hole)<br>
                                <span style="border-top:1px solid #475569;display:block;margin:8px 0;padding-top:8px;">
                                To be <strong style="color:#10b981;">truly even</strong> = <span style="color:#60a5fa;">X</span> + <span style="color:#fbbf24;">$8,600</span>
                                </span>
                            </div>
                        </div>
                        Think of it like a credit card balance ‚Äî hitting your monthly savings goal doesn't mean much if you're also carrying debt. <strong style="color:#fbbf24;">You need to cover both.</strong>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:8px;margin-top:15px;text-align:center;">
                        <span style="color:#94a3b8;">Your REAL January target to be "whole" = </span>
                        <span style="color:#fbbf24;font-size:1.2em;font-weight:bold;">Budget + $8,600</span>
                    </div>
                </div>
            </div>
            
            <!-- THE BIG NUMBER -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üí∞ January 2026 WIP</span>
                    <span class="badge badge-green">Correct Methodology</span>
                </div>
                
                <div style="text-align:center;padding:30px;background:linear-gradient(135deg,#064e3b,#065f46);border-radius:12px;margin-bottom:20px;">
                    <div style="color:#6ee7b7;font-size:1em;margin-bottom:5px;">JANUARY WIP (WOs opened this month, still open)</div>
                    <div style="font-size:3.5em;font-weight:bold;color:#10b981;">$26,036</div>
                    <div style="color:#a7f3d0;font-size:1.1em;margin-top:10px;">203.3 hours √ó WIP rates | 33 WOs</div>
                </div>
                
                <div style="background:#0f172a;padding:15px;border-radius:8px;border-left:4px solid #10b981;">
                    <div style="font-size:1.1em;font-weight:bold;color:#10b981;margin-bottom:8px;">‚úÖ WIP Methodology (Correct)</div>
                    <div style="color:#e2e8f0;line-height:1.6;">
                        <strong>Current Month WIP</strong> = Hours on WOs <u>opened this month</u> that are still open.<br>
                        <strong>Prior Month WOs</strong> = Already WIP'd when they opened. NOT included again.<br>
                        <strong>Billed Same Month</strong> = No WIP impact (becomes revenue directly).
                    </div>
                </div>
            </div>
            
            <!-- SDV SPECIAL WIP - EMAIL TO MATT -->
            <div class="card" style="border:2px solid #f59e0b;">
                <div class="card-header">
                    <span class="card-title">üìß SDV Special WIP List - FOR MATT</span>
                    <span class="badge badge-green">‚úÖ Based on SOLD Hours 01/30/26</span>
                </div>
                <div style="background:#14532d;padding:12px;border-radius:8px;margin-bottom:15px;">
                    <strong style="color:#4ade80;">‚úÖ WIP = Hours SOLD (not expected)</strong>
                    <span style="color:#bbf7d0;">These are actual hours charged to open SDV WOs with >10h sold.</span>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;margin-bottom:15px;">
                    <div style="background:#1e293b;padding:12px;border-radius:8px;">
                        <div style="color:#94a3b8;font-size:0.85em;">SDV Special WIP Rate</div>
                        <div style="color:#fbbf24;font-size:1.5em;font-weight:bold;">$70/hr</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:8px;">
                        <div style="color:#94a3b8;font-size:0.85em;">SDV Margin</div>
                        <div style="color:#fbbf24;font-size:1.5em;font-weight:bold;">15%</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:8px;">
                        <div style="color:#94a3b8;font-size:0.85em;">Threshold</div>
                        <div style="color:#fbbf24;font-size:1.5em;font-weight:bold;">>10 hrs sold</div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>WO#</th><th>Customer</th><th>Sold Hrs</th><th>WIP @ $70</th><th>Notes</th></tr>
                        </thead>
                        <tbody>
                            <tr style="background:rgba(147,51,234,0.2)"><td><strong>DB1UA</strong> üìç</td><td>Hogs Head Air 1 LLC</td><td style="color:#a855f7;">73.0h</td><td style="color:#a855f7;">$5,110</td><td style="font-size:0.8em;color:#a855f7;">NJ controlled - EXCLUDE from Matt</td></tr>
                            <tr style="background:rgba(16,185,129,0.2)"><td><strong>CVN0A</strong></td><td>Stevens Aerospace (N4QL)</td><td style="color:#10b981;font-weight:bold;">38.5h</td><td style="color:#fbbf24;font-weight:bold">$2,695</td><td style="font-size:0.8em;">ARTEX ELT Install</td></tr>
                            <tr style="background:rgba(16,185,129,0.2)"><td><strong>CV78A</strong></td><td>Primus Capital (N303JJ)</td><td style="color:#10b981;font-weight:bold;">16.0h</td><td style="color:#fbbf24;font-weight:bold">$1,120</td><td style="font-size:0.8em;">Gogo L3 - more hours coming Feb</td></tr>
                            <tr style="background:rgba(251,191,36,0.2);font-weight:bold;">
                                <td colspan="2">TOTAL FOR MATT (excl DB1UA)</td>
                                <td>54.5h</td>
                                <td style="color:#fbbf24;">$3,815</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="background:rgba(147,51,234,0.2);padding:10px;border-radius:6px;margin-top:10px;border:1px solid #a855f7;">
                    <strong style="color:#a855f7;">üìç DB1UA NOTE:</strong> <span style="color:#e9d5ff;">NJ shop controls billing (Juan loaned out). Hours count for Denver metrics but excluded from Matt's SDV Special WIP report.</span>
                </div>
                <div style="background:#1e293b;padding:12px;border-radius:8px;margin-top:15px;">
                    <strong style="color:#60a5fa;">üìã Email Template for Matt:</strong>
                    <div style="color:#e2e8f0;font-size:0.9em;margin-top:8px;font-family:monospace;background:#0f172a;padding:10px;border-radius:4px;">
                        Subject: Denver SDV Special WIP - January 2026<br><br>
                        Matt, here are the SDV WOs with >10 sold hours for special WIP @ $70/hr, 15% margin:<br><br>
                        CVN0A: 38.5h = $2,695 (Stevens Aerospace - ARTEX ELT)<br>
                        CV78A: 16.0h = $1,120 (Primus Capital - Gogo L3, more hours coming Feb)<br><br>
                        Total: 54.5h = $3,815<br><br>
                        Note: DB1UA (73h/$5,110) excluded - NJ controlled.
                    </div>
                </div>
                <div style="background:#0f172a;padding:10px;border-radius:6px;margin-top:10px;font-size:0.8em;color:#94a3b8;">
                    <strong style="color:#4ade80;">ü§ñ WIP CALCULATION METHOD:</strong><br>
                    1Ô∏è‚É£ Time Sold report ‚Üí Get SOLD hours by WO (not expected)<br>
                    2Ô∏è‚É£ Anchor report ‚Üí Filter to OPEN WOs only<br>
                    3Ô∏è‚É£ Cross-reference ‚Üí Only hours sold on open WOs = WIP<br>
                    4Ô∏è‚É£ Filter >10h sold ‚Üí SDV Special WIP for Matt<br>
                    <span style="color:#4ade80;">‚úÖ Data: Time Sold + Anchor 01/30/26 8:04 AM</span>
                </div>
            </div>
            
            <!-- MONTHLY VARIANCE CHECK -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üìä Monthly WIP Variance Check</span>
                    <span class="badge badge-blue">Catch Manual Entry Errors</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Month</th><th>My Estimate</th><th>Official (AS400)</th><th>Variance</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Dec 2025</td><td>-</td><td>-$16,870</td><td>-</td><td><span class="badge badge-green">Baseline</span></td></tr>
                            <tr><td>Jan 2026</td><td>$44,320</td><td><em>Pending (Feb)</em></td><td>-</td><td><span class="badge badge-amber">Awaiting</span></td></tr>
                            <tr><td>Feb 2026</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
                        </tbody>
                    </table>
                </div>
                <div style="background:#1e293b;padding:12px;border-radius:8px;margin-top:15px;">
                    <strong style="color:#60a5fa;">üìã Monthly Check Process:</strong>
                    <div style="color:#e2e8f0;font-size:0.9em;margin-top:8px;">
                        1. Pull AS400 account 0889.35015 after month-end close (~2nd week)<br>
                        2. Compare to my estimate from end of that month<br>
                        3. Variance &gt;10% = investigate for typos or missed WOs<br>
                        4. Update this table to track accuracy over time
                    </div>
                </div>
            </div>
            
            <!-- WIP BY SHOP -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">WIP by Shop</span>
                    <span class="badge badge-blue">SDV @ $70 | Others @ $145</span>
                </div>
                
                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin-bottom:15px;">
                    <div style="background:linear-gradient(135deg,#1e40af,#3b82f6);padding:20px;border-radius:12px;text-align:center;">
                        <div style="font-size:0.85em;color:#bfdbfe;">SDN (Line Avionics)</div>
                        <div style="font-size:2em;font-weight:bold;color:white;">$14,428</div>
                        <div style="font-size:0.85em;color:#93c5fd;">99.5h √ó $145</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#854d0e,#ca8a04);padding:20px;border-radius:12px;text-align:center;border:2px solid #fbbf24;">
                        <div style="font-size:0.85em;color:#fef3c7;">SDV (Install) ‚≠ê SPECIAL</div>
                        <div style="font-size:2em;font-weight:bold;color:white;">$9,240</div>
                        <div style="font-size:0.85em;color:#fde68a;">132.0h √ó $70</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#c2410c,#f97316);padding:20px;border-radius:12px;text-align:center;">
                        <div style="font-size:0.85em;color:#fed7aa;">SDR (Recip)</div>
                        <div style="font-size:2em;font-weight:bold;color:white;">$15,515</div>
                        <div style="font-size:0.85em;color:#fdba74;">107.0h √ó $145</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#475569,#64748b);padding:20px;border-radius:12px;text-align:center;">
                        <div style="font-size:0.85em;color:#e2e8f0;">SHC</div>
                        <div style="font-size:2em;font-weight:bold;color:white;">$0</div>
                        <div style="font-size:0.85em;color:#cbd5e1;">0.0h √ó $145</div>
                    </div>
                </div>
                <div style="background:#1e293b;padding:10px;border-radius:6px;font-size:0.85em;color:#e2e8f0;">
                    <strong style="color:#fbbf24;">‚≠ê SDV Special WIP:</strong> $70/hr rate, 15% margin. Email list to Matt last week of month for WOs >10 hours.
                </div>
            </div>
            
            <!-- TOP WIP WOs -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üìã Top 10 WOs by WIP Value</span>
                    <span class="badge badge-green">Bill these ‚Üí Get revenue</span>
                </div>
                <div style="background:#14532d;padding:10px;border-radius:6px;margin-bottom:15px;font-size:0.85em;color:#bbf7d0;">
                    <strong style="color:#4ade80;">ü§ñ SMART AUTO-DETECT:</strong> Cross-references Time Sold √ó Anchor (OPEN) √ó Billed (excluded). Updates when new reports uploaded.
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>WO#</th><th>Shop</th><th>Customer</th><th>Hrs (This Mo)</th><th>Rate</th><th style="color:#10b981">WIP $</th><th>Notes</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>CTQMA</td><td>SDR</td><td>Robert P Husted</td><td>43.5h</td><td>$145</td><td style="color:#10b981;font-weight:bold">$6,308</td><td style="color:#f59e0b;font-size:0.75em;">‚ö†Ô∏è Cited in audit</td></tr>
                            <tr style="background:rgba(147,51,234,0.15)"><td>DB1UA üìç</td><td>SDV</td><td>Hogs Head Air 1 LLC</td><td>75.0h</td><td style="color:#a855f7">$70</td><td style="color:#a855f7;font-weight:bold">$5,250</td><td style="color:#a855f7;font-size:0.75em;">NJ shop - Juan loaned</td></tr>
                            <tr><td>CU1EA</td><td>SDN</td><td>42K Re Management LLC</td><td>35.5h</td><td>$145</td><td style="color:#10b981;font-weight:bold">$5,148</td><td></td></tr>
                            <tr style="background:rgba(16,185,129,0.4)"><td>CU16A ‚úÖ</td><td>SDN</td><td>Flying Orchard LLC</td><td>30.5h</td><td>$145</td><td style="color:#10b981;font-weight:bold">$4,422</td><td style="color:#10b981;font-size:0.75em;font-weight:bold;">BILLED $5,190</td></tr>
                            <tr><td>CU0VA</td><td>SDR</td><td>The Club at Centennial</td><td>21.5h</td><td>$145</td><td style="color:#10b981;font-weight:bold">$3,118</td><td style="color:#f59e0b;font-size:0.75em;">‚ö†Ô∏è Cited in audit</td></tr>
                            <tr><td>CUPFA</td><td>SDN</td><td>Flying Orchard LLC</td><td>15.9h</td><td>$145</td><td style="color:#10b981;font-weight:bold">$2,306</td><td></td></tr>
                            <tr><td>CU92A</td><td>SDN</td><td>Robbins Aviation</td><td>15.0h</td><td>$145</td><td style="color:#10b981;font-weight:bold">$2,175</td><td></td></tr>
                            <tr><td>CUL2A</td><td>SDR</td><td>Peregrine</td><td>12.5h</td><td>$145</td><td style="color:#10b981;font-weight:bold">$1,812</td><td></td></tr>
                            <tr><td>CU97A</td><td>SDN</td><td>Circadian Aviation LLC</td><td>12.0h</td><td>$145</td><td style="color:#10b981;font-weight:bold">$1,740</td><td></td></tr>
                            <tr style="background:rgba(251,191,36,0.15)"><td>CV78A</td><td>SDV‚≠ê</td><td>Primus Capital</td><td>8.0h</td><td style="color:#fbbf24">$70</td><td style="color:#fbbf24;font-weight:bold">$560</td><td></td></tr>
                            <tr style="background:rgba(16,185,129,0.2);font-weight:bold;font-size:1.1em;">
                                <td colspan="5">TOTAL TOP 10 WIP</td>
                                <td style="color:#10b981;font-size:1.2em;">$32,838</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="background:#0f172a;padding:10px;border-radius:6px;margin-top:10px;font-size:0.8em;color:#94a3b8;">
                    <strong style="color:#4ade80;">ü§ñ AUTO-DETECT LOGIC:</strong><br>
                    1Ô∏è‚É£ Time Sold report ‚Üí Get all hours by WO<br>
                    2Ô∏è‚É£ Anchor report (01/27/26) ‚Üí Filter OPEN WOs only (71 WOs)<br>
                    3Ô∏è‚É£ Billed report ‚Üí EXCLUDE already billed WOs (41 WOs)<br>
                    4Ô∏è‚É£ Sort by WIP value ‚Üí Show top 10<br>
                    <span style="color:#4ade80;">‚úÖ Last verified: 01/28/26 | Excluded: CUS4A, DTBLA, DUL0A, DUXFA (not in Anchor - closed/billed)</span>
                </div>
                <div style="background:#1e293b;padding:10px;border-radius:6px;margin-top:10px;font-size:0.85em;color:#e2e8f0;">
                    <span style="color:#fbbf24;">‚≠ê SDV</span> = Special WIP @ $70/hr | <span style="color:#a855f7;">üìç NJ</span> = Loaned hours (no billing control) | <span style="color:#f59e0b;">‚ö†Ô∏è Audit</span> = Cited in Jan audit
                </div>
            </div>
            
            <!-- SIMPLE ACTION BOX -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">‚ö° Quick Actions</span>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;">
                    <div style="background:rgba(16,185,129,0.15);padding:15px;border-radius:8px;border:1px solid #10b981;">
                        <div style="font-weight:bold;color:#10b981;margin-bottom:8px;">‚úÖ To Increase Revenue:</div>
                        <div style="color:#e2e8f0;font-size:0.9em;">
                            1. Review open WOs with high WIP<br>
                            2. Bill completed work ‚Üí WIP becomes revenue<br>
                            3. Push WOs stuck in "Part Ord" or "Tentative"
                        </div>
                    </div>
                    <div style="background:rgba(239,68,68,0.15);padding:15px;border-radius:8px;border:1px solid #ef4444;">
                        <div style="font-weight:bold;color:#ef4444;margin-bottom:8px;">‚ö†Ô∏è Watch Out For:</div>
                        <div style="color:#e2e8f0;font-size:0.9em;">
                            1. WOs over 30 days (notify BZ)<br>
                            2. Jobs running more hours than quoted<br>
                            3. Disputed/problem WOs eating labor
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- HOW WIP WORKS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üìù How WIP Works</span>
                </div>
                <div style="font-family:monospace;background:#0f172a;padding:20px;border-radius:8px;font-size:1em;line-height:1.8;">
                    <div style="color:#94a3b8;">WIP Calculation:</div>
                    <div style="margin-left:20px;">
                        <span style="color:#60a5fa;">Current month hours SOLD on open WO</span> √ó <span style="color:#f59e0b;">WIP Rate</span> = <span style="color:#10b981;">WIP Value</span>
                    </div>
                    <div style="margin-top:10px;padding:8px;background:rgba(239,68,68,0.15);border-radius:4px;font-size:0.85em;">
                        <span style="color:#fca5a5;">‚ö†Ô∏è Only hours sold in the CURRENT month count as WIP.</span><br>
                        <span style="color:#94a3b8;">Hours sold in previous months were already WIP'd ‚Üí they don't carry again.</span>
                    </div>
                    <div style="margin-top:15px;color:#94a3b8;">Example (SDN):</div>
                    <div style="margin-left:20px;">
                        <span style="color:#60a5fa;">35.5 hrs sold this month</span> √ó <span style="color:#f59e0b;">$145</span> = <span style="color:#10b981;">$5,148 WIP</span>
                    </div>
                    <div style="margin-top:10px;color:#94a3b8;">Example (SDV - Special):</div>
                    <div style="margin-left:20px;">
                        <span style="color:#60a5fa;">24.5 hrs sold this month</span> √ó <span style="color:#fbbf24;">$70</span> = <span style="color:#fbbf24;">$1,715 WIP</span>
                    </div>
                    <div style="margin-top:15px;border-top:1px solid #334155;padding-top:15px;">
                        <span style="color:#94a3b8;">When WO bills ‚Üí </span><span style="color:#10b981;">WIP becomes Revenue ‚úì</span>
                    </div>
                </div>
                <div style="margin-top:15px;display:grid;grid-template-columns:repeat(4,1fr);gap:10px;text-align:center;">
                    <div style="background:#1e293b;padding:12px;border-radius:6px;">
                        <div style="color:#3b82f6;font-weight:bold;">SDN</div>
                        <div style="color:white;font-size:1.2em;">$145</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:6px;border:2px solid #fbbf24;">
                        <div style="color:#fbbf24;font-weight:bold;">SDV ‚≠ê</div>
                        <div style="color:#fbbf24;font-size:1.2em;">$70</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:6px;">
                        <div style="color:#f97316;font-weight:bold;">SDR</div>
                        <div style="color:white;font-size:1.2em;">$145</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:6px;">
                        <div style="color:#a855f7;font-weight:bold;">SHC</div>
                        <div style="color:white;font-size:1.2em;">$145</div>
                    </div>
                </div>
                <div style="margin-top:15px;background:#451a03;padding:10px;border-radius:6px;font-size:0.85em;color:#fef3c7;">
                    <strong style="color:#fbbf24;">‚≠ê SDV Special:</strong> $70/hr rate, 15% margin. Email WOs >10hrs to Matt last week of month. Exclude shop WO (DT39A).
                </div>
            </div>
        </div>
        
        <!-- NQA TAB -->
        <div class="content" id="nqa">
            <!-- Dynamic NQA sections ‚Äî auto-rendered from GOALS_DATA -->
            <div id="nqaContainer"></div>
            
            <!-- NQA System Reference ‚Äî auto-rendered from GOALS_DATA -->
            <div id="nqaReferenceContainer"></div>
        </div>
        
        <!-- RANKINGS TAB -->
        <div class="content" id="rankings">
            <div id="rankingsContainer"></div>
        </div>
        <div class="content" id="reference">
            <div id="referenceContainer"></div>
        </div>
    </div>
    
    <script>
        const PASSWORD = 'denver889';
        let isRotating = false;
        let isPaused = false;
        let rotateInterval;
        let scrollInterval;
        let pauseTimeout;
        let currentTab = 0;
        const tabs = ['goals', 'actions', 'overview', 'employees', 'workorders', 'training', 'quality', 'wip', 'rankings', 'reference'];
        
        // Auto-refresh every 10 minutes
        setTimeout(() => location.reload(), 600000);
        
        function login() {
            const pwd = document.getElementById('passwordInput').value;
            if (pwd === PASSWORD) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                localStorage.setItem('denver_auth', 'true');
                showTab(tabs[0]); // Show first tab
                tryFullscreen();
                startAutoRotate();
            } else {
                document.getElementById('errorMsg').style.display = 'block';
            }
        }
        
        function logout() {
            localStorage.removeItem('denver_auth');
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('passwordInput').value = '';
            stopAutoRotate();
        }
        
        function tryFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) elem.requestFullscreen().catch(()=>{});
            else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
        }
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) tryFullscreen();
            else if (document.exitFullscreen) document.exitFullscreen();
        }
        
        function switchTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
            window.scrollTo({top: 0, behavior: 'smooth'});
        }
        
        // Alias for compatibility
        const showTab = switchTab;
        
        function startAutoRotate() {
            isRotating = true;
            isPaused = false;
            document.getElementById('rotateBtn').textContent = '‚è∏Ô∏è Stop';
            document.getElementById('rotateBtn').style.background = '#ef4444';
            updateStatus();
            startSmoothScroll();
        }
        
        function stopAutoRotate() {
            isRotating = false;
            isPaused = false;
            clearInterval(scrollInterval);
            clearTimeout(pauseTimeout);
            document.getElementById('rotateBtn').textContent = '‚ñ∂Ô∏è Auto';
            document.getElementById('rotateBtn').style.background = '#10b981';
            document.getElementById('statusIndicator').textContent = 'Ready';
            document.getElementById('statusIndicator').className = 'status-indicator';
        }
        
        function toggleRotate() {
            if (isRotating) stopAutoRotate();
            else startAutoRotate();
        }
        
        function updateStatus() {
            const indicator = document.getElementById('statusIndicator');
            if (isPaused) {
                indicator.textContent = 'PAUSED - Tap to resume';
                indicator.className = 'status-indicator status-paused';
            } else if (isRotating) {
                indicator.textContent = 'Display Mode';
                indicator.className = 'status-indicator status-active';
            }
        }
        
        function startSmoothScroll() {
            let scrollPos = 0;
            let scrollDir = 1;
            let tabTime = 0;
            const tabDuration = 23000; // 23 sec per tab (15% slower)
            const scrollSpeed = 2;
            
            clearInterval(scrollInterval);
            scrollInterval = setInterval(() => {
                if (isPaused) return;
                
                tabTime += 50;
                
                // Smooth scroll
                const content = document.getElementById(tabs[currentTab]);
                if (content) {
                    const maxScroll = content.scrollHeight - window.innerHeight + 200;
                    scrollPos += scrollDir * scrollSpeed;
                    if (scrollPos >= maxScroll) { scrollPos = maxScroll; scrollDir = -1; }
                    if (scrollPos <= 0) { scrollPos = 0; scrollDir = 1; }
                    window.scrollTo({top: scrollPos});
                }
                
                // Change tabs
                if (tabTime >= tabDuration) {
                    tabTime = 0;
                    scrollPos = 0;
                    scrollDir = 1;
                    currentTab = (currentTab + 1) % tabs.length;
                    showTab(tabs[currentTab]);
                }
            }, 50);
        }
        
        function pauseScroll() {
            if (!isRotating) return;
            isPaused = true;
            updateStatus();
            clearTimeout(pauseTimeout);
            pauseTimeout = setTimeout(() => {
                isPaused = false;
                updateStatus();
            }, 34500);
        }
        
        function resumeScroll() {
            isPaused = false;
            clearTimeout(pauseTimeout);
            updateStatus();
        }
        
        // Tab click handlers
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;
                showTab(tabId);
                if (isRotating) {
                    currentTab = tabs.indexOf(tabId);
                    pauseScroll();
                }
            });
        });
        
        // Pause on interaction
        document.addEventListener('click', pauseScroll);
        document.addEventListener('touchstart', pauseScroll);
        
        // Check for saved auth
        if (localStorage.getItem('denver_auth') === 'true') {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            showTab(tabs[0]); // Show first tab
            startAutoRotate();
        }
        
        // NPS One-Click Email System with Tracking
        const npsEmailParts = ['ths', 'masd.metrea.aero'];
        const npsEmail = npsEmailParts.join('@');
        
        // Populate peregrine email in table
        const peregineEmailEl = document.getElementById('peregrine-email');
        if (peregineEmailEl) peregineEmailEl.textContent = npsEmail;
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // CENTRALIZED GOALS DATA STORE ‚Äî Claude updates this block
        // All Goal tab cards auto-render from this data
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        const GOALS_DATA = {
            // ‚îÄ‚îÄ GOAL #1: Financial A/B Ratio ‚îÄ‚îÄ
            abTarget: 58.5,
            abMonthly: [
                // Claude adds rows as months close: {month, mattOfficial, localCalc, nonShopHrs, totalSoldHrs, paidHrs, rank, networkTotal}
                {month: 'Jan', mattOfficial: 32.5, localCalc: 33.2, nonShopHrs: 720.1, totalSoldHrs: 2168.5, paidHrs: null, rank: 19, networkTotal: 21, networkAvg: 49.2},
            ],
            abNotes: 'üìä January closed. Corrected A/B uses Time Sold non-shop hours √∑ total sold hours. Network rank: 19th of 21.',

            // ‚îÄ‚îÄ GOAL #3: Training ‚îÄ‚îÄ
            training: {
                techSchedule: [
                    // status: 'completed', 'scheduled', 'registered', 'tbd'
                    {name: 'Armando Triana-Cruz', course: 'Honeywell Primus EPIC Line Maint', dates: 'Apr 27 - May 1', status: 'scheduled'},
                    {name: 'Michael Huber', course: 'Virtual Garmin G3000/G5000', dates: 'Jan 28-29', status: 'completed'},
                    {name: 'Jose Noris', course: 'Virtual Garmin G1000 NXi', dates: 'Feb 26-27', status: 'scheduled'},
                    {name: 'Michael Hannas', course: 'Virtual Garmin G3000/G5000', dates: 'Jun 17-18', status: 'scheduled'},
                    {name: 'Julia Langford', course: 'Virtual Garmin G3000/G5000', dates: 'Jan 28-29', status: 'completed'},
                    {name: 'Ken Smith', course: 'Virtual Gogo Dealer Training', dates: 'TBD', status: 'tbd'},
                    {name: 'John Watson', course: 'aeroIT Certification', dates: 'Apr 13-17', status: 'registered'},
                    {name: 'Juan Medina', course: 'Composite Repair', dates: 'TBD', status: 'tbd'},
                ],
                lmsModules: [
                    // status: 'completed', 'pending'
                    {name: 'GPP-0110 (3 sessions)', status: 'completed', count: 3},
                    {name: 'VI/QI/RTS Recurrent 2026', status: 'pending', count: 1},
                    {name: 'CMMC-CUI Security Awareness', status: 'pending', count: 1},
                ],
                totalAvailable: 14,
                notes: '‚è≥ Watson registered Apr 13-17. Only Juan needs dates for Composite Repair.',
            },

            // ‚îÄ‚îÄ GOAL #4: Flat-Rate System Evaluation ‚îÄ‚îÄ
            flatRate: {
                milestones: [
                    {name: 'Kickoff meeting', done: true, date: '01/08/26'},
                    {name: '3-tier structure decided', done: true, date: '01/08/26'},
                    {name: 'Tier classification criteria', done: false, date: null},
                    {name: 'Data collection (3 months)', done: false, date: null},
                    {name: 'Analysis & recommendation', done: false, date: null},
                    {name: 'Final report to leadership', done: false, date: null},
                ],
                nextMeeting: '03/09/26',
                phase: 'Analysis',
                notes: 'üìä Jan 8 kickoff complete. 3-tier structure decided. Creating tier classification criteria.',
            },

            // ‚îÄ‚îÄ GOAL #5: Customer Communication ‚îÄ‚îÄ
            customerComm: {
                status: 'not_started',
                target: 'Same-day response, phone coverage during business hours',
                notes: 'üìû Need to establish baseline metrics and tracking system.',
            },

            // ‚îÄ‚îÄ GOAL #6: Shop Expenses ‚îÄ‚îÄ
            shopExpenses: {
                target: 2.5, // percent of revenue
                monthly: [
                    // Claude adds: {month, expenses, revenue, pct}
                ],
                notes: 'üìä Expense data available after month-end financial reports.',
            },

            // ‚îÄ‚îÄ GOAL #7: Audits ‚îÄ‚îÄ
            audits: [
                // Claude adds audit records as they occur
                {date: '01/21/26', type: 'QI/AFL', findings: 5, repeats: 1, 
                 details: 'Flame locker (REPEAT), parts tagging (CTQMA, CU0VA), work area',
                 closed: 0},
            ],
            auditDiscrepancies: [
                {wo: 'CTVWA', code: 'MI', techs: 'Armando / Ken', date: '01/05/26'},
                {wo: 'CV98A', code: 'MS', techs: 'Sean Macoomb', date: '01/21/26'},
            ],
            auditNotes: '‚ö†Ô∏è Jan audit: Flame locker (REPEAT), parts tagging (CTQMA, CU0VA), work area. See Quality tab.',

            // ‚îÄ‚îÄ GOAL #9: Dealer Programs ‚îÄ‚îÄ
            dealerPrograms: [
                // Claude adds: {id, name, wo, customer, status: 'completed'|'in_progress'|'pending'}
                {id: 'DP2026.00486', name: 'Collins CASP', wo: 'DUSFA', customer: 'Concorde Holdings', status: 'completed'},
            ],

            // ‚îÄ‚îÄ GOAL #10: Vendor Disputes ‚îÄ‚îÄ
            vendorDisputes: [
                // Claude adds: {wo, vendor, dateIdentified, dateCommunicated, withinDeadline, notes}
                {wo: 'CG4NA', vendor: 'BZ', dateIdentified: '12/22/25', dateCommunicated: '01/21/26', withinDeadline: true, notes: 'Communicated to BZ'},
                {wo: 'CMJHA', vendor: 'BZ', dateIdentified: null, dateCommunicated: '02/03/26', withinDeadline: true, notes: 'Phone update ‚Äî waiting on Honeywell + customer to finalize FOC installation agreement'},
            ],

            // ‚îÄ‚îÄ GOAL #11: Risk Assessment ‚îÄ‚îÄ
            riskAssessment: {
                status: 'not_started',
                items: [],
                notes: 'üìã Need to complete risk assessment documentation.',
            },

            // ‚îÄ‚îÄ FINANCIAL REFERENCE (from CFC Satellite Financials training) ‚îÄ‚îÄ
            financialRef: {
                source: 'Duncan Aviation CFC ‚Äî Satellite Financials Training',
                pnl: [
                    {term: 'Revenue', aka: 'Sales / Top Line', def: 'What the customer was billed. Includes labor, parts, and other charges.'},
                    {term: 'Cost of Sales (COS)', aka: 'Direct Costs', def: 'Direct labor and parts costs needed to produce the revenue.'},
                    {term: 'Gross Profit (GP)', aka: 'GP Line', def: 'Total Revenue ‚àí Total Cost of Sales. Measures production profitability before overhead.'},
                    {term: 'Gross Margin (GM)', aka: null, def: 'GP √∑ Total Revenue. Example: $12,161,042 √∑ $40,572,363 = 29.97%.'},
                    {term: 'Expenses', aka: 'Overhead', def: 'Costs not tied directly to production: payroll (salaries), benefits, travel, maintenance of equipment, etc.'},
                    {term: 'Net Income', aka: 'Bottom Line', def: 'GP ‚àí Total Expenses. The actual profit after all costs.'},
                    {term: 'Net Margin', aka: null, def: 'Net Income √∑ Total Revenue. Example: $1,755,825 √∑ $40,572,363 = 4.3%.'},
                    {term: 'Budget', aka: null, def: 'Annual plan and expectation for each P&L category. Set at department level Sep/Oct/Dec.'},
                ],
                metrics: [
                    {term: 'A/B Ratio (Actual-to-Bought)', def: 'Actual Hours √∑ Bought Hours. Percentage of paid hours sold to customer WOs. Budgeted metric ‚Äî higher is better. A 1% increase = 30,000 additional hours to sell ($2.4M company-wide).', formula: 'A/B = Actual Hrs / Bought Hrs'},
                    {term: 'Effective Labor Rate (ELR)', def: 'Labor Revenue √∑ Number of Hours sold. The real blended rate we get paid per hour. Combines flat rates, retail/T&M, AOG rate, and overtime rate.', formula: 'ELR = Labor Rev / Hours Sold'},
                    {term: 'Parts Margin (P/M)', def: 'Parts Profit √∑ Parts Sales. Percentage of profit compared to parts sales.', formula: 'P/M = Parts Profit / Parts Sales'},
                    {term: 'Actual/Expected Hours', def: 'Hours sold vs. hours the install project should take. Generally applies to installs. Measures quoting/estimating accuracy.', formula: 'Actual / Expected'},
                    {term: 'Billed/Actual Hours', def: 'Hours billed to customer WO vs. hours sold to shop WO. Generally applies to T&M (line work). Measures billing efficiency.', formula: 'Billed / Actual'},
                ],
                hours: [
                    {term: 'Bought Hours', def: 'Hours purchased by the company from the team member (payroll hours).'},
                    {term: 'Actual Hours', def: 'Hours sold by the team member to a customer work order.'},
                    {term: 'Non-Chargeable Hours', def: 'Hours not billed to a customer WO. Must adhere to satellite standard squawks on the shop WO.'},
                    {term: 'Main Non-Chargeable Squawks', def: 'PTB/Vacation/Holiday, Shop Clean-up, Repair Station Setup, OJE (Training), Technical Support, T/L Duties, Aircraft Movement, Meetings, Maintenance of Equipment.'},
                ],
                laborRates: [
                    {term: 'Flat Rates', def: 'Predetermined price per job (NQA system). Used for standard/recurring work.'},
                    {term: 'Retail Labor Rate (T&M)', def: 'Hourly rate billed for time & materials work. Used for custom/complex jobs.'},
                    {term: 'AOG Rate', def: 'Premium rate for Aircraft-on-Ground emergency work.'},
                    {term: 'Overtime Rate', def: 'Premium rate for work performed outside normal hours.'},
                ],
                elrFactors: [
                    'The Marketplace (competitive rates)',
                    'Reputation and quality',
                    'Meeting or exceeding flat-rated hours',
                    'Customer Expectations',
                    'Suppressing hours on work orders',
                    'Billing different rates for prep and travel',
                ],
                bigPictureExample: {
                    boughtHrs: 3000000,
                    actualHrs: 2350000,
                    ab: 78.4,
                    elr: 79.60,
                    laborSales: 187060000,
                    note: 'Company-wide example: 1% A/B increase = 30,000 hrs = $2.4M. $1 ELR increase = $2.35M profit.',
                },
            },

            // ‚îÄ‚îÄ NETWORK RANKINGS (from Matt's weekly email) ‚îÄ‚îÄ
            // Claude updates when Friday email arrives
            rankingsDate: '01/30/26',
            networkBudget: 58.7,
            rankings: [
                {rank: 1, shop: 'Sacramento', pct: 77.4},
                {rank: 2, shop: 'Las Vegas', pct: 76.6},
                {rank: 3, shop: 'Scottsdale', pct: 74.9},
                {rank: 4, shop: 'Portland', pct: 73.4},
                {rank: 5, shop: 'Ft. Lauderdale', pct: 73.4},
                {rank: 6, shop: 'St. Paul', pct: 68.4},
                {rank: 7, shop: 'Dallas', pct: 63.1},
                {rank: 8, shop: 'Nashville', pct: 59.7},
                {rank: 9, shop: 'Boston', pct: 58.9},
                {rank: 10, shop: 'Seattle', pct: 57.5},
                {rank: 11, shop: 'Teterboro', pct: 57.0},
                {rank: 12, shop: 'Long Island', pct: 51.8},
                {rank: 13, shop: 'Atlanta', pct: 49.7},
                {rank: 14, shop: 'Oxford', pct: 48.7},
                {rank: 15, shop: 'Van Nuys', pct: 46.8},
                {rank: 16, shop: 'Manassas', pct: 46.1},
                {rank: 17, shop: 'St. Louis', pct: 42.2},
                {rank: 18, shop: 'Austin', pct: 35.4},
                {rank: 19, shop: 'Denver', pct: 32.5, isDenver: true},
                {rank: 20, shop: 'Kansas City', pct: 26.3},
                {rank: 21, shop: 'Houston', pct: 20.0},
            ],

            // ‚îÄ‚îÄ AGING WO CLOSURES (weekly goal) ‚îÄ‚îÄ
            // Claude updates: closed = WOs successfully closed from 90+ day list
            agingTarget: 5,
            agingClosed: [
                {wo: 'DTBLA', date: '01/26/26'},
                {wo: 'DSW4A', date: '01/26/26'},
            ],
            agingNotes: 'CG4NA still in dispute',

            // ‚îÄ‚îÄ CURRENT MONTH A/B (in-progress, before month closes) ‚îÄ‚îÄ
            // Claude updates from daily Time Sold reports during the month
            currentMonthAB: 41.0, // Feb MTD through 02/04 ‚Äî 81.9h non-shop / 200h total

            // ‚îÄ‚îÄ SDV EXPECTED HOURS (Goal #4) ‚îÄ‚îÄ
            // Claude updates from Time Sold report (SDV WOs) and Job View report (expected hours)
            sdvRate: 70,
            sdvLastUpdated: '02/04/26 8:29 AM',
            sdvWOs: [
                // Claude adds/updates: {wo, customer, actualHrs, expectedHrs (null if not set), note, flags:[]}
                {wo: 'DB1UA', customer: 'Hogs Head Air 1 LLC', actualHrs: 73.0, expectedHrs: null, note: 'NJ controlled ‚Äî Rcds complete', flags: ['loaned']},
                {wo: 'DFPJA', customer: 'Duncan Avionics-Dallas', actualHrs: 0, expectedHrs: null, note: 'Archangel PC-12 Survey ‚Äî ‚ö†Ô∏è No estimate', flags: []},
                {wo: 'CMJHA', customer: 'Business Aviators Inc', actualHrs: 0, expectedHrs: 24.0, note: 'Ensemble Upgrade ‚Äî Parts on Order', flags: []},
                {wo: 'DSGKA', customer: 'TBD', actualHrs: 0, expectedHrs: 6.0, note: 'Supply Stamped Wire', flags: []},
                {wo: 'CS9XA', customer: 'TBD', actualHrs: 0, expectedHrs: null, note: 'Troubleshoot Transponder ‚Äî ‚ö†Ô∏è No estimate', flags: []},
                {wo: 'DRT6B', customer: 'TBD', actualHrs: 0, expectedHrs: null, note: 'Warranty work ‚Äî ‚ö†Ô∏è No estimate', flags: []},
                {wo: 'DRT6C', customer: 'TBD', actualHrs: 0, expectedHrs: 2.0, note: 'Paint touch up ‚Äî RTS complete', flags: []},
                {wo: 'CTTTA', customer: 'TBD', actualHrs: 0, expectedHrs: null, note: 'LX5 Install ‚Äî ‚ö†Ô∏è No estimate', flags: []},
                {wo: 'DUKZA', customer: 'TBD', actualHrs: 0, expectedHrs: null, note: 'Shop Maintenance ‚Äî ‚ö†Ô∏è No estimate', flags: []},
                {wo: 'CV78A', customer: 'Primus Capital', actualHrs: 10.0, expectedHrs: 400.0, note: 'Gogo Avance L3 ‚Äî Parts on Order', flags: []},
                {wo: 'CVN0A', customer: 'Stevens Aerospace', actualHrs: 5.0, expectedHrs: 41.0, note: 'ARTEX ELT ‚Äî Parts on Order', flags: []},
                {wo: 'CVWLA', customer: 'Silver Dollar Partner LLC', actualHrs: 8.0, expectedHrs: null, note: 'Universal Upgrade ‚Äî ‚ö†Ô∏è No estimate, Parts on Order', flags: []},
            ],

            // ‚îÄ‚îÄ WORK STATUS TRACKER (Anchor √ó Calendar √ó Job View) ‚îÄ‚îÄ
            // Claude updates daily from reports
            workStatusDate: '02/04/26 AM',    // Last Anchor correlation date
            jobViewDate: '02/04/26 8:33 AM',  // Last Job View report date
            workStatusCounts: {inProgress: 5, workedOn: 6, scheduled: 3, notScheduled: 76},

            // Billing Priority WOs (from Job View - WOs with hours, sorted by WIP)
            billingPriority: [
                // status: 'sdv_install'|'ready'|'hours_up'|'billed'|'in_progress'
                {wo: 'CVY8A', reg: 'N442FP', shop: 'SDN', aircraft: 'Challenger 605', hours: 20.0, rate: 145, status: 'in_progress', note: '91.411/413/RVSM ‚Äî big Feb WO'},
                {wo: 'CTQMA', reg: 'N5203U', shop: 'SDR', aircraft: 'Cessna', hours: 11.0, rate: 145, status: 'in_progress', note: 'Continuing from Jan (was 43.5h)'},
                {wo: 'CVRQA', reg: 'N95MJ', shop: 'SDN', aircraft: 'GV-SP', hours: 7.5, rate: 145, status: 'in_progress', note: 'Replace Nic/Proc 4'},
                {wo: 'CW5NA', reg: 'N218KF', shop: 'SDN', aircraft: 'BD-100', hours: 5.5, rate: 145, status: 'in_progress', note: 'Troubleshoot C1 intermittent'},
                {wo: 'CU1EA', reg: 'N505RR', shop: 'SDN', aircraft: 'Falcon 900EX', hours: 5.0, rate: 145, status: 'hours_up', note: 'Continuing from Jan'},
                {wo: 'CV78A', reg: 'N303JJ', shop: 'SDV', aircraft: 'Challenger', hours: 2.0, rate: 70, status: 'sdv_install', note: 'Gogo Avance L3 (ExpHrs: 400)'},
                {wo: 'DW1LA', reg: 'N650GP', shop: 'SDN', aircraft: 'GV-SP', hours: 2.0, rate: 145, status: 'in_progress', note: 'Assist with NAV Check'},
                {wo: 'CVWLA', reg: 'N707EL', shop: 'SDV', aircraft: 'Cessna 525A', hours: 2.0, rate: 70, status: 'sdv_install', note: 'Universal Upgrade'},
                {wo: 'CW5MA', reg: 'N209CV', shop: 'SDN', aircraft: 'Cessna 560', hours: 1.5, rate: 145, status: 'ready', note: 'Update Databases ‚Äî RTS complete'},
            ],
            billingOverflow: {count: 9, hours: 5.3, wip: 769},
            billingTotalWOs: 18,
            billingNotes: '‚úÖ 6 WOs billed Feb 1-4 ($14,881 rev) | CVY8A biggest active WO (20h) | CW5NA Bombardier troubleshoot active',

            // In Progress Today (from SDN/SDR calendars)
            inProgressToday: [
                {wo: 'CW3EA', shop: 'SDR', customer: 'Denver Rock Island Railway', hours: 2.0, tech: 'Macoomb', endDate: 'Feb 3'},
                {wo: 'CW5MA', shop: 'SDN', customer: 'KW Flight LLC', hours: 1.5, tech: 'Huber', endDate: 'Feb 4'},
                {wo: 'CW5NA', shop: 'SDN', customer: 'KW Flight LLC', hours: 5.5, tech: 'TBD', endDate: 'Feb 4'},
                {wo: 'DW11A', shop: 'SDN', customer: 'Gulfstream', hours: 0.0, tech: 'TBD', endDate: 'Feb 2'},
                {wo: 'DW1BA', shop: 'SDN', customer: 'Beechcraft', hours: 0.0, tech: 'TBD', endDate: 'Feb 2'},
            ],
            inProgressDate: 'Feb 4',

            // Not Scheduled WOs (open in Anchor, have hours, no calendar entry)
            notScheduledWOs: [
                {wo: 'DB1UA', shop: 'SDV', customer: 'Hogs Head Air 1 LLC', hours: 75.0, wip: 5250, action: 'NJ controlled - no action', flags: ['loaned']},
                {wo: 'CV78A', shop: 'SDV', customer: 'Primus Capital', hours: 10.0, wip: 700, action: 'Gogo L3 ‚Äî 400 ExpHrs, add to calendar', flags: []},
                {wo: 'CVN0A', shop: 'SDV', customer: 'Stevens Aerospace', hours: 5.0, wip: 350, action: 'ARTEX ELT ‚Äî 41 ExpHrs, add to calendar', flags: []},
                {wo: 'CVWLA', shop: 'SDV', customer: 'Silver Dollar Partner LLC', hours: 8.0, wip: 560, action: 'Universal Upgrade ‚Äî add estimate + calendar', flags: []},
            ],
            notScheduledTotal: 76,
            notScheduledNote: '76 open WOs have no calendar entry. Many have 0 hours (holding WOs). 4 SDV WOs shown above have significant hours without scheduling.',

            // ‚îÄ‚îÄ SHOP RATES ‚îÄ‚îÄ
            // flatRate = what we charge customers per shop | wipRate = internal WIP calculation rate
            shopRates: {
                SDN: {flatRate: 218, wipRate: 145},
                SDV: {flatRate: 130, wipRate: 70},
                SHC: {flatRate: 218, wipRate: 145},
                SDR: {flatRate: 176, wipRate: 145},
            },

            // ‚îÄ‚îÄ BILLED WOs (from Billed WO report ‚Äî blank Sqk Type rows only) ‚îÄ‚îÄ
            // Claude updates when Billed WO report is processed
            billedWOsDate: '02/04/26',
            billedWOsList: [
                // Claude adds: {wo, shop, hours, laborBilled, issue: ''}
                // ‚îÄ‚îÄ JANUARY BILLED ‚îÄ‚îÄ
                {wo: 'CUGZA', shop: 'SDN', hours: 17.9, laborBilled: 5444, issue: ''},
                {wo: 'CU56A', shop: 'SDN', hours: 11.9, laborBilled: 3620, issue: ''},
                {wo: 'CT8VA', shop: 'SDN', hours: 21.9, laborBilled: 4445, issue: ''},
                {wo: 'CV5SA', shop: 'SHC', hours: 7.5, laborBilled: 1831, issue: ''},
                {wo: 'CTVWA', shop: 'SDN', hours: 9.4, laborBilled: 1901, issue: ''},
                {wo: 'CU44A', shop: 'SDR', hours: 17.9, laborBilled: 1788, issue: '$100/hr rate'},
                {wo: 'CV3UA', shop: 'SHC', hours: 5.5, laborBilled: 0, issue: 'No labor billed'},
                {wo: 'DTBLA', shop: 'SDV', hours: 48.5, laborBilled: 6400, issue: '$132/hr rate'},
                {wo: 'DT13A, DT56A, DT99A', shop: 'SDN', hours: 12.0, laborBilled: 0, issue: 'No labor billed'},
                {wo: 'CT5FA', shop: 'SDN', hours: 4.0, laborBilled: 580, issue: ''},
                {wo: 'CU0VA', shop: 'SDR', hours: 6.0, laborBilled: 1126, issue: ''},
                {wo: 'CU16A', shop: 'SDN', hours: 5.5, laborBilled: 1400, issue: ''},
                {wo: 'CU92A', shop: 'SDN', hours: 3.0, laborBilled: 400, issue: ''},
                {wo: 'CTQMA', shop: 'SDR', hours: 8.5, laborBilled: 1232, issue: ''},
                {wo: 'CUPFA', shop: 'SDN', hours: 4.5, laborBilled: 653, issue: ''},
                {wo: 'CUL2A', shop: 'SDR', hours: 5.0, laborBilled: 725, issue: ''},
                {wo: 'CT2GA', shop: 'SDR', hours: 11.5, laborBilled: 1656, issue: ''},
                {wo: 'DT2CA', shop: 'SDV', hours: 4.0, laborBilled: 520, issue: ''},
                {wo: 'CT89A', shop: 'SDR', hours: 10.5, laborBilled: 1536, issue: ''},
                {wo: 'DT4HA', shop: 'SDV', hours: 8.4, laborBilled: 1092, issue: ''},
                {wo: 'CT5YA', shop: 'SDR', hours: 7.0, laborBilled: 1064, issue: ''},
                {wo: 'CU1EA', shop: 'SDN', hours: 2.0, laborBilled: 290, issue: ''},
                {wo: 'CTRVA', shop: 'SDN', hours: 4.0, laborBilled: 580, issue: ''},
                {wo: 'DT6UA', shop: 'SDV', hours: 5.5, laborBilled: 715, issue: ''},
                {wo: 'CU6MA', shop: 'SDN', hours: 4.0, laborBilled: 580, issue: ''},
                {wo: 'CU0JA', shop: 'SDN', hours: 5.0, laborBilled: 725, issue: ''},
                {wo: 'DT1VA', shop: 'SDV', hours: 14.0, laborBilled: 1855, issue: ''},
                {wo: 'CT27A', shop: 'SDR', hours: 12.0, laborBilled: 1728, issue: ''},
                {wo: 'CU7VA', shop: 'SDR', hours: 8.0, laborBilled: 1200, issue: ''},
                {wo: 'CT5KA', shop: 'SDN', hours: 6.5, laborBilled: 942, issue: ''},
                {wo: 'CU3BA', shop: 'SDR', hours: 8.9, laborBilled: 1284, issue: ''},
                {wo: 'CU8LA', shop: 'SDN', hours: 3.0, laborBilled: 435, issue: ''},
                {wo: 'CU5CA', shop: 'SDR', hours: 4.0, laborBilled: 580, issue: ''},
                {wo: 'CT77A', shop: 'SDN', hours: 3.5, laborBilled: 508, issue: ''},
                {wo: 'CU4VA', shop: 'SDN', hours: 7.5, laborBilled: 1088, issue: ''},
                {wo: 'CT8EA', shop: 'SDR', hours: 9.5, laborBilled: 1371, issue: ''},
                {wo: 'CUA8A', shop: 'SDN', hours: 2.0, laborBilled: 348, issue: ''},
                {wo: 'CU32A', shop: 'SDN', hours: 4.0, laborBilled: 580, issue: ''},
                {wo: 'CU53A', shop: 'SDN', hours: 2.5, laborBilled: 363, issue: ''},
                {wo: 'CT4KA', shop: 'SDN', hours: 5.0, laborBilled: 725, issue: ''},
                // ‚îÄ‚îÄ FEBRUARY BILLED (Feb 1-4) ‚îÄ‚îÄ
                {wo: 'CW2UA', shop: 'SDN', hours: 6.9, laborBilled: 2950, issue: 'Eurocopter AS350B3 ‚Äî great Bld/Act (13.5/6.9)'},
                {wo: 'CW65A', shop: 'SDN', hours: 4.4, laborBilled: 706, issue: ''},
                {wo: 'CVSXA', shop: 'SDR', hours: 4.9, laborBilled: 845, issue: 'Diamond DA40'},
                {wo: 'CW27A', shop: 'SDR', hours: 8.4, laborBilled: 1440, issue: 'Cessna 172S'},
                {wo: 'CVYQA', shop: 'SDR', hours: 3.9, laborBilled: 634, issue: 'P2006T'},
                {wo: 'CVUAA', shop: 'SHC', hours: 5.5, laborBilled: 0, issue: 'Parts only ‚Äî $8,307 parts rev, $4,540 GP'},
            ],

            // ‚îÄ‚îÄ WIP DATA (from Time Sold √ó Anchor cross-reference) ‚îÄ‚îÄ
            // Claude updates when Time Sold or Anchor reports are processed
            // CRITICAL: 'hours' = CURRENT MONTH hours sold only (not total WO hours!)
            // Hours from previous months were already WIP'd and don't carry again.
            wipDate: '02/04/26',  // Date of last Anchor report
            wipMonth: 'February',
            wipNextMonth: 'March',
            wipExcluded: [],  // Jan WOs already billed/closed
            wipEntries: [
                // Claude adds/updates: {wo, shop, customer, hours (CURRENT MONTH ONLY), rate (auto from shopRates.wipRate), wip (auto: hours√órate), flags: [], billed: null, notes: ''}
                // ‚îÄ‚îÄ FEBRUARY MTD (hours sold in Feb only) ‚îÄ‚îÄ
                {wo: 'CVY8A', shop: 'SDN', customer: 'Stinson Aviation LLC', hours: 20.0, rate: 145, wip: 2900, flags: [], billed: null, notes: '91.411/413/RVSM ‚Äî biggest Feb WO'},
                {wo: 'CTQMA', shop: 'SDR', customer: 'Robert P Husted', hours: 11.0, rate: 145, wip: 1595, flags: ['audit'], billed: null, notes: 'Continuing from Jan ‚Äî QA audit cited'},
                {wo: 'CVRQA', shop: 'SDN', customer: 'Intl Jet Aviation Services', hours: 7.5, rate: 145, wip: 1088, flags: [], billed: null, notes: 'Replace Nic/Proc 4'},
                {wo: 'CW5NA', shop: 'SDN', customer: 'KW Flight LLC', hours: 5.5, rate: 145, wip: 798, flags: [], billed: null, notes: 'Troubleshoot C1 intermittent ‚Äî active in Job View'},
                {wo: 'CU1EA', shop: 'SDN', customer: '42K Re Management LLC', hours: 5.0, rate: 145, wip: 725, flags: [], billed: null, notes: 'Continuing from Jan'},
                {wo: 'CVSXA', shop: 'SDR', customer: 'HighWays LLC', hours: 4.4, rate: 145, wip: 638, flags: ['billed'], billed: 845, notes: 'Billed 02/03'},
                {wo: 'CW65A', shop: 'SDN', customer: 'Intl Jet Aviation Services', hours: 3.4, rate: 145, wip: 493, flags: ['billed'], billed: 706, notes: 'Billed 02/03'},
                {wo: 'CW2UA', shop: 'SDN', customer: 'Med-Trans Corp', hours: 5.9, rate: 145, wip: 856, flags: ['billed'], billed: 2950, notes: 'Billed 02/02 ‚Äî Eurocopter'},
                {wo: 'CW3EA', shop: 'SDR', customer: 'Denver Rock Island Railway', hours: 2.0, rate: 145, wip: 290, flags: [], billed: null, notes: 'GPS antenna doubler ‚Äî active in Job View'},
                {wo: 'CV78A', shop: 'SDV', customer: 'Primus Capital', hours: 2.0, rate: 70, wip: 140, flags: [], billed: null, notes: 'Gogo Avance L3 (400 ExpHrs)'},
                {wo: 'DW1LA', shop: 'SDN', customer: 'Wingtip Aviation', hours: 2.0, rate: 145, wip: 290, flags: [], billed: null, notes: 'Assist with NAV Check'},
                {wo: 'CVWLA', shop: 'SDV', customer: 'Silver Dollar Partner LLC', hours: 2.0, rate: 70, wip: 140, flags: [], billed: null, notes: 'Universal Upgrade'},
                {wo: 'CW5MA', shop: 'SDN', customer: 'KW Flight LLC', hours: 1.5, rate: 145, wip: 218, flags: [], billed: null, notes: 'Update Databases ‚Äî RTS complete'},
                {wo: 'DB1UA', shop: 'SDV', customer: 'Hogs Head Air 1 LLC', hours: 0, rate: 70, wip: 0, flags: ['loaned'], loanNote: 'NJ controlled', billed: null, notes: 'No Feb hours yet'},
            ],
            wipTotalHours: 81.9,  // All Feb component hours
            wipTotalValue: 10429,  // All open WOs total

            // ‚îÄ‚îÄ OVER 30 DAYS (BZ List) ‚îÄ‚îÄ
            // Claude updates from Brian's Over30 report + Billed WO cross-reference
            over30LastUpdated: '01/28/26',
            over30Status: 'clear',  // 'clear', 'warning', 'critical'
            over30StatusNote: "Per Brian's 01/28 email - only long-term dispute remains.",
            over30Entries: [
                // Claude adds: {wo, shop, days, wip, status: 'billed'|'dispute'|'open', notes}
                {wo: 'DTBLA', shop: 'SDV', days: 40, wip: 1327, status: 'billed', notes: 'Billed 01/26/26'},
                {wo: 'DSW4A', shop: 'SDN', days: 48, wip: 52763, status: 'billed', notes: 'Billed before EOM ‚úÖ'},
                {wo: 'CG4NA', shop: 'SDN', days: 188, wip: 2486, status: 'dispute', notes: 'Kauffman owner was in ICU, hope to resolve soon'},
            ],

            // ‚îÄ‚îÄ NQA FLAT RATE ANALYSIS ‚îÄ‚îÄ
            // Claude updates when Billed WO report is processed ‚Äî cross-reference squawks with Price Items
            // AUTO-SYNC: nqaJobs + tmJobs should cover ALL squawks in billedWOsList
            // Missing WOs flagged automatically by renderer
            nqaAdminPct: 0.20,      // 20% admin fee
            nqaAdminCap: 350,       // Max admin fee per job
            nqaMonth: 'January',
            nqaLastUpdated: '02/03/26',
            nqaPriceItems: 160,     // Total NQA items in AS400
            nqaImpliedRate: 218,    // Average implied rate from Price Items
            flatRateCodes: [
                {code: 'L', desc: 'Labor only'},
                {code: 'T', desc: 'Labor + Parts together'},
                {code: 'V', desc: 'Labor w/warranty'},
                {code: 'P', desc: 'Parts only'},
                {code: 'W', desc: 'Parts w/warranty'},
                {code: 'S', desc: 'Parts + Labor separate'},
                {code: 'A', desc: 'Labor+Parts+OS together'},
                {code: 'B-F, O, X', desc: 'Other combos with OS/warranty'},
            ],
            nqaJobs: [
                // Claude adds: {wo, reg, shop, squawk, actualHrs, flatRateHrs, recommend: ''}
                // variance auto-calculated: actualHrs - flatRateHrs (negative = profit)
                {wo: 'CU0VA', reg: 'N84RJ', shop: 'SDR', squawk: '91.411 & 91.413 (Cessna 172S)', actualHrs: 4.0, flatRateHrs: 18.6, recommend: ''},
                {wo: 'CU1EA', reg: 'N505RR', shop: 'SDN', squawk: 'Autopilot troubleshooting', actualHrs: 4.5, flatRateHrs: 8.0, recommend: ''},
                {wo: 'CU92A', reg: 'N331MW', shop: 'SDN', squawk: 'Troubleshoot Autopilot', actualHrs: 4.0, flatRateHrs: 8.0, recommend: ''},
                {wo: 'CU92A', reg: 'N331MW', shop: 'SDN', squawk: 'Perform ULB Test', actualHrs: 2.0, flatRateHrs: 2.0, recommend: ''},
                {wo: 'CUC9A', reg: 'N3278', shop: 'SHC', squawk: 'Overhaul Main Ship Battery 405CH10', actualHrs: 12.0, flatRateHrs: 3.0, recommend: 'Update battery overhaul NQA from 3h to 10-12h or quote T&M'},
                {wo: 'CUL2A', reg: 'N5203U', shop: 'SDR', squawk: 'KT74 inoperative (transponder)', actualHrs: 12.5, flatRateHrs: 4.0, recommend: 'Complex transponder issues ‚Üí Quote T&M upfront'},
                {wo: 'CUPFA', reg: 'N176MG', shop: 'SDN', squawk: 'Replace #2 ADC due to red X', actualHrs: 9.9, flatRateHrs: 8.0, recommend: ''},
                {wo: 'CUSDA', reg: 'N7701A', shop: 'SDR', squawk: '91.411 & 91.413 (Piper PA-44)', actualHrs: 4.9, flatRateHrs: 6.0, recommend: ''},
                {wo: 'DUYYA', reg: 'N219JG', shop: 'SDN', squawk: 'Exchange Vertical Gyro', actualHrs: 2.0, flatRateHrs: 4.0, recommend: ''},
            ],
            tmJobs: [
                // T&M jobs ‚Äî no NQA flat rate match, billed hourly
                // Claude adds: {wo, reg, shop, squawk, hours}
                {wo: 'CU0VA', reg: 'N84RJ', shop: 'SDR', squawk: 'GSU75 AHRS intermittent red x', hours: 31.5},
                {wo: 'CU1EA', reg: 'N505RR', shop: 'SDN', squawk: 'Tail Number Restrap', hours: 15.0},
                {wo: 'CU1EA', reg: 'N505RR', shop: 'SDN', squawk: 'SATCOM Restrap', hours: 5.0},
                {wo: 'CU1EA', reg: 'N505RR', shop: 'SDN', squawk: 'SVS troubleshooting', hours: 2.5},
                {wo: 'CU1EA', reg: 'N505RR', shop: 'SDN', squawk: 'Databases for NAV, and charts', hours: 2.0},
                {wo: 'CU1EA', reg: 'N505RR', shop: 'SDN', squawk: 'Travel to BJC', hours: 6.5},
                {wo: 'CUPFA', reg: 'N176MG', shop: 'SDN', squawk: 'Troubleshoot leaks on P/S system', hours: 7.0},
                {wo: 'CVLNA', reg: 'N197GA', shop: 'SDN', squawk: 'Travel Time', hours: 2.0},
                {wo: 'DVR0A', reg: 'STOCK', shop: 'SDN', squawk: 'Repair Servo', hours: 1.0},
            ],
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // GOALS RENDERER ‚Äî Auto-renders all goal cards from GOALS_DATA
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderGoals() {
            const c = document.getElementById('goalsContainer');
            if (!c) return;
            const surveys = getNpsSurveys();
            const billedWOs = customerDatabase.length;
            let html = '';

            // Helper functions
            function pctColor(pct) { return pct >= 75 ? '#10b981' : pct >= 40 ? '#f59e0b' : '#ef4444'; }
            function badgeClass(type) { return type === 'green' ? 'badge badge-green' : type === 'amber' ? 'badge badge-amber' : type === 'gray' ? 'badge badge-gray' : 'badge badge-red'; }
            function progressGradient(pct) {
                if (pct >= 75) return 'background:linear-gradient(90deg,#10b981,#34d399)';
                if (pct >= 40) return 'background:linear-gradient(90deg,#f59e0b,#fbbf24)';
                return 'background:linear-gradient(90deg,#ef4444,#f59e0b)';
            }

            // ‚îÄ‚îÄ GOAL #1: Financial A/B ‚îÄ‚îÄ
            const d = GOALS_DATA;
            const latestAB = d.abMonthly[d.abMonthly.length - 1];
            const abAvg = d.abMonthly.length > 0 ? (d.abMonthly.reduce((s,m) => s + (m.mattOfficial||0), 0) / d.abMonthly.length).toFixed(1) : 0;
            const abPct = Math.round((abAvg / d.abTarget) * 100);
            const abGap = (latestAB.mattOfficial - d.abTarget).toFixed(1);
            const abGapStr = abGap > 0 ? '+' + abGap : abGap;
            const closedMonths = d.abMonthly.map(m => m.month).join(', ');
            html += `<div class="goal-card">
                <div class="goal-header">
                    <span class="goal-title">#1 Financial Objectives (A/B Ratio + ELR)</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${pctColor(abPct)}">${abPct}%</span>
                        <span class="${badgeClass(abPct>=75?'green':abPct>=40?'amber':'red')}">${closedMonths} Closed</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:${Math.min(abPct,100)}%;${progressGradient(abPct)}"></div></div>
                </div>
                <div>${latestAB.month} Final: ${latestAB.mattOfficial}% A/B (Matt) | ${latestAB.localCalc}% (Local) | Target: ${d.abTarget}% | Gap: ${abGapStr} pts</div>
                <div>Network Rank: ${latestAB.rank}/${latestAB.networkTotal} | Network Avg: ${latestAB.networkAvg}%</div>
                <div class="goal-notes">${d.abNotes}</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #2: NPS (auto-sync from npsSurveyData + customerDatabase) ‚îÄ‚îÄ
            const npsSent = surveys.length;
            const npsCompleted = surveys.filter(s => s.status === 'Completed').length;
            const npsPending = surveys.filter(s => s.status === 'Sent').length;
            const npsYearlyTarget = 12;
            const npsCompPct = Math.round((npsCompleted / npsYearlyTarget) * 100);
            const npsSentPct = Math.round((npsSent / billedWOs) * 100);
            const npsStatus = npsCompleted >= 1 ? 'green' : npsSent > 0 ? 'amber' : 'red';
            const npsLabel = npsCompleted >= 1 ? 'On Track' : npsSent > 0 ? 'Sent - Awaiting' : 'Action Needed!';
            const currentMonth = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][new Date().getMonth()];
            html += `<div class="goal-card" style="border:2px solid #a855f7;">
                <div class="goal-header">
                    <span class="goal-title">#2 Net Promoter Score (NPS) - Customer Satisfaction</span>
                    <div class="goal-progress">
                        <span id="npsGoalPct" class="goal-pct" style="color:${pctColor(npsCompPct)}">${npsCompPct}%</span>
                        <span id="npsGoalBadge" class="${badgeClass(npsStatus)}">${npsLabel}</span>
                    </div>
                </div>
                <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
                    <span style="font-size:0.85em;color:#10b981;width:80px;">‚úÖ Completed</span>
                    <div class="progress-container" style="flex:1;margin:0;">
                        <div class="progress-bar"><div id="npsCompletedBar" class="progress-fill progress-green" style="width:${Math.min(npsCompPct,100)}%"></div></div>
                    </div>
                    <span id="npsCompletedCount" style="font-size:0.85em;color:#94a3b8;width:60px;">${npsCompleted} / ${npsYearlyTarget}</span>
                </div>
                <div style="display:flex;align-items:center;gap:10px;">
                    <span style="font-size:0.85em;color:#a855f7;width:80px;">üìß Sent</span>
                    <div class="progress-container" style="flex:1;margin:0;">
                        <div class="progress-bar"><div id="npsSentBar" class="progress-fill" style="width:${Math.min(npsSentPct,100)}%;background:linear-gradient(90deg,#a855f7,#c084fc);"></div></div>
                    </div>
                    <span id="npsSentCount" style="font-size:0.85em;color:#94a3b8;width:70px;">${npsSent} / ${billedWOs}</span>
                </div>
                <div id="npsGoalSummary" style="margin-top:10px;">Target: 1/month (12/yr) | Sent vs Billed WOs: ${npsSent}/${billedWOs} (${npsSentPct}%)</div>
                <div class="goal-notes">üìß ${currentMonth}: ${npsSent} surveys sent, ${npsCompleted} completed, ${npsPending} awaiting response.</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #3: Training (auto-sync from training data) ‚îÄ‚îÄ
            const t = d.training;
            const techCompleted = t.techSchedule.filter(s => s.status === 'completed').length;
            const techScheduled = t.techSchedule.filter(s => s.status !== 'tbd').length;
            const lmsCompleted = t.lmsModules.filter(m => m.status === 'completed').reduce((s,m) => s+m.count, 0);
            const lmsTotal = t.lmsModules.reduce((s,m) => s+m.count, 0);
            const totalCompleted = techCompleted + lmsCompleted;
            const trainPct = Math.round((totalCompleted / t.totalAvailable) * 100);
            const needDates = t.techSchedule.filter(s => s.status === 'tbd').length;
            html += `<div class="goal-card">
                <div class="goal-header">
                    <span class="goal-title">#3 Training Completion</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${pctColor(trainPct)}">${trainPct}%</span>
                        <span class="${badgeClass(trainPct>=75?'green':trainPct>0?'amber':'red')}">${totalCompleted}/${t.totalAvailable} Done</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:${trainPct}%;${progressGradient(trainPct)}"></div></div>
                </div>
                <div>Technical: ${techCompleted} completed, ${techScheduled}/${t.techSchedule.length} scheduled (${Math.round(techScheduled/t.techSchedule.length*100)}%) | LMS: ${lmsCompleted}/${lmsTotal}</div>
                ${needDates > 0 ? `<div style="color:#f59e0b;">‚ö†Ô∏è ${needDates} tech(s) still need training dates</div>` : ''}
                <div class="goal-notes">${t.notes}</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #4: Flat-Rate System Evaluation ‚îÄ‚îÄ
            const fr = d.flatRate;
            const frDone = fr.milestones.filter(m => m.done).length;
            const frPct = Math.round((frDone / fr.milestones.length) * 100);
            html += `<div class="goal-card">
                <div class="goal-header">
                    <span class="goal-title">#4 Flat-Rate System Evaluation</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${pctColor(frPct)}">${frPct}%</span>
                        <span class="${badgeClass(frPct>=75?'green':frPct>0?'amber':'gray')}">${fr.phase}</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:${frPct}%;${progressGradient(frPct)}"></div></div>
                </div>
                <div>Milestones: ${frDone}/${fr.milestones.length} | Phase: ${fr.phase} | Next Meeting: ${fr.nextMeeting}</div>
                <div style="margin-top:8px;display:flex;flex-wrap:wrap;gap:5px;">${fr.milestones.map(m =>
                    `<span style="background:${m.done?'#10b981':'#374151'};color:${m.done?'white':'#9ca3af'};padding:2px 8px;border-radius:4px;font-size:0.8em;">${m.done?'‚úÖ':'‚¨ú'} ${m.name}</span>`
                ).join('')}</div>
                <div class="goal-notes">${fr.notes}</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #5: Customer Communication ‚îÄ‚îÄ
            const cc = d.customerComm;
            html += `<div class="goal-card">
                <div class="goal-header">
                    <span class="goal-title">#5 Customer Communication & Response Times</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:#64748b">N/A</span>
                        <span class="${badgeClass(cc.status === 'not_started' ? 'gray' : 'amber')}">${cc.status === 'not_started' ? 'Not Started' : 'In Progress'}</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:0%"></div></div>
                </div>
                <div>Target: ${cc.target}</div>
                <div class="goal-notes">${cc.notes}</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #6: Shop Expenses ‚îÄ‚îÄ
            const se = d.shopExpenses;
            const seMonths = se.monthly.length;
            const seMetCount = se.monthly.filter(m => m.pct <= se.target).length;
            const sePct = seMonths > 0 ? Math.round((seMetCount / seMonths) * 100) : 0;
            html += `<div class="goal-card">
                <div class="goal-header">
                    <span class="goal-title">#6 Shop Expenses Within Budget</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${seMonths>0 ? pctColor(sePct) : '#64748b'}">${seMonths>0 ? sePct+'%' : '0%'}</span>
                        <span class="${badgeClass(seMonths>0 ? (sePct>=75?'green':'amber') : 'gray')}">${seMonths>0 ? seMetCount+'/'+seMonths+' Months Met' : 'Awaiting Data'}</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:${sePct}%;${progressGradient(sePct)}"></div></div>
                </div>
                <div>Target: ‚â§${se.target}% of revenue${seMonths>0 ? ' | '+seMetCount+'/'+seMonths+' months within budget' : ''}</div>
                ${seMonths > 0 ? `<div class="table-container" style="max-height:150px;overflow-y:auto;margin:8px 0;">
                    <table style="font-size:0.8em;"><thead><tr><th>Month</th><th>Expenses</th><th>Revenue</th><th>%</th><th>Status</th></tr></thead>
                    <tbody>${se.monthly.map(m => `<tr style="background:rgba(${m.pct<=se.target?'16,185,129':'239,68,68'},0.15);">
                        <td>${m.month}</td><td>$${m.expenses.toLocaleString()}</td><td>$${m.revenue.toLocaleString()}</td>
                        <td style="color:${m.pct<=se.target?'#10b981':'#ef4444'};font-weight:bold;">${m.pct}%</td>
                        <td>${m.pct<=se.target?'‚úÖ':'‚ùå'}</td></tr>`).join('')}</tbody></table></div>` : ''}
                <div class="goal-notes">${se.notes}</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #7: Audits ‚îÄ‚îÄ
            const totalFindings = d.audits.reduce((s,a) => s + a.findings, 0);
            const totalRepeats = d.audits.reduce((s,a) => s + a.repeats, 0);
            const totalClosed = d.audits.reduce((s,a) => s + a.closed, 0);
            const cleanAudits = d.audits.filter(a => a.findings === 0).length;
            const totalAudits = d.audits.length;
            const auditBorder = totalFindings > 0 ? 'border:2px solid #ef4444;' : 'border:2px solid #10b981;';
            const discCount = d.auditDiscrepancies.length;
            html += `<div class="goal-card" style="${auditBorder}">
                <div class="goal-header">
                    <span class="goal-title">#7 FAA/Internal Audits - Zero Findings</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${totalFindings>0?'#ef4444':'#10b981'}">${totalFindings}</span>
                        <span class="${badgeClass(totalFindings===0?'green':'red')}">${totalFindings} Finding${totalFindings!==1?'s':''} YTD</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:${totalFindings>0?'100':'0'}%;background:${totalFindings>0?'#ef4444':'#10b981'}"></div></div>
                </div>
                <div>2026 YTD: ${totalAudits} audit${totalAudits!==1?'s':''} | <span style="color:${totalFindings>0?'#ef4444':'#10b981'};font-weight:bold;">${totalFindings} finding${totalFindings!==1?'s':''} (${totalRepeats} repeat${totalRepeats!==1?'s':''})</span> | ${totalClosed} closed | ${discCount} tech discrepanc${discCount!==1?'ies':'y'}</div>
                ${d.audits.length > 0 ? `<div style="margin-top:8px;display:flex;flex-wrap:wrap;gap:5px;">${d.audits.map(a =>
                    `<span style="background:${a.findings===0?'rgba(16,185,129,0.2)':'rgba(239,68,68,0.2)'};padding:4px 10px;border-radius:6px;font-size:0.8em;">
                    ${a.date}: ${a.findings} finding${a.findings!==1?'s':''} (${a.closed} closed)</span>`).join('')}</div>` : ''}
                <div class="goal-notes">${d.auditNotes}</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #8: Monthly A/B Budget Performance ‚îÄ‚îÄ
            const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            const abMap = {};
            d.abMonthly.forEach(m => { abMap[m.month] = m; });
            const monthsMet = d.abMonthly.filter(m => m.mattOfficial >= d.abTarget).length;
            const metPct = Math.round((monthsMet / 12) * 100);
            const trendAvg = d.abMonthly.length > 0 ? (d.abMonthly.reduce((s,m) => s + m.mattOfficial, 0) / d.abMonthly.length).toFixed(1) : '--';
            const projMet = trendAvg >= d.abTarget ? 12 : monthsMet;
            html += `<div class="goal-card" style="border:2px solid ${monthsMet>0?'#f59e0b':'#ef4444'};">
                <div class="goal-header">
                    <span class="goal-title">#8 Monthly A/B Budget Performance</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${monthsMet>0?'#f59e0b':'#ef4444'}">${monthsMet}/12</span>
                        <span class="${badgeClass(monthsMet>=6?'green':monthsMet>0?'amber':'red')}">${Math.round(monthsMet/12*100)}% Months Met</span>
                    </div>
                </div>
                <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
                    <span style="font-size:0.8em;color:#f59e0b;width:100px;">üéØ Year Goal</span>
                    <div class="progress-container" style="flex:1;margin:0;">
                        <div class="progress-bar"><div class="progress-fill" style="width:${metPct}%;${progressGradient(metPct)}"></div></div>
                    </div>
                    <span style="font-size:0.85em;color:#94a3b8;width:80px;">${monthsMet} / 12 mo</span>
                </div>
                <div class="table-container" style="max-height:200px;overflow-y:auto;margin:10px 0;">
                    <table style="font-size:0.8em;">
                        <thead><tr><th>Month</th><th>Target</th><th>Matt's</th><th>Local</th><th>Gap</th><th>Rank</th><th>Status</th></tr></thead>
                        <tbody>${months.map(mo => {
                            const row = abMap[mo];
                            if (row) {
                                const met = row.mattOfficial >= d.abTarget;
                                const gap = (row.mattOfficial - d.abTarget).toFixed(1);
                                const gapStr = gap > 0 ? '+'+gap : gap;
                                return `<tr style="background:rgba(${met?'16,185,129':'239,68,68'},0.2);">
                                    <td><strong>${mo}</strong></td><td>${d.abTarget}%</td>
                                    <td style="color:${met?'#10b981':'#ef4444'};font-weight:bold;">${row.mattOfficial}%</td>
                                    <td style="color:#94a3b8;">${row.localCalc}%</td>
                                    <td style="color:${met?'#10b981':'#ef4444'};">${gapStr} pts</td>
                                    <td>${row.rank}/${row.networkTotal}</td>
                                    <td><span style="color:${met?'#10b981':'#ef4444'};">${met?'‚úÖ Met':'‚ùå Not Met'}</span></td></tr>`;
                            }
                            return `<tr><td>${mo}</td><td>${d.abTarget}%</td><td style="color:#64748b;">--</td><td style="color:#64748b;">--</td><td>--</td><td>--</td><td><span style="color:#64748b;">‚è≥ Upcoming</span></td></tr>`;
                        }).join('')}</tbody>
                    </table>
                </div>
                <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px;">
                    <div style="background:#1e293b;padding:8px;border-radius:6px;text-align:center;">
                        <div style="color:#64748b;font-size:0.7em;">MONTHS MET</div>
                        <div style="color:${monthsMet>0?'#f59e0b':'#ef4444'};font-size:1.2em;font-weight:bold;">${monthsMet} / 12</div>
                    </div>
                    <div style="background:#1e293b;padding:8px;border-radius:6px;text-align:center;">
                        <div style="color:#64748b;font-size:0.7em;">CURRENT TREND</div>
                        <div style="color:#f59e0b;font-size:1.2em;font-weight:bold;">${trendAvg}%</div>
                    </div>
                    <div style="background:#1e293b;padding:8px;border-radius:6px;text-align:center;">
                        <div style="color:#64748b;font-size:0.7em;">YEAR PROJECTION</div>
                        <div style="color:${projMet>=6?'#f59e0b':'#ef4444'};font-size:1.2em;font-weight:bold;">${projMet}/12</div>
                    </div>
                </div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #9: Dealer Programs ‚îÄ‚îÄ
            const dp = d.dealerPrograms;
            const dpCompleted = dp.filter(p => p.status === 'completed').length;
            const dpTotal = dp.length;
            const dpPct = dpTotal > 0 ? Math.round((dpCompleted / dpTotal) * 100) : 0;
            html += `<div class="goal-card">
                <div class="goal-header">
                    <span class="goal-title">#9 Dealer Programs Utilization</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${pctColor(dpPct)}">${dpPct}%</span>
                        <span class="${badgeClass(dpPct>=75?'green':dpPct>0?'amber':'gray')}">${dpCompleted === dpTotal && dpTotal > 0 ? 'On Track' : dpTotal > 0 ? dpCompleted+'/'+dpTotal : 'None Yet'}</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:${dpPct}%;${progressGradient(dpPct)}"></div></div>
                </div>
                <div>2026 Programs: <strong>${dpCompleted} Completed</strong> / ${dpTotal} Total</div>
                ${dp.length > 0 ? `<div style="margin-top:8px;display:flex;flex-wrap:wrap;gap:5px;">${dp.map(p =>
                    `<span style="background:${p.status==='completed'?'#10b981':p.status==='in_progress'?'#f59e0b':'#374151'};color:white;padding:3px 10px;border-radius:4px;font-size:0.8em;">
                    ${p.status==='completed'?'‚úÖ':p.status==='in_progress'?'üîÑ':'‚¨ú'} ${p.id} ${p.name} (${p.wo})</span>`).join('')}</div>` : ''}
                <div class="goal-notes">‚úÖ Tracking 2026 programs only. Forward new DP emails to Claude.</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #10: Vendor Disputes ‚îÄ‚îÄ
            const vd = d.vendorDisputes;
            const vdOnTime = vd.filter(v => v.withinDeadline).length;
            const vdTotal = vd.length;
            const vdPct = vdTotal > 0 ? Math.round((vdOnTime / vdTotal) * 100) : 100;
            html += `<div class="goal-card">
                <div class="goal-header">
                    <span class="goal-title">#10 Vendor Disputes Communication</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${pctColor(vdPct)}">${vdPct}%</span>
                        <span class="${badgeClass(vdPct>=75?'green':'red')}">${vdPct===100?'On Track':'Needs Attention'}</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:${vdPct}%;${progressGradient(vdPct)}"></div></div>
                </div>
                <div>Target: Communicate to BZ within 30 days | <strong>2026 Disputes: ${vdTotal}</strong> (${vdOnTime} on-time)</div>
                ${vd.length > 0 ? `<div style="margin-top:8px;display:flex;flex-wrap:wrap;gap:5px;">${vd.map(v =>
                    `<span style="background:${v.withinDeadline?'#10b981':'#ef4444'};color:white;padding:3px 10px;border-radius:4px;font-size:0.8em;">
                    ${v.withinDeadline?'‚úÖ':'‚ùå'} ${v.wo} ‚Üí ${v.dateCommunicated}</span>`).join('')}</div>` : ''}
                <div class="goal-notes">‚úÖ Forward BZ emails to Claude for auto-tracking.</div>
            </div>`;

            // ‚îÄ‚îÄ GOAL #11: Risk Assessment ‚îÄ‚îÄ
            const ra = d.riskAssessment;
            const raDone = ra.items.filter(i => i.done).length;
            const raTotal = ra.items.length;
            const raPct = raTotal > 0 ? Math.round((raDone / raTotal) * 100) : 0;
            html += `<div class="goal-card">
                <div class="goal-header">
                    <span class="goal-title">#11 Risk Assessment</span>
                    <div class="goal-progress">
                        <span class="goal-pct" style="color:${raTotal>0 ? pctColor(raPct) : '#64748b'}">${raTotal>0 ? raPct+'%' : 'N/A'}</span>
                        <span class="${badgeClass(ra.status === 'not_started' ? 'gray' : raPct>=75 ? 'green' : 'amber')}">${ra.status === 'not_started' ? 'Not Started' : raDone+'/'+raTotal+' Items'}</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar"><div class="progress-fill" style="width:${raPct}%;${progressGradient(raPct)}"></div></div>
                </div>
                <div>Target: Identify and document risk areas for Denver operations</div>
                <div class="goal-notes">${ra.notes}</div>
            </div>`;

            c.innerHTML = html;
        }

        // NPS Tracking - HARDCODED DATA (persists across file reloads)
        // Claude updates this array when you report new surveys sent
        let npsSurveyData = [
            // === 02/03/26 - NEW BATCH ===
            {date: '02/03/26', customer: 'Skyport Co', email: 'ryan.himango@skyportco.com', wo: 'DUSFA', regNum: 'N65LR', status: 'Sent', score: null},
            {date: '02/03/26', customer: 'Sierra Nevada Corp', email: 'colton.black@sncorp.com', wo: 'DUMXA', regNum: '', status: 'Sent', score: null},
            {date: '02/03/26', customer: 'Robbins Aviation', email: 'jeff@robbins-aviation.com', wo: 'CU92A', regNum: 'N331MW', status: 'Sent', score: null},
            {date: '02/03/26', customer: 'Alpine Aviation', email: 'lhan@alpine-air.com', wo: 'CVLNA', regNum: 'N197GA', status: 'Sent', score: null},
            {date: '02/03/26', customer: 'E2 Amusements', email: 'chris.c@e2amusements.com', wo: 'CV2GA', regNum: 'N688MP', status: 'Sent', score: null},
            // === 01/30/26 - PREVIOUS BATCH ===
            {date: '01/30/26', customer: 'MHH Inc', email: 'BILL.BENTON@MHHINC.NET', wo: 'DSW4A', regNum: 'N7BD', status: 'Sent', score: null},
            {date: '01/30/26', customer: 'Patrick Lee', email: 'patrick.e.lee@protonmail.com', wo: 'CU16A', regNum: 'N176MG', status: 'Sent', score: null},
            {date: '01/30/26', customer: 'JC Consulting', email: 'JCCONS81@AOL.COM', wo: 'CV5SA', regNum: 'STOCK', status: 'Sent', score: null},
            {date: '01/30/26', customer: 'Metro Aviation', email: 'sshrestha@metroaviation.com', wo: 'DT3DA', regNum: '', status: 'Sent', score: null},
            {date: '01/30/26', customer: 'Solairus', email: 'cdesforges@solairus.aero', wo: 'DUNWA', regNum: 'N814PS', status: 'Sent', score: null},
            // === 01/28/26 - PREVIOUS BATCH ===
            {date: '01/28/26', customer: 'Peregrine', email: 'ths@masd.metrea.aero', wo: 'DTBLA', regNum: '', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'Bode Aviation', email: 'michelle.amezcua@flybode.com', wo: 'DSW5A', regNum: 'N328SF', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'MIMG Transportation', email: 'n950kmmx@gmail.com', wo: 'CV3UA', regNum: 'STOCK', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'Infinity Energia', email: 'EDUARDO@INFINITYENERGIAD.COM.BR', wo: 'CUGZA', regNum: 'PR-BBD', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'Liberty Global', email: 'apdenver@libertyglobal.com', wo: 'CT8VA', regNum: 'N250LG', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'M&N Aviation', email: 'accounting@mandn.aero', wo: 'CT0VA', regNum: 'N488RJ', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'Arapahoe Aero', email: 'customercare@arapahoeaero.com', wo: 'CSAZA', regNum: 'N426LM', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'GMR', email: 'parts-mtc@gmr.net', wo: 'CU44A', regNum: 'N866MB', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'Aspen Flying Club', email: 'accounting@aspenflyingclub.com', wo: 'CS1XA', regNum: 'N331JK', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'Flights Inc', email: 'ABAUER@FLIGHTS-INC.COM', wo: 'CRW3A', regNum: 'N22265', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'Civil Air Patrol', email: 'capconsmx@capnhq.gov', wo: 'CSYNA', regNum: 'N846CP', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'AirMax', email: 'rong@airmaxonline.com', wo: 'CUCJA', regNum: 'N137ZM', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'International Jet Aviation', email: 'heike@internationaljet.com', wo: 'CUX4A', regNum: 'N219JG', status: 'Sent', score: null},
            {date: '01/28/26', customer: 'Pilot Service Provider', email: 'scott.j@pilotserviceprovider.com', wo: 'CQCAB', regNum: 'N750JE', status: 'Sent', score: null}
        ];
        
        function getNpsSurveys() {
            return npsSurveyData;
        }
        
        function saveNpsSurveys(surveys) {
            npsSurveyData = surveys;
            // Note: Changes during session are temporary. Tell Claude to add permanent entries.
        }
        
        // Skipped WOs management
        let skippedWOs = [];
        
        function getSkippedWOs() {
            return skippedWOs;
        }
        
        function skipWO(wo, name) {
            if (!skippedWOs.includes(wo.toUpperCase())) {
                skippedWOs.push(wo.toUpperCase());
                renderCustomerTable();
                // Show brief confirmation
                const btn = event.target;
                btn.textContent = '‚úì Skipped';
                btn.style.background = '#475569';
                setTimeout(() => renderCustomerTable(), 500);
            }
        }
        
        function undoSkip(wo) {
            skippedWOs = skippedWOs.filter(w => w !== wo.toUpperCase());
            renderCustomerTable();
        }
        
        // Smart Fill function for NPS form
        function fillNps(name, email, wo, reg) {
            document.getElementById('npsCustomerName').value = name;
            document.getElementById('npsCustomerEmail').value = email;
            document.getElementById('npsWO').value = wo;
            document.getElementById('npsRegNumber').value = reg || '';
            // Scroll to form
            document.getElementById('npsCustomerName').scrollIntoView({behavior: 'smooth', block: 'center'});
        }
        
        function updateNpsStats() {
            const surveys = getNpsSurveys();
            const sent = surveys.length;
            const completed = surveys.filter(s => s.status === 'Completed').length;
            const pending = surveys.filter(s => s.status === 'Sent').length;
            const rate = sent > 0 ? Math.round((completed / sent) * 100) + '%' : '-';
            const billedWOs = customerDatabase.length;
            const currentMonth = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][new Date().getMonth()];
            
            // Update Overview tab NPS stats
            document.getElementById('statSent').textContent = sent + '/' + billedWOs;
            document.getElementById('statCompleted').textContent = completed;
            document.getElementById('statPending').textContent = pending;
            document.getElementById('statRate').textContent = rate;
            
            // Update Overview tab badge
            const badge = document.getElementById('npsBadge');
            if (completed >= 1) {
                badge.textContent = `${currentMonth}: ${completed}/1 ‚úÖ`;
                badge.style.background = '#10b981';
            } else if (sent > 0) {
                badge.textContent = `${currentMonth}: ${completed}/1 ‚è≥`;
                badge.style.background = '#f59e0b';
            } else {
                badge.textContent = `${currentMonth}: 0/1 ‚ö†Ô∏è`;
                badge.style.background = '#ef4444';
            }
            
            // Re-render goals tab to stay in sync
            renderGoals();
        }
        
        function renderNpsTable() {
            const surveys = getNpsSurveys();
            const tbody = document.getElementById('npsTrackingBody');
            
            if (surveys.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="color:#64748b;text-align:center;">No surveys logged yet</td></tr>';
                return;
            }
            
            tbody.innerHTML = surveys.map((s, idx) => `
                <tr style="background:${s.status === 'Completed' ? 'rgba(16,185,129,0.2)' : s.status === 'No Response' ? 'rgba(239,68,68,0.2)' : 'rgba(251,191,36,0.2)'}">
                    <td>${s.date}</td>
                    <td>${s.customer}</td>
                    <td>${s.wo || '-'}</td>
                    <td><span style="color:${s.status === 'Completed' ? '#10b981' : s.status === 'No Response' ? '#ef4444' : '#f59e0b'}">${s.status}</span></td>
                    <td>${s.score || '-'}</td>
                    <td>
                        ${s.status === 'Sent' ? `
                            <button onclick="completeNpsSurvey(${idx})" style="background:#10b981;color:white;border:none;padding:2px 6px;border-radius:3px;font-size:0.75em;cursor:pointer;margin-right:3px;">‚úì</button>
                            <button onclick="noResponseNpsSurvey(${idx})" style="background:#ef4444;color:white;border:none;padding:2px 6px;border-radius:3px;font-size:0.75em;cursor:pointer;">‚úó</button>
                        ` : ''}
                    </td>
                </tr>
            `).join('');
            
            updateNpsStats();
        }
        
        function logNpsSurvey(openOutlook = false) {
            const customerName = document.getElementById('npsCustomerName').value.trim();
            const email = document.getElementById('npsCustomerEmail').value.trim();
            const wo = document.getElementById('npsWO').value.trim().toUpperCase();
            const regNum = document.getElementById('npsRegNumber').value.trim().toUpperCase();
            const errorDiv = document.getElementById('npsError');
            const successDiv = document.getElementById('npsSuccess');
            
            // Validate - customer name, email, and WO are required
            if (!customerName || !email || !wo) {
                errorDiv.textContent = '‚ö†Ô∏è Please enter customer name, email, and WO#';
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
                return false;
            }
            errorDiv.style.display = 'none';
            
            // Log to storage
            const surveys = getNpsSurveys();
            const today = new Date();
            const dateStr = `${String(today.getMonth()+1).padStart(2,'0')}/${String(today.getDate()).padStart(2,'0')}/${String(today.getFullYear()).slice(-2)}`;
            
            surveys.push({
                date: dateStr,
                customer: customerName,
                email: email,
                wo: wo,
                regNum: regNum,
                status: 'Sent',
                score: null
            });
            
            saveNpsSurveys(surveys);
            renderNpsTable();
            renderCustomerTable();
            
            // Show success
            successDiv.style.display = 'block';
            setTimeout(() => successDiv.style.display = 'none', 2000);
            
            // Clear form
            document.getElementById('npsCustomerName').value = '';
            document.getElementById('npsCustomerEmail').value = '';
            document.getElementById('npsWO').value = '';
            document.getElementById('npsRegNumber').value = '';
            
            // Open Outlook if requested
            if (openOutlook) {
                let subject, body;
                const surveyUrl = 'https://form.jotform.com/231574976012155';
                
                if (regNum) {
                    subject = `Quick Feedback Request - ${regNum} Service`;
                    body = `Hi,

Thank you for choosing Duncan Aviation Denver for your recent service on ${regNum}.

Help us make improvements to our service by filling out a quick 8 questions survey for the Denver Satellite Shop. Please leave feedback by clicking on the link below. Include your phone number in the comments to be added to the monthly prize raffle.

Best Regards,

${surveyUrl}`;
                } else {
                    subject = `Quick Feedback Request - WO# ${wo}`;
                    body = `Hi,

Thank you for choosing Duncan Aviation Denver for your recent service.

Help us make improvements to our service by filling out a quick 8 questions survey for the Denver Satellite Shop. Please leave feedback by clicking on the link below. Include your phone number in the comments to be added to the monthly prize raffle.

Best Regards,

${surveyUrl}`;
                }
                const outlookUrl = `https://outlook.office365.com/mail/deeplink/compose?to=${email}&subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                window.open(outlookUrl, '_blank');
            }
            
            return true;
        }
        
        window.completeNpsSurvey = function(idx) {
            const score = prompt('Enter NPS Score (0-10):');
            if (score === null) return;
            const scoreNum = parseInt(score);
            if (isNaN(scoreNum) || scoreNum < 0 || scoreNum > 10) {
                alert('Please enter a valid score between 0 and 10');
                return;
            }
            const surveys = getNpsSurveys();
            surveys[idx].status = 'Completed';
            surveys[idx].score = scoreNum;
            saveNpsSurveys(surveys);
            renderNpsTable();
        };
        
        window.noResponseNpsSurvey = function(idx) {
            if (!confirm('Mark as No Response?')) return;
            const surveys = getNpsSurveys();
            surveys[idx].status = 'No Response';
            saveNpsSurveys(surveys);
            renderNpsTable();
        };
        
        // Send & Log button
        const sendBtn = document.getElementById('sendNpsSurveyBtn');
        if (sendBtn) {
            sendBtn.onclick = function(e) {
                e.stopPropagation();
                logNpsSurvey(true); // true = open Outlook
            };
        }
        
        // Log Only button
        const logOnlyBtn = document.getElementById('logOnlyBtn');
        if (logOnlyBtn) {
            logOnlyBtn.onclick = function(e) {
                e.stopPropagation();
                logNpsSurvey(false); // false = don't open Outlook
            };
        }
        
        // Clear last entry button
        const clearLastBtn = document.getElementById('clearLastNps');
        if (clearLastBtn) {
            clearLastBtn.onclick = function(e) {
                e.stopPropagation();
                const surveys = getNpsSurveys();
                if (surveys.length === 0) {
                    alert('No entries to remove');
                    return;
                }
                const lastEntry = surveys[surveys.length - 1];
                if (confirm(`Remove last entry?\n\n${lastEntry.date} - ${lastEntry.customer} (${lastEntry.wo})`)) {
                    surveys.pop();
                    saveNpsSurveys(surveys);
                    renderNpsTable();
                    renderCustomerTable();
                    updateNpsStats();
                }
            };
        }
        
        // Customer Database - AUTO-SYNCED from Billed WO Report 01/30/26 1:47PM + Customer Emails
        // 51 Total Billed WOs | Updated 02/03/26
        // WOs with empty email need lookup in AS400/customer records
        const customerDatabase = [
            // === BILLED 01/30/26 (NEW) ===
            {name: 'Robbins Aviation', email: 'jeff@robbins-aviation.com', wo: 'CU92A', reg: 'N331MW', shop: 'SDN', revenue: 2530, dateBilled: '01/30/26', custNum: 153606},
            // === BILLED 01/30/26 ===
            {name: 'Alpine Aviation', email: 'lhan@alpine-air.com', wo: 'CVLNA', reg: 'N197GA', shop: 'SDN', revenue: 1770, dateBilled: '01/30/26', custNum: 101328},
            {name: 'Sunset Aviation LLC', email: 'bfranklin@solairus.aero', wo: 'CVJ0A', reg: 'STOCK', shop: 'SHC', revenue: 785, dateBilled: '01/30/26', custNum: 158993},
            {name: 'Jet Group BA', email: 'paul@jetgroupba.com', wo: 'CP5EA', reg: 'N365CJ', shop: 'SFI', revenue: 780, dateBilled: '01/30/26', custNum: 116393},
            // === HIGH REVENUE (>$5K) - PRIORITY ===
            {name: 'MHH Inc', email: 'BILL.BENTON@MHHINC.NET', wo: 'DSW4A', reg: 'N7BD', shop: 'SDN', revenue: 65835, dateBilled: '01/26/26', custNum: 157998},
            {name: 'Skyport Co', email: 'ryan.himango@skyportco.com', wo: 'DUSFA', reg: 'N65LR', shop: 'SDN', revenue: 42398, dateBilled: '01/29/26', custNum: 153916},
            {name: 'Bode Aviation', email: 'michelle.amezcua@flybode.com', wo: 'DSW5A', reg: 'N328SF', shop: 'SDN', revenue: 34270, dateBilled: '01/08/26', custNum: 125945},
            {name: 'Sierra Nevada Corp', email: 'colton.black@sncorp.com', wo: 'DUMXA', reg: '', shop: 'SDN', revenue: 13300, dateBilled: '01/14/26', custNum: 132595},
            {name: 'MIMG Transportation', email: 'n950kmmx@gmail.com', wo: 'CV3UA', reg: 'STOCK', shop: 'SHC', revenue: 9296, dateBilled: '01/23/26', custNum: 155665},
            {name: 'International Jet Aviation', email: 'heike@internationaljet.com', wo: 'CP69B', reg: 'N817EM', shop: 'SDN', revenue: 8300, dateBilled: '01/29/26', custNum: 109004},
            {name: 'Peregrine', email: 'ths@masd.metrea.aero', wo: 'DTBLA', reg: '', shop: 'SDV', revenue: 6856, dateBilled: '01/26/26', custNum: 144668},
            {name: 'Infinity Energia', email: 'EDUARDO@INFINITYENERGIAD.COM.BR', wo: 'CUGZA', reg: 'PR-BBD', shop: 'SDN', revenue: 5444, dateBilled: '01/15/26', custNum: 157238},
            {name: 'Patrick Lee', email: 'patrick.e.lee@protonmail.com', wo: 'CU16A', reg: 'N176MG', shop: 'SDN', revenue: 5190, dateBilled: '01/28/26', custNum: 154588},
            // === MEDIUM REVENUE ($1K-$5K) ===
            {name: 'Liberty Global', email: 'creynolds@libertyglobal.com', wo: 'CT8VA', reg: 'N250LG', shop: 'SDN', revenue: 4445, dateBilled: '01/23/26', custNum: 117171},
            {name: 'MIMG Transportation', email: 'n950kmmx@gmail.com', wo: 'CU56A', reg: 'N950KM', shop: 'SDN', revenue: 3620, dateBilled: '01/23/26', custNum: 155665},
            {name: 'Patrick Lee', email: 'patrick.e.lee@protonmail.com', wo: 'CUS4A', reg: 'N176MG', shop: 'SDV', revenue: 3470, dateBilled: '01/27/26', custNum: 154588},
            {name: 'Sierra Nevada Corp', email: 'colton.black@sncorp.com', wo: 'DT56A', reg: 'STOCK', shop: 'SDN', revenue: 2574, dateBilled: '01/15/26', custNum: 132595},
            {name: 'M&N Aviation', email: 'tom@mandn.aero', wo: 'CT0VA', reg: 'N488RJ', shop: 'SDN', revenue: 2475, dateBilled: '01/05/26', custNum: 129186},
            {name: 'Arapahoe Aero', email: 'customercare@arapahoeaero.com', wo: 'CSAZA', reg: 'N426LM', shop: 'SDR', revenue: 2118, dateBilled: '01/14/26', custNum: 151065},
            {name: 'GMR', email: 'mihir.mirajkar@gmr.net', wo: 'CU44A', reg: 'N866MB', shop: 'SDR', revenue: 1942, dateBilled: '01/14/26', custNum: 113966},
            {name: 'M&N Aviation', email: 'tom@mandn.aero', wo: 'CTVWA', reg: 'N488RJ', shop: 'SDN', revenue: 1900, dateBilled: '01/05/26', custNum: 129186},
            {name: 'JC Consulting', email: 'JCCONS81@AOL.COM', wo: 'CV5SA', reg: 'STOCK', shop: 'SHC', revenue: 1831, dateBilled: '01/23/26', custNum: 137587},
            {name: 'Sierra Nevada Corp', email: 'colton.black@sncorp.com', wo: 'DT99A', reg: '', shop: 'SDN', revenue: 1750, dateBilled: '01/14/26', custNum: 132595},
            {name: 'Sierra Nevada Corp', email: 'colton.black@sncorp.com', wo: 'DT13A', reg: '', shop: 'SDN', revenue: 1750, dateBilled: '01/14/26', custNum: 132595},
            {name: 'Aspen Flying Club', email: 'accounting@aspenflyingclub.com', wo: 'CS1XA', reg: 'N331JK', shop: 'SDR', revenue: 1632, dateBilled: '01/05/26', custNum: 139695},
            {name: 'Flights Inc', email: 'ABAUER@FLIGHTS-INC.COM', wo: 'CRW3A', reg: 'N22265', shop: 'SDR', revenue: 1632, dateBilled: '01/05/26', custNum: 142768},
            {name: 'Bode Aviation', email: 'michelle.amezcua@flybode.com', wo: 'CUKYA', reg: 'N327SF', shop: 'SDN', revenue: 1569, dateBilled: '01/15/26', custNum: 125945},
            {name: 'Arapahoe Aero', email: 'customercare@arapahoeaero.com', wo: 'CUECA', reg: 'N862JM', shop: 'SDR', revenue: 1392, dateBilled: '01/14/26', custNum: 151065},
            {name: 'Arapahoe Aero', email: 'customercare@arapahoeaero.com', wo: 'CUCPA', reg: 'N944AL', shop: 'SDR', revenue: 1392, dateBilled: '01/14/26', custNum: 151065},
            {name: 'Civil Air Patrol', email: 'capconsmx@capnhq.gov', wo: 'CSYNA', reg: 'N846CP', shop: 'SDR', revenue: 1267, dateBilled: '01/08/26', custNum: 137367},
            {name: 'Civil Air Patrol', email: 'capconsmx@capnhq.gov', wo: 'CSYQA', reg: 'N948CA', shop: 'SDR', revenue: 1267, dateBilled: '01/08/26', custNum: 137367},
            {name: 'E2 Amusements', email: 'chris.c@e2amusements.com', wo: 'CV2GA', reg: 'N688MP', shop: 'SDN', revenue: 1234, dateBilled: '01/28/26', custNum: 154793},
            {name: 'Civil Air Patrol', email: 'capconsmx@capnhq.gov', wo: 'CSYLA', reg: 'N243CP', shop: 'SDR', revenue: 1056, dateBilled: '01/21/26', custNum: 137367},
            // === LOWER REVENUE (<$1K) ===
            {name: 'Bode Aviation', email: 'michelle.amezcua@flybode.com', wo: 'CTYTA', reg: 'N327SF', shop: 'SDN', revenue: 950, dateBilled: '01/09/26', custNum: 125945},
            {name: 'M&N Aviation', email: 'tom@mandn.aero', wo: 'CU1CA', reg: 'N488RJ', shop: 'SDN', revenue: 950, dateBilled: '01/08/26', custNum: 129186},
            {name: 'AirMax', email: 'rong@airmaxonline.com', wo: 'CUCJA', reg: 'N137ZM', shop: 'SDN', revenue: 784, dateBilled: '01/15/26', custNum: 127007},
            {name: 'Aspen Flying Club', email: 'accounting@aspenflyingclub.com', wo: 'CV98A', reg: 'N621TK', shop: 'SDR', revenue: 739, dateBilled: '01/22/26', custNum: 139695},
            {name: 'Aspen Flying Club', email: 'accounting@aspenflyingclub.com', wo: 'CV8ZA', reg: 'N526LK', shop: 'SDR', revenue: 739, dateBilled: '01/23/26', custNum: 139695},
            {name: 'Metro Aviation', email: 'sshrestha@metroaviation.com', wo: 'DT3DA', reg: '', shop: 'SDV', revenue: 712, dateBilled: '01/27/26', custNum: 106755},
            {name: 'International Jet Aviation', email: 'heike@internationaljet.com', wo: 'CUX4A', reg: 'N219JG', shop: 'SDN', revenue: 706, dateBilled: '01/19/26', custNum: 109004},
            {name: 'Aspen Flying Club', email: 'accounting@aspenflyingclub.com', wo: 'CUNPA', reg: 'N683SP', shop: 'SDR', revenue: 633, dateBilled: '01/14/26', custNum: 139695},
            {name: 'Aspen Flying Club', email: 'accounting@aspenflyingclub.com', wo: 'CUSQA', reg: 'N971GV', shop: 'SDR', revenue: 633, dateBilled: '01/19/26', custNum: 139695},
            {name: 'Aspen Flying Club', email: 'accounting@aspenflyingclub.com', wo: 'CVCHA', reg: 'N810AM', shop: 'SDR', revenue: 422, dateBilled: '01/26/26', custNum: 139695},
            {name: 'Flights Inc', email: 'ABAUER@FLIGHTS-INC.COM', wo: 'CUSDA', reg: 'N7701A', shop: 'SDR', revenue: 669, dateBilled: '01/30/26', custNum: 142768},
            {name: 'Civil Air Patrol', email: 'capconsmx@capnhq.gov', wo: 'DV5KA', reg: 'N765CP', shop: 'SDR', revenue: 422, dateBilled: '01/22/26', custNum: 137367},
            {name: 'Solairus', email: 'cdesforges@solairus.aero', wo: 'DUNWA', reg: 'N814PS', shop: 'SDN', revenue: 420, dateBilled: '01/15/26', custNum: 154444},
            // === ZERO REVENUE (T&M / warranty) ===
            {name: 'Pilot Service Provider', email: 'scott.j@pilotserviceprovider.com', wo: 'CQD8B', reg: 'N9630P', shop: 'SDV', revenue: 0, dateBilled: '01/13/26', custNum: 135888},
            {name: 'Pilot Service Provider', email: 'scott.j@pilotserviceprovider.com', wo: 'CQCAB', reg: 'N750JE', shop: 'SDV', revenue: 0, dateBilled: '01/09/26', custNum: 135888},
            {name: 'International Jet Aviation', email: 'heike@internationaljet.com', wo: 'DN1KA', reg: 'N303JJ', shop: 'SDN', revenue: 0, dateBilled: '01/22/26', custNum: 109004},
            {name: 'M&N Aviation', email: 'tom@mandn.aero', wo: 'CV9LA', reg: 'N818LX', shop: 'SDN', revenue: 0, dateBilled: '01/22/26', custNum: 129186},
            {name: 'International Jet Aviation', email: 'heike@internationaljet.com', wo: 'DTEJA', reg: 'N95MJ', shop: 'SDN', revenue: 0, dateBilled: '01/09/26', custNum: 109004}
        ];
        
        function renderCustomerTable() {
            const surveys = getNpsSurveys();
            const sentWOs = surveys.map(s => s.wo.toUpperCase());
            const skipped = getSkippedWOs();
            const showSent = document.getElementById('showSentCustomers').checked;
            const tbody = document.getElementById('customerDbBody');
            const summaryDiv = document.getElementById('npsDbSummary');
            
            // Track which customers already have a survey this month (by email or custNum)
            const customerSurveyed = new Set();
            const customerShown = new Set();
            
            // Add sent customers to surveyed set
            surveys.forEach(s => {
                const cust = customerDatabase.find(c => c.wo.toUpperCase() === s.wo.toUpperCase());
                if (cust) {
                    customerSurveyed.add(cust.email || cust.custNum.toString());
                }
            });
            
            // Categorize and sort customers
            let readyList = [];
            let lookupList = [];
            let sentList = [];
            let skippedList = [];
            let waivedList = [];
            
            // Sort by revenue descending first to prioritize highest value WO per customer
            const sortedDb = [...customerDatabase].sort((a, b) => b.revenue - a.revenue);
            
            sortedDb.forEach(c => {
                const isSent = sentWOs.includes(c.wo.toUpperCase());
                const isSkipped = skipped.includes(c.wo.toUpperCase());
                const needsEmail = !c.email || c.name === 'NEED LOOKUP';
                const customerKey = c.email || c.custNum.toString();
                
                // Check if this customer already surveyed this month
                const alreadySurveyed = customerSurveyed.has(customerKey);
                // Check if this customer already shown (duplicate WO for same customer)
                const isDuplicate = customerShown.has(customerKey);
                
                if (isSent) {
                    sentList.push({...c, status: 'sent'});
                    customerSurveyed.add(customerKey);
                    customerShown.add(customerKey);
                } else if (alreadySurveyed || isDuplicate) {
                    // This customer already surveyed OR has a higher-revenue WO - waive this one
                    waivedList.push({...c, status: 'waived', reason: alreadySurveyed ? 'Already surveyed' : 'Duplicate'});
                    customerShown.add(customerKey);
                } else if (isSkipped) {
                    skippedList.push({...c, status: 'skipped'});
                    customerShown.add(customerKey);
                } else if (needsEmail) {
                    lookupList.push({...c, status: 'lookup'});
                    customerShown.add(customerKey);
                } else {
                    readyList.push({...c, status: 'ready'});
                    customerShown.add(customerKey);
                }
            });
            
            // Combine in priority order: Ready > Lookup > Waived > Skipped > Sent
            const orderedList = [...readyList, ...lookupList, ...waivedList, ...skippedList, ...sentList];
            
            let html = '';
            let readyCount = readyList.length;
            let lookupCount = lookupList.length;
            let waivedCount = waivedList.length;
            let skippedCount = skippedList.length;
            let sentCount = sentList.length;
            
            orderedList.forEach(c => {
                // Skip sent/skipped/waived if checkbox unchecked
                if (!showSent && (c.status === 'sent' || c.status === 'skipped' || c.status === 'waived')) return;
                
                // Row styling based on status
                let rowStyle = '';
                if (c.status === 'sent') {
                    rowStyle = 'background:rgba(107,114,128,0.3);opacity:0.7;';
                } else if (c.status === 'skipped') {
                    rowStyle = 'background:rgba(100,116,139,0.2);opacity:0.6;';
                } else if (c.status === 'waived') {
                    rowStyle = 'background:rgba(139,92,246,0.15);opacity:0.7;';
                } else if (c.status === 'lookup') {
                    rowStyle = 'background:rgba(239,68,68,0.15);';
                } else if (c.revenue > 5000) {
                    rowStyle = 'background:rgba(16,185,129,0.2);';
                }
                
                const woStyle = (c.status === 'sent' || c.status === 'skipped' || c.status === 'waived') ? 'color:#64748b;' : 'color:#60a5fa;font-weight:bold;';
                const revStyle = c.revenue === 0 ? 'color:#94a3b8;' : 'color:#10b981;';
                const regDisplay = c.reg || '-';
                const revDisplay = '$' + c.revenue.toLocaleString();
                
                // Name/Email display
                let nameDisplay, emailDisplay;
                if (c.status === 'lookup') {
                    nameDisplay = `<span style="color:#f87171;">‚ö†Ô∏è Cust# ${c.custNum}</span>`;
                    emailDisplay = `<span style="color:#ef4444;font-size:0.75em;">NEED EMAIL LOOKUP</span>`;
                } else {
                    nameDisplay = c.name;
                    emailDisplay = `<span style="color:#fbbf24;font-family:monospace;font-size:0.8em;">${c.email}</span>`;
                }
                
                // Action button based on status
                let actionCell;
                if (c.status === 'sent') {
                    actionCell = '<span style="color:#10b981;font-size:0.8em;">‚úì Sent</span>';
                } else if (c.status === 'skipped') {
                    actionCell = `<span style="color:#64748b;font-size:0.75em;">‚äò Skipped</span> <button onclick="undoSkip('${c.wo}')" style="background:#475569;color:white;border:none;padding:2px 6px;border-radius:3px;font-size:0.7em;cursor:pointer;margin-left:4px;">Undo</button>`;
                } else if (c.status === 'waived') {
                    actionCell = `<span style="color:#a78bfa;font-size:0.75em;">‚Ü©Ô∏è Waived (dup)</span>`;
                } else if (c.status === 'lookup') {
                    actionCell = `<span style="color:#f87171;font-size:0.75em;">üìã Lookup</span>`;
                } else {
                    const btnStyle = c.revenue > 0 ? 'background:#10b981;' : 'background:#475569;';
                    actionCell = `<button onclick="fillNps('${c.name}','${c.email}','${c.wo}','${c.reg}')" style="${btnStyle}color:white;border:none;padding:4px 10px;border-radius:4px;font-size:0.8em;cursor:pointer;">‚úì Use</button><button onclick="skipWO('${c.wo}','${c.name}')" style="background:#64748b;color:white;border:none;padding:4px 8px;border-radius:4px;font-size:0.75em;cursor:pointer;margin-left:4px;" title="Skip this customer">‚äò</button>`;
                }
                
                html += `<tr style="${rowStyle}">
                    <td>${nameDisplay}</td>
                    <td>${emailDisplay}</td>
                    <td style="${woStyle}">${c.wo}</td>
                    <td style="color:#94a3b8;">${regDisplay}</td>
                    <td style="${revStyle}">${revDisplay}</td>
                    <td>${actionCell}</td>
                </tr>`;
            });
            
            if (html === '') {
                html = '<tr><td colspan="6" style="color:#64748b;text-align:center;">All customers have been surveyed! ‚úÖ</td></tr>';
            }
            
            tbody.innerHTML = html;
            
            // Update summary with detailed breakdown
            if (readyCount === 0 && lookupCount === 0) {
                summaryDiv.innerHTML = '‚úÖ <strong>All ' + sentCount + ' surveys sent!</strong> Waiting for responses.';
                summaryDiv.style.background = '#14532d';
                summaryDiv.style.color = '#bbf7d0';
            } else {
                let summaryText = `üìä <strong style="color:#10b981;">${readyCount} ready</strong>`;
                if (lookupCount > 0) summaryText += ` | <span style="color:#f87171;">${lookupCount} need email</span>`;
                if (waivedCount > 0) summaryText += ` | <span style="color:#a78bfa;">${waivedCount} waived (dup)</span>`;
                if (skippedCount > 0) summaryText += ` | <span style="color:#94a3b8;">${skippedCount} skipped</span>`;
                summaryText += ` | ${sentCount} sent`;
                summaryDiv.innerHTML = summaryText;
                summaryDiv.style.background = '#1e3a5f';
                summaryDiv.style.color = '#93c5fd';
            }
            
            // Update count in header
            document.getElementById('customerDbCount').textContent = customerDatabase.length;
        }
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // WEEKLY GOALS RENDERER ‚Äî Auto-syncs from GOALS_DATA
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderWeeklyGoals() {
            const container = document.getElementById('weeklyGoalsContainer');
            const dateBadge = document.getElementById('weeklyDateBadge');
            if (!container) return;
            const d = GOALS_DATA;
            const latestAB = d.abMonthly[d.abMonthly.length - 1];
            const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            const now = new Date();
            const currentMonth = months[now.getMonth()];
            const prevMonth = months[(now.getMonth() + 11) % 12];

            // Week of date (Monday of current week)
            const dayOfWeek = now.getDay();
            const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;
            const monday = new Date(now);
            monday.setDate(now.getDate() + mondayOffset);
            const weekStr = (monday.getMonth()+1).toString().padStart(2,'0') + '/' + monday.getDate().toString().padStart(2,'0');
            if (dateBadge) dateBadge.textContent = 'Week of ' + weekStr;

            // ‚îÄ‚îÄ A/B Target ‚îÄ‚îÄ
            const currentAB = d.currentMonthAB;
            const hasCurrentData = currentAB !== null && currentAB !== undefined;
            const abBarPct = hasCurrentData ? Math.min(Math.round((currentAB / d.abTarget) * 100), 100) : 0;
            const abStatusBadge = hasCurrentData
                ? (currentAB >= d.abTarget ? '<span class="badge badge-green">On Target ‚úÖ</span>' : '<span class="badge badge-amber">In Progress</span>')
                : '<span class="badge badge-blue">New Month</span>';
            const abSubtext = hasCurrentData
                ? `${currentMonth} MTD: ${currentAB}% | ${prevMonth} closed at ${latestAB.mattOfficial}% (Matt)`
                : `${currentMonth} starts fresh | ${prevMonth} closed at ${latestAB.mattOfficial}% (Matt) / ${latestAB.localCalc}% (Local)`;

            let html = `<div style="background:#1e293b;padding:12px;border-radius:8px;margin-bottom:10px;">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                    <span style="color:#e2e8f0;">üìä A/B Target: Build ${currentMonth} momentum</span>
                    ${abStatusBadge}
                </div>
                <div style="display:flex;align-items:center;gap:10px;">
                    <div class="progress-container" style="flex:1;margin:0;">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width:${abBarPct}%;background:linear-gradient(90deg,#3b82f6,#60a5fa);"></div>
                        </div>
                    </div>
                    <span style="color:#60a5fa;font-weight:bold;min-width:100px;text-align:right;">${hasCurrentData ? currentAB+'%' : '0%'} / ${d.abTarget}%</span>
                </div>
                <div style="color:#94a3b8;font-size:0.8em;margin-top:5px;">${abSubtext}</div>
            </div>`;

            // ‚îÄ‚îÄ Aging WO Closures ‚îÄ‚îÄ
            const agClosed = d.agingClosed.length;
            const agTarget = d.agingTarget;
            const agRemaining = Math.max(agTarget - agClosed, 0);
            const agBadgeClass = agClosed >= agTarget ? 'badge badge-green' : 'badge badge-amber';
            html += `<div style="background:#1e293b;padding:12px;border-radius:8px;margin-bottom:10px;">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                    <span style="color:#e2e8f0;">üìã Close ${agTarget}+ WOs from 90+ day aging list</span>
                    <span class="${agBadgeClass}">${agClosed} / ${agTarget}</span>
                </div>
                <div style="display:flex;gap:5px;flex-wrap:wrap;">
                    ${d.agingClosed.map(a => `<span style="background:#10b981;color:white;padding:2px 8px;border-radius:4px;font-size:0.8em;">‚úÖ ${a.wo}</span>`).join('')}
                    ${agRemaining > 0 ? `<span style="background:#374151;color:#9ca3af;padding:2px 8px;border-radius:4px;font-size:0.8em;">‚¨ú ${agRemaining} more needed</span>` : ''}
                </div>
                ${d.agingNotes ? `<div style="color:#94a3b8;font-size:0.8em;margin-top:5px;">${d.agingNotes}</div>` : ''}
            </div>`;

            // ‚îÄ‚îÄ Rank Improvement ‚îÄ‚îÄ
            const denver = d.rankings.find(r => r.isDenver);
            if (denver) {
                const denverIdx = d.rankings.indexOf(denver);
                // Find neighbors: 2 above, 1 below (or adjust at edges)
                const startIdx = Math.max(0, denverIdx - 2);
                const endIdx = Math.min(d.rankings.length - 1, denverIdx + 1);
                const neighbors = d.rankings.slice(startIdx, endIdx + 1);

                // Find next target to pass
                const above1 = denverIdx > 0 ? d.rankings[denverIdx - 1] : null;
                const above2 = denverIdx > 1 ? d.rankings[denverIdx - 2] : null;
                const below1 = denverIdx < d.rankings.length - 1 ? d.rankings[denverIdx + 1] : null;
                const targetRank = above2 ? above2.rank : (above1 ? above1.rank : denver.rank);
                const rankGoal = `${denver.rank}th ‚Üí ${targetRank}th`;

                // Build status messages
                let statusNotes = [];
                if (below1 && denver.pct > below1.pct) statusNotes.push(`‚úÖ Passed ${below1.shop}!`);
                if (above1) statusNotes.push(`Need +${(above1.pct - denver.pct).toFixed(1)} pts to pass ${above1.shop}`);
                if (above2) statusNotes.push(`+${(above2.pct - denver.pct).toFixed(1)} pts to pass ${above2.shop}`);

                html += `<div style="background:#1e293b;padding:12px;border-radius:8px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                        <span style="color:#e2e8f0;">üèÜ Move up to ${targetRank}th rank (pass ${above1 ? above1.shop : '‚Äî'}${above2 ? ' & ' + above2.shop : ''})</span>
                        <span class="badge badge-amber">${rankGoal}</span>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(${neighbors.length},1fr);gap:8px;font-size:0.85em;">
                        ${neighbors.map(n => {
                            const isDen = n.isDenver;
                            const color = isDen ? '#f59e0b' : (n.pct >= d.networkBudget ? '#10b981' : n.pct >= 40 ? '#f59e0b' : '#ef4444');
                            return `<div style="text-align:center;padding:5px;background:#0f172a;border-radius:4px;${isDen ? 'border:1px solid #f59e0b;' : ''}">
                                <div style="color:${isDen ? '#f59e0b' : '#94a3b8'};">${n.rank}th ${n.shop}${isDen ? ' ‚Üë' : ''}</div>
                                <div style="color:${color};font-weight:bold;">${n.pct}%</div>
                            </div>`;
                        }).join('')}
                    </div>
                    <div style="color:#10b981;font-size:0.8em;margin-top:5px;">${statusNotes.join(' | ')}</div>
                </div>`;
            }

            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // RANKINGS TAB RENDERER ‚Äî Auto-syncs from GOALS_DATA.rankings
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderRankings() {
            const container = document.getElementById('rankingsContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const networkAvg = (d.rankings.reduce((s,r) => s + r.pct, 0) / d.rankings.length).toFixed(1);

            let html = `<div class="card">
                <div class="card-header">
                    <span class="card-title">üèÜ Duncan Aviation Satellite Network - A/B Ratio Rankings</span>
                    <span class="badge badge-blue">${d.rankingsDate} (YTD)</span>
                </div>
                <p style="color:#94a3b8;margin-bottom:15px;font-size:0.9em;">
                    <strong>A/B Ratio</strong> = Actual Billable Hours √∑ Bought (Paid) Hours | Measures labor efficiency
                </p>
                <div style="background:rgba(0,0,0,0.2);padding:10px;border-radius:8px;margin-bottom:15px;">
                    <strong>Network Average:</strong> ${networkAvg}% | <strong>Budget Target:</strong> ${d.networkBudget}%
                </div>`;

            d.rankings.forEach(r => {
                const color = r.pct >= d.networkBudget ? '#10b981' : r.pct >= 40 ? '#f59e0b' : '#ef4444';
                if (r.isDenver) {
                    html += `<div class="rank-item denver"><div class="rank-num" style="background:#f59e0b;color:#fff">${r.rank}</div><div class="rank-shop"><strong>DENVER ‚Üë</strong></div><div class="rank-value" style="color:#f59e0b">${r.pct}%</div></div>`;
                } else {
                    html += `<div class="rank-item"><div class="rank-num">${r.rank}</div><div class="rank-shop">${r.shop}</div><div class="rank-value" style="color:${color}">${r.pct}%</div></div>`;
                }
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // WIP OVERVIEW RENDERER ‚Äî Auto-syncs from GOALS_DATA.wipEntries
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderWipOverview() {
            const container = document.getElementById('wipOverviewContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const entries = [...d.wipEntries].sort((a, b) => b.wip - a.wip);
            const totalHours = entries.reduce((s, e) => s + e.hours, 0);
            const totalWip = entries.reduce((s, e) => s + e.wip, 0);
            const billedCount = entries.filter(e => e.flags.includes('billed')).length;
            const auditCount = entries.filter(e => e.flags.includes('audit')).length;
            const loanedCount = entries.filter(e => e.flags.includes('loaned')).length;
            const openCount = entries.filter(e => !e.flags.includes('billed')).length;
            const openWip = entries.filter(e => !e.flags.includes('billed')).reduce((s, e) => s + e.wip, 0);

            let html = `<div class="card">
                <div class="card-header">
                    <span class="card-title">üìã ${d.wipMonth} WIP - Top WOs by Value</span>
                    <span class="badge badge-green">Open in Anchor (${d.wipDate})</span>
                </div>
                <div style="background:#14532d;padding:8px;border-radius:6px;margin-bottom:10px;font-size:0.8em;color:#bbf7d0;">
                    ü§ñ <strong>Auto-synced:</strong> ${entries.length} WOs | ${openCount} open ($${openWip.toLocaleString()}) | ${billedCount} billed${auditCount > 0 ? ' | ' + auditCount + ' audit ‚ö†Ô∏è' : ''}${loanedCount > 0 ? ' | ' + loanedCount + ' loaned üìç' : ''}
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>WO#</th><th>Shop</th><th>Customer</th><th>Hrs (This Mo)</th><th>Rate</th><th style="color:#10b981">WIP $</th></tr>
                        </thead>
                        <tbody>`;

            entries.forEach(e => {
                const isLoaned = e.flags.includes('loaned');
                const isBilled = e.flags.includes('billed');
                const isAudit = e.flags.includes('audit');
                const rowStyle = isBilled ? 'background:rgba(16,185,129,0.4)' : isLoaned ? 'background:rgba(147,51,234,0.15)' : '';
                const woLabel = e.wo + (isBilled ? ' ‚úÖ' : '') + (isLoaned ? ' üìç' : '');
                const valColor = isLoaned ? '#a855f7' : '#10b981';

                let custLabel = e.customer;
                if (isAudit) custLabel += ' <span style="color:#f59e0b;font-size:0.75em;">‚ö†Ô∏è audit</span>';
                if (isBilled) custLabel += ` <span style="color:#10b981;font-size:0.75em;font-weight:bold;">(BILLED $${e.billed.toLocaleString()})</span>`;
                if (isLoaned && e.loanNote) custLabel += ` <span style="color:#a855f7;font-size:0.75em;">(${e.loanNote})</span>`;

                html += `<tr style="${rowStyle}">
                    <td>${woLabel}</td><td>${e.shop}</td><td>${custLabel}</td>
                    <td>${e.hours}h</td><td${isLoaned ? ' style="color:#a855f7"' : ''}>$${e.rate}</td>
                    <td style="color:${valColor};font-weight:bold">$${e.wip.toLocaleString()}</td></tr>`;
            });

            html += `<tr style="background:rgba(16,185,129,0.2);font-weight:bold;font-size:1.1em;">
                    <td colspan="3">TOP ${entries.length} WIP</td>
                    <td>${totalHours}h</td><td></td>
                    <td style="color:#10b981">$${totalWip.toLocaleString()}</td>
                </tr></tbody></table></div>
                <div style="background:#0f172a;padding:10px;border-radius:6px;margin-top:10px;font-size:0.85em;color:#94a3b8;">
                    üí° <strong>WIP = Current month hours SOLD on open WOs</strong> that may carry to ${d.wipNextMonth}. Previous months' hours already WIP'd ‚Äî not counted again.${d.wipExcluded.length > 0 ? ' Excluded: ' + d.wipExcluded.join(', ') + ' (not in Anchor).' : ''}
                </div>
            </div>`;

            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // WORK STATUS TRACKER RENDERER ‚Äî Auto-syncs from GOALS_DATA
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderWorkStatus() {
            const container = document.getElementById('workStatusContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const c = d.workStatusCounts;

            // Calculate billing totals
            const topWOs = d.billingPriority;
            const topHours = topWOs.reduce((s, e) => s + e.hours, 0);
            const topWip = topWOs.reduce((s, e) => s + Math.round(e.hours * e.rate), 0);
            const totalHours = topHours + (d.billingOverflow ? d.billingOverflow.hours : 0);
            const totalWip = topWip + (d.billingOverflow ? d.billingOverflow.wip : 0);
            const workedOnWip = topWOs.filter(e => e.status === 'ready' || e.status === 'hours_up').reduce((s, e) => s + Math.round(e.hours * e.rate), 0);

            let html = `<div class="card" style="border:2px solid #8b5cf6;">
                <div class="card-header">
                    <span class="card-title">üìä Work Status Tracker - Calendar Correlation</span>
                    <span class="badge badge-purple">Days to Bill</span>
                </div>
                <div style="background:#14532d;padding:10px;border-radius:6px;margin-bottom:15px;font-size:0.85em;color:#bbf7d0;">
                    <strong style="color:#4ade80;">ü§ñ AUTO-CORRELATION:</strong> Anchor WOs √ó Calendar Events (SDN/SDR Service) | Updated: ${d.workStatusDate}
                </div>

                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:15px;">
                    <div style="background:linear-gradient(135deg,#1e40af,#3b82f6);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#93c5fd;">üîß In Progress</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">${c.inProgress}</div>
                        <div style="font-size:0.7em;color:#bfdbfe;">Being worked today</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#065f46,#10b981);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#a7f3d0;">‚úÖ Worked On</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">${c.workedOn}</div>
                        <div style="font-size:0.7em;color:#bbf7d0;">Review for billing</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#854d0e,#f59e0b);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#fef3c7;">üìÖ Scheduled</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">${c.scheduled}</div>
                        <div style="font-size:0.7em;color:#fde68a;">Future work</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#7f1d1d,#ef4444);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#fecaca;">‚ö†Ô∏è Not Scheduled</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">${c.notScheduled}</div>
                        <div style="font-size:0.7em;color:#fca5a5;">Need review</div>
                    </div>
                </div>`;

            // ‚îÄ‚îÄ BILLING PRIORITY TABLE ‚îÄ‚îÄ
            html += `<div style="background:rgba(16,185,129,0.15);border:1px solid #10b981;border-radius:8px;padding:15px;margin-bottom:15px;">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                    <span style="color:#10b981;font-weight:bold;">üí∞ BILLING PRIORITY - Open WOs with Hours (Review for Billing!)</span>
                    <span style="font-size:0.75em;color:#86efac;">üìä Source: Job View ${d.jobViewDate}</span>
                </div>
                <div class="table-container"><table><thead>
                    <tr><th>WO#</th><th>Reg</th><th>Shop</th><th>Aircraft</th><th>Hours</th><th>WIP @$145</th><th>Status</th></tr>
                </thead><tbody>`;

            topWOs.forEach(e => {
                const wip = Math.round(e.hours * e.rate);
                const isSdv = e.status === 'sdv_install';
                const isUp = e.status === 'hours_up';
                const rowStyle = isSdv ? 'background:rgba(139,92,246,0.2)' : '';
                const wipColor = isSdv ? '#a78bfa' : '#10b981';
                const noteColor = isSdv ? '#a78bfa' : isUp ? '#ef4444' : '#f59e0b';
                html += `<tr style="${rowStyle}"><td><strong>${e.wo}</strong></td><td>${e.reg}</td><td>${e.shop}</td><td>${e.aircraft}</td><td>${e.hours}h</td><td style="color:${wipColor};font-weight:bold;">$${wip.toLocaleString()}</td><td style="color:${noteColor};">${e.note}</td></tr>`;
            });

            if (d.billingOverflow && d.billingOverflow.count > 0) {
                html += `<tr style="color:#94a3b8;font-size:0.85em;"><td colspan="4" style="text-align:right;">+ ${d.billingOverflow.count} more WOs with hours...</td><td>${d.billingOverflow.hours}h</td><td>$${d.billingOverflow.wip.toLocaleString()}</td><td></td></tr>`;
            }
            html += `<tr style="background:rgba(16,185,129,0.25);font-weight:bold;">
                <td colspan="4">TOTAL OPEN WIP (${d.billingTotalWOs} WOs)</td>
                <td>${totalHours}h</td><td style="color:#10b981;">$${totalWip.toLocaleString()}</td><td style="color:#10b981;">Potential billing</td>
            </tr></tbody></table></div>`;
            if (d.billingNotes) html += `<div style="margin-top:10px;font-size:0.85em;color:#86efac;">${d.billingNotes}</div>`;
            html += `</div>`;

            // ‚îÄ‚îÄ IN PROGRESS TODAY ‚îÄ‚îÄ
            if (d.inProgressToday.length > 0) {
                html += `<div style="background:rgba(59,130,246,0.15);border:1px solid #3b82f6;border-radius:8px;padding:15px;margin-bottom:15px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                        <span style="color:#3b82f6;font-weight:bold;">üîß IN PROGRESS TODAY (${d.inProgressDate})</span>
                        <span style="font-size:0.75em;color:#60a5fa;">üìÖ Source: SDN/SDR Calendars</span>
                    </div>
                    <div class="table-container"><table><thead>
                        <tr><th>WO#</th><th>Shop</th><th>Customer</th><th>Hours</th><th>Tech</th><th>End Date</th></tr>
                    </thead><tbody>`;
                d.inProgressToday.forEach(e => {
                    html += `<tr><td>${e.wo}</td><td>${e.shop}</td><td>${e.customer}</td><td>${e.hours}h</td><td>${e.tech}</td><td>${e.endDate}</td></tr>`;
                });
                html += `</tbody></table></div></div>`;
            }

            // ‚îÄ‚îÄ NOT SCHEDULED ‚îÄ‚îÄ
            if (d.notScheduledWOs.length > 0) {
                html += `<div style="background:rgba(239,68,68,0.15);border:1px solid #ef4444;border-radius:8px;padding:15px;">
                    <div style="color:#ef4444;font-weight:bold;margin-bottom:10px;">‚ö†Ô∏è NOT SCHEDULED - Top WOs with Hours (Need Calendar Entry)</div>
                    <div class="table-container"><table><thead>
                        <tr><th>WO#</th><th>Shop</th><th>Customer</th><th>Hours</th><th>WIP</th><th>Action Needed</th></tr>
                    </thead><tbody>`;
                d.notScheduledWOs.forEach(e => {
                    const isLoaned = e.flags && e.flags.includes('loaned');
                    const rowStyle = isLoaned ? 'background:rgba(147,51,234,0.15)' : '';
                    const wipColor = isLoaned ? '#a855f7' : (e.wip < 1000 ? '#fbbf24' : 'inherit');
                    const actColor = isLoaned ? '#a855f7' : '#ef4444';
                    html += `<tr style="${rowStyle}"><td>${e.wo}${isLoaned ? ' üìç' : ''}</td><td>${e.shop}</td><td>${e.customer}</td><td>${e.hours}h</td><td style="color:${wipColor};">$${e.wip.toLocaleString()}</td><td style="color:${actColor};font-size:0.8em;">${e.action}</td></tr>`;
                });
                html += `</tbody></table></div>`;
                if (d.notScheduledNote) html += `<div style="margin-top:10px;font-size:0.8em;color:#fca5a5;">üìå ${d.notScheduledNote}</div>`;
                html += `</div>`;
            }

            // ‚îÄ‚îÄ DAYS TO BILL INSIGHT ‚îÄ‚îÄ
            html += `<div style="background:#0f172a;padding:10px;border-radius:6px;margin-top:15px;font-size:0.8em;color:#94a3b8;">
                <strong style="color:#8b5cf6;">üìä DAYS TO BILL INSIGHT:</strong>
                "Worked On" WOs (${c.workedOn}) totaling <strong style="color:#10b981;">$${workedOnWip.toLocaleString()}</strong> may be ready for billing review.
                Calendar dates show work completed but WOs still open in Anchor.<br>
                <span style="color:#64748b;">Data sources: SDN Service Calendar + SDR Service Calendar ‚Üí Anchor Report (${d.workStatusDate})</span>
            </div></div>`;

            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SDV EXPECTED HOURS RENDERER ‚Äî Auto-syncs from GOALS_DATA.sdvWOs
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderSdvExpectedHours() {
            const container = document.getElementById('sdvExpectedHoursContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const wos = d.sdvWOs.filter(w => !w.flags.includes('completed'));
            const rate = d.sdvRate;
            const total = wos.length;
            const withEst = wos.filter(w => w.expectedHrs !== null).length;
            const noEst = total - withEst;
            const pct = total > 0 ? Math.round((withEst / total) * 100) : 0;
            const totalHrs = wos.reduce((s, w) => s + w.actualHrs, 0);
            const totalWip = wos.reduce((s, w) => s + (w.actualHrs * rate), 0);
            const missing = wos.filter(w => w.expectedHrs === null).map(w => w.wo);
            const badgeClass = pct >= 75 ? 'badge badge-green' : pct >= 40 ? 'badge badge-amber' : 'badge badge-amber';
            const badgeIcon = pct >= 75 ? '‚úÖ' : '‚ö†Ô∏è';

            let html = `<div class="card" style="border:2px solid #a855f7;">
                <div class="card-header">
                    <span class="card-title">üìä SDV Expected Hours Tracker (Goal #4)</span>
                    <span class="${badgeClass}">${badgeIcon} ${withEst}/${total} Have Estimates (${pct}%)</span>
                </div>
                <div style="background:#14532d;padding:10px;border-radius:6px;margin-bottom:15px;font-size:0.85em;color:#bbf7d0;">
                    <strong style="color:#4ade80;">ü§ñ DATA SOURCE:</strong> Job View Report | SDV Shop Only | Updated: ${d.sdvLastUpdated}
                </div>
                <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:15px;">
                    <div style="background:linear-gradient(135deg,#581c87,#a855f7);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#e9d5ff;">SDV WOs with Hours</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">${total}</div>
                        <div style="font-size:0.7em;color:#d8b4fe;">Active work</div>
                    </div>
                    <div style="background:linear-gradient(135deg,${noEst > 0 ? '#7f1d1d,#ef4444' : '#065f46,#10b981'});padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:${noEst > 0 ? '#fecaca' : '#a7f3d0'};">${noEst > 0 ? '‚ö†Ô∏è No Estimate' : '‚úÖ All Set'}</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">${noEst}</div>
                        <div style="font-size:0.7em;color:${noEst > 0 ? '#fca5a5' : '#bbf7d0'};">${noEst > 0 ? 'Process gap!' : 'No gaps'}</div>
                    </div>
                    <div style="background:linear-gradient(135deg,#065f46,#10b981);padding:12px;border-radius:8px;text-align:center;">
                        <div style="font-size:0.75em;color:#a7f3d0;">With Estimate</div>
                        <div style="font-size:1.5em;font-weight:bold;color:#fff;">${withEst}</div>
                        <div style="font-size:0.7em;color:#bbf7d0;">Target: 100%</div>
                    </div>
                </div>
                <div style="background:rgba(147,51,234,0.15);border:1px solid #a855f7;border-radius:8px;padding:15px;margin-bottom:15px;">
                    <div style="color:#a855f7;font-weight:bold;margin-bottom:10px;">üìã SDV WOs - Expected Hours Status</div>
                    <div class="table-container"><table><thead>
                        <tr><th>WO#</th><th>Customer</th><th>Actual Hrs</th><th>WIP @ $${rate}</th><th>Exp Hrs</th><th>Status</th></tr>
                    </thead><tbody>`;

            wos.forEach(w => {
                const hasEst = w.expectedHrs !== null;
                const isLoaned = w.flags.includes('loaned');
                const wip = w.actualHrs * rate;
                const rowBg = hasEst ? 'background:rgba(16,185,129,0.15)' : 'background:rgba(239,68,68,0.15)';
                const woLabel = `<strong>${w.wo}</strong>${isLoaned ? ' üìç' : ''}`;

                let expCol, statusCol;
                if (hasEst) {
                    const overUnder = w.actualHrs <= w.expectedHrs ? 'Under estimate!' : 'Over by ' + (w.actualHrs - w.expectedHrs).toFixed(1) + 'h';
                    const statusColor = w.actualHrs <= w.expectedHrs ? '#10b981' : '#ef4444';
                    expCol = `<td style="color:#10b981;">‚úÖ ${w.expectedHrs}h</td>`;
                    statusCol = `<td style="color:${statusColor};font-size:0.8em;">${overUnder}</td>`;
                } else {
                    expCol = `<td style="color:#ef4444;">‚ùå Not Set</td>`;
                    statusCol = `<td style="color:${isLoaned ? '#64748b' : '#ef4444'};font-size:0.8em;">${w.note || 'Add estimate'}</td>`;
                }

                html += `<tr style="${rowBg}">${woLabel ? '<td>' + woLabel + '</td>' : ''}<td>${w.customer}</td>
                    <td>${w.actualHrs}h</td><td style="color:#a855f7;font-weight:bold;">$${wip.toLocaleString()}</td>${expCol}${statusCol}</tr>`;
            });

            html += `<tr style="background:rgba(147,51,234,0.2);font-weight:bold;">
                    <td colspan="2">TOTAL SDV WIP</td><td>${totalHrs}h</td>
                    <td style="color:#a855f7;">$${totalWip.toLocaleString()}</td>
                    <td colspan="2" style="color:${pct >= 75 ? '#10b981' : '#f59e0b'};">${pct}% with estimates</td>
                </tr></tbody></table></div>
                <div style="margin-top:10px;font-size:0.85em;color:#d8b4fe;">
                    üìã <strong>Goal #4 requires expected hours tracking on SDV WOs.</strong> ${pct >= 100 ? 'All WOs have estimates! ‚úÖ' : 'Currently ' + pct + '% compliance ‚Äî need estimates on ' + missing.join(' and ') + '.'}
                </div></div>
                <div style="background:#0f172a;padding:10px;border-radius:6px;font-size:0.8em;color:#94a3b8;">
                    <strong style="color:#a855f7;">üìä SDV TRACKING:</strong>
                    SDV shop tracks Expected vs Actual hours to measure estimate accuracy.
                    ${noEst > 0 ? '<strong style="color:#f59e0b;">Current gap: ' + noEst + '/' + total + ' WOs missing estimates (' + missing.join(', ') + ').</strong>' : '<strong style="color:#10b981;">All WOs have estimates ‚Äî on target! ‚úÖ</strong>'}
                </div>
            </div>`;

            container.innerHTML = html;
        }

        // Initialize all auto-synced sections
        renderGoals();
        renderWeeklyGoals();
        renderRankings();
        renderWipOverview();
        renderSdvExpectedHours();
        renderShopProfitability();
        renderOpenWipTable();
        renderOver30();
        renderNqaReference();
        renderTicker();
        renderReference();
        renderNqa();

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SHOP PROFITABILITY RENDERER ‚Äî Auto-syncs from billedWOsList + shopRates
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderShopProfitability() {
            const container = document.getElementById('shopProfitabilityContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const rates = d.shopRates;
            const wos = d.billedWOsList;

            // Aggregate by shop
            const shops = {};
            wos.forEach(w => {
                if (!shops[w.shop]) shops[w.shop] = {count: 0, hours: 0, laborBilled: 0};
                shops[w.shop].count++;
                shops[w.shop].hours += w.hours;
                shops[w.shop].laborBilled += w.laborBilled;
            });

            // Calculate profitability per WO (using flat rates)
            const woProfit = wos.map(w => {
                const fr = rates[w.shop] ? rates[w.shop].flatRate : 145;
                const expected = w.hours * fr;
                const variance = w.laborBilled - expected;
                const effRate = w.hours > 0 ? Math.round(w.laborBilled / w.hours) : 0;
                return {...w, flatRate: fr, expected, variance, effRate};
            });

            // Shop summary rows
            const shopOrder = ['SDN', 'SDR', 'SHC', 'SDV'];
            let totalCount = 0, totalHours = 0, totalBilled = 0, totalExpected = 0;

            let shopRows = '';
            shopOrder.forEach(s => {
                if (!shops[s]) return;
                const sh = shops[s];
                const fr = rates[s].flatRate;
                const expected = sh.hours * fr;
                const variance = sh.laborBilled - expected;
                const effRate = sh.hours > 0 ? Math.round(sh.laborBilled / sh.hours) : 0;
                const isProfit = variance >= 0;
                const isSlightLoss = !isProfit && Math.abs(variance) < 200;
                const rowBg = isProfit ? 'background:rgba(16,185,129,0.15)' : 'background:rgba(239,68,68,0.1)';
                const varColor = isProfit ? '#10b981' : '#ef4444';
                const effColor = effRate >= fr ? '#10b981' : effRate >= fr * 0.9 ? '#f59e0b' : '#ef4444';
                const badge = isProfit ? '<span class="badge badge-green">üü¢ PROFIT</span>' : isSlightLoss ? '<span class="badge badge-amber">‚ö†Ô∏è SLIGHT LOSS</span>' : '<span class="badge badge-red">üî¥ LOSS</span>';

                shopRows += `<tr style="${rowBg}"><td><strong>${s}</strong></td><td>${sh.count}</td><td>${sh.hours.toFixed(1)}h</td>
                    <td>$${fr}/hr</td><td>$${sh.laborBilled.toLocaleString()}</td><td>$${Math.round(expected).toLocaleString()}</td>
                    <td style="color:${varColor};font-weight:bold;">${isProfit ? '+' : ''}$${Math.round(variance).toLocaleString()}</td>
                    <td style="color:${effColor};">$${effRate}/hr</td><td>${badge}</td></tr>`;

                totalCount += sh.count; totalHours += sh.hours; totalBilled += sh.laborBilled; totalExpected += expected;
            });
            const totalVariance = totalBilled - totalExpected;
            const totalEffRate = totalHours > 0 ? Math.round(totalBilled / totalHours) : 0;
            const totalBadge = totalVariance >= 0 ? '<span class="badge badge-green">‚úÖ NET PROFIT</span>' : '<span class="badge badge-red">üî¥ NET LOSS</span>';

            // Top 5 profitable + losing WOs
            const sorted = [...woProfit].sort((a, b) => b.variance - a.variance);
            const top5 = sorted.filter(w => w.variance > 0).slice(0, 5);
            const losers = sorted.filter(w => w.variance < 0).sort((a, b) => a.variance - b.variance);

            // Key insights auto-generated
            const profitableShops = shopOrder.filter(s => shops[s] && (shops[s].laborBilled - shops[s].hours * rates[s].flatRate) >= 0);
            const losingShops = shopOrder.filter(s => shops[s] && (shops[s].laborBilled - shops[s].hours * rates[s].flatRate) < 0);

            let html = `
                <div style="background:rgba(59,130,246,0.15);border:1px solid #3b82f6;border-radius:8px;padding:15px;margin-bottom:15px;">
                    <div style="color:#3b82f6;font-weight:bold;margin-bottom:10px;">üìä Shop-by-Shop Profitability (Billed WOs) ‚Äî Flat Rate Comparison</div>
                    <div class="table-container"><table><thead>
                        <tr><th>Shop</th><th>Billed WOs</th><th>Hours</th><th>Flat Rate</th><th>Labor Billed</th><th>Expected @FR</th><th>Variance</th><th>Eff Rate</th><th>Status</th></tr>
                    </thead><tbody>
                    ${shopRows}
                    <tr style="background:rgba(16,185,129,0.2);font-weight:bold;">
                        <td>TOTAL</td><td>${totalCount}</td><td>${totalHours.toFixed(1)}h</td><td>‚Äî</td>
                        <td>$${totalBilled.toLocaleString()}</td><td>$${Math.round(totalExpected).toLocaleString()}</td>
                        <td style="color:${totalVariance >= 0 ? '#10b981' : '#ef4444'};">${totalVariance >= 0 ? '+' : ''}$${Math.round(totalVariance).toLocaleString()}</td>
                        <td style="color:${totalVariance >= 0 ? '#10b981' : '#ef4444'};">$${totalEffRate}/hr</td><td>${totalBadge}</td>
                    </tr></tbody></table></div>
                </div>`;

            // Top 5 Profitable
            if (top5.length > 0) {
                html += `<div style="background:rgba(16,185,129,0.15);border:1px solid #10b981;border-radius:8px;padding:15px;margin-bottom:15px;">
                    <div style="color:#10b981;font-weight:bold;margin-bottom:10px;">üèÜ Most Profitable WOs (Top ${top5.length})</div>
                    <div class="table-container"><table><thead>
                        <tr><th>WO#</th><th>Shop</th><th>Hours</th><th>Labor Billed</th><th>Expected @FR</th><th>Profit</th><th>Eff Rate</th></tr>
                    </thead><tbody>`;
                top5.forEach(w => {
                    html += `<tr><td><strong>${w.wo}</strong></td><td>${w.shop}</td><td>${w.hours}h</td>
                        <td>$${w.laborBilled.toLocaleString()}</td><td>$${Math.round(w.expected).toLocaleString()}</td>
                        <td style="color:#10b981;font-weight:bold;">+$${Math.round(w.variance).toLocaleString()}</td><td>$${w.effRate}/hr</td></tr>`;
                });
                html += `</tbody></table></div></div>`;
            }

            // Losing WOs
            if (losers.length > 0) {
                html += `<div style="background:rgba(239,68,68,0.15);border:1px solid #ef4444;border-radius:8px;padding:15px;margin-bottom:15px;">
                    <div style="color:#ef4444;font-weight:bold;margin-bottom:10px;">‚ö†Ô∏è WOs with Losses (Review Pricing)</div>
                    <div class="table-container"><table><thead>
                        <tr><th>WO#</th><th>Shop</th><th>Hours</th><th>Labor Billed</th><th>Expected @FR</th><th>Loss</th><th>Issue</th></tr>
                    </thead><tbody>`;
                losers.forEach(w => {
                    html += `<tr><td><strong>${w.wo}</strong></td><td>${w.shop}</td><td>${w.hours}h</td>
                        <td>$${w.laborBilled.toLocaleString()}</td><td>$${Math.round(w.expected).toLocaleString()}</td>
                        <td style="color:#ef4444;font-weight:bold;">-$${Math.abs(Math.round(w.variance)).toLocaleString()}</td>
                        <td style="font-size:0.8em;">${w.issue || '$' + w.effRate + '/hr rate'}</td></tr>`;
                });
                html += `</tbody></table></div></div>`;
            }

            // Key insights
            html += `<div style="background:#0f172a;padding:15px;border-radius:6px;font-size:0.85em;color:#94a3b8;">
                <strong style="color:#10b981;">üìä KEY INSIGHTS (auto-generated from flat rates):</strong><br>`;
            if (profitableShops.length > 0) html += `‚Ä¢ <strong>${profitableShops.join(' & ')} profitable</strong> ‚Äî billing above their flat rates<br>`;
            losingShops.forEach(s => {
                if (!shops[s]) return;
                const effR = Math.round(shops[s].laborBilled / shops[s].hours);
                const gap = rates[s].flatRate - effR;
                html += `‚Ä¢ <strong>${s} needs attention</strong> ‚Äî effective rate $${effR}/hr vs $${rates[s].flatRate}/hr flat rate (losing $${gap}/hr)<br>`;
            });
            html += `‚Ä¢ <strong>Overall:</strong> ${totalVariance >= 0 ? '$' + Math.round(totalVariance).toLocaleString() + ' profit' : '$' + Math.abs(Math.round(totalVariance)).toLocaleString() + ' loss'} vs flat rate billing<br>
                ‚Ä¢ <span style="color:#60a5fa;">Flat rates: SDN $${rates.SDN.flatRate} | SDR $${rates.SDR.flatRate} | SDV $${rates.SDV.flatRate} | SHC $${rates.SHC.flatRate}</span>
            </div>`;

            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // OPEN WIP TABLE RENDERER ‚Äî Auto-syncs from GOALS_DATA.wipEntries
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderOpenWipTable() {
            const container = document.getElementById('openWipTableContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const entries = [...d.wipEntries].sort((a, b) => b.wip - a.wip);
            const topN = entries.slice(0, 10);
            const topHours = topN.reduce((s, e) => s + e.hours, 0);
            const topWip = topN.reduce((s, e) => s + e.wip, 0);

            let html = `<div class="card">
                <div class="card-header">
                    <span class="card-title">üìÖ Top ${topN.length} Open WOs by WIP</span>
                    <span class="badge badge-blue">$${d.wipTotalValue.toLocaleString()} Total WIP</span>
                </div>
                <div class="table-container"><table><thead>
                    <tr><th>WO#</th><th>Shop</th><th>Customer</th><th>Hrs (This Mo)</th><th>Rate</th><th>WIP</th><th>Notes</th></tr>
                </thead><tbody>`;

            topN.forEach(e => {
                const isLoaned = e.flags.includes('loaned');
                const isBilled = e.flags.includes('billed');
                const rowStyle = isBilled ? 'style="background:rgba(16,185,129,0.4)"' : '';
                const woLabel = `<strong>${e.wo}</strong>${isBilled ? ' ‚úÖ' : ''}${isLoaned ? ' üìç' : ''}`;
                const valColor = isLoaned ? '#a855f7' : '#10b981';
                const noteColor = isBilled ? '#10b981' : (e.notes && (e.notes.includes('Push') || e.notes.includes('Review') || e.notes.includes('Same')) ? '#f59e0b' : (isLoaned ? '#64748b' : ''));
                const noteDisplay = isBilled ? 'BILLED $' + e.billed.toLocaleString() : (e.notes || '');

                html += `<tr ${rowStyle}><td>${woLabel}</td><td>${e.shop}</td><td>${e.customer}</td>
                    <td>${e.hours}h</td><td>$${e.rate}</td>
                    <td style="color:${valColor};font-weight:bold;">$${e.wip.toLocaleString()}</td>
                    <td style="color:${noteColor};font-size:0.8em;">${noteDisplay}</td></tr>`;
            });

            html += `<tr style="background:rgba(16,185,129,0.2);font-weight:bold;">
                    <td colspan="3">TOP ${topN.length} TOTAL</td><td>${topHours.toFixed(1)}h</td><td></td>
                    <td style="color:#10b981;">$${topWip.toLocaleString()}</td><td></td>
                </tr></tbody></table></div>
                <div style="margin-top:10px;font-size:0.8em;color:#94a3b8;">
                    üìã Total open WIP: $${d.wipTotalValue.toLocaleString()} (${d.wipTotalHours}h across all open WOs) | Data: ${d.wipDate}
                </div>
            </div>`;

            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // OVER 30 DAYS RENDERER ‚Äî Auto-syncs from GOALS_DATA.over30Entries
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderOver30() {
            const container = document.getElementById('over30Container');
            if (!container) return;
            const d = GOALS_DATA;
            const entries = d.over30Entries;
            const openCount = entries.filter(e => e.status === 'open' || e.status === 'dispute').length;
            const billedCount = entries.filter(e => e.status === 'billed').length;
            const disputeCount = entries.filter(e => e.status === 'dispute').length;
            const isClear = d.over30Status === 'clear';
            const headerBadge = isClear
                ? '<span class="badge badge-green">‚úÖ CLEAR</span>'
                : `<span class="badge badge-red">‚ö†Ô∏è ${openCount} OPEN</span>`;
            const statusBg = isClear ? 'background:rgba(16,185,129,0.2);border:2px solid #10b981;' : 'background:rgba(239,68,68,0.2);border:2px solid #ef4444;';
            const statusIcon = isClear ? 'üéâ' : '‚ö†Ô∏è';
            const statusColor = isClear ? '#10b981' : '#ef4444';
            const statusMsg = isClear ? 'Denver is in the clear!' : openCount + ' WO(s) over 30 days require attention.';

            let html = `<div class="card">
                <div class="card-header">
                    <span class="card-title">‚ö†Ô∏è Over 30 Days (BZ List)</span>
                    ${headerBadge}
                </div>
                <div style="${statusBg}padding:15px;border-radius:6px;margin-bottom:15px;font-size:0.9em;">
                    ${statusIcon} <strong style="color:${statusColor};">${statusMsg}</strong> ${d.over30StatusNote}
                </div>
                <div class="table-container"><table><thead>
                    <tr><th>WO#</th><th>Shop</th><th>Days</th><th>WIP $</th><th>Status</th><th>Action/Notes</th></tr>
                </thead><tbody>`;

            entries.forEach(e => {
                const rowBg = e.status === 'billed' ? 'background:rgba(16,185,129,0.2)' : e.status === 'dispute' ? 'background:rgba(239,68,68,0.15)' : 'background:rgba(245,158,11,0.15)';
                const badge = e.status === 'billed' ? '<span class="badge badge-green">‚úÖ BILLED</span>'
                    : e.status === 'dispute' ? '<span class="badge badge-red">üî¥ DISPUTE</span>'
                    : '<span class="badge badge-amber">‚ö†Ô∏è OPEN</span>';
                html += `<tr style="${rowBg}"><td>${e.wo}</td><td>${e.shop}</td><td>${e.days}</td>
                    <td>$${e.wip.toLocaleString()}</td><td>${badge}</td><td>${e.notes}</td></tr>`;
            });

            html += `</tbody></table></div>
                <div style="background:#0f172a;padding:10px;border-radius:6px;margin-top:10px;font-size:0.85em;color:#94a3b8;">
                    <strong style="color:#60a5fa;">üìã Data Sources:</strong> Over30 report (Brian) + Billed WO report (auto-detect billed status)<br>
                    <strong style="color:#f59e0b;">‚è∞ 30-Day Rule:</strong> Communicate to BZ within 30 days for any disputes
                </div>
            </div>`;

            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // NQA FLAT RATE ANALYSIS RENDERER ‚Äî Auto-syncs from GOALS_DATA.nqaJobs + tmJobs + billedWOsList
        // Cross-references billedWOsList to flag missing WOs, auto-calculates per-shop margins
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderNqa() {
            const container = document.getElementById('nqaContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const rates = d.shopRates;
            const nqa = d.nqaJobs;
            const tm = d.tmJobs;
            const billed = d.billedWOsList;

            // ‚îÄ‚îÄ Auto-calculate all metrics from data ‚îÄ‚îÄ
            const enriched = nqa.map(j => {
                const fr = rates[j.shop] ? rates[j.shop].flatRate : 218;
                const variance = +(j.actualHrs - j.flatRateHrs).toFixed(1);
                const isWin = variance <= 0;
                const isOver = variance > 0 && variance <= 2;
                const isLoss = variance > 2;
                const marginLoss = variance > 0 ? Math.round(variance * fr) : 0;
                const marginGain = variance < 0 ? Math.round(Math.abs(variance) * fr) : 0;
                return {...j, flatRate: fr, variance, isWin, isOver, isLoss, marginLoss, marginGain};
            });

            const wins = enriched.filter(j => j.isWin);
            const losses = enriched.filter(j => j.isLoss);
            const overs = enriched.filter(j => j.isOver);
            const totalActual = enriched.reduce((s, j) => s + j.actualHrs, 0);
            const totalFlat = enriched.reduce((s, j) => s + j.flatRateHrs, 0);
            const totalVariance = +(totalActual - totalFlat).toFixed(1);
            const totalMarginGain = enriched.reduce((s, j) => s + j.marginGain, 0);
            const totalMarginLoss = enriched.reduce((s, j) => s + j.marginLoss, 0);
            const netMargin = totalMarginGain - totalMarginLoss;
            const isProfitable = totalVariance <= 0;
            const tmTotalHours = tm.reduce((s, j) => s + j.hours, 0);

            // ‚îÄ‚îÄ Cross-reference: billedWOsList vs nqa+tm coverage (service shops only) ‚îÄ‚îÄ
            const serviceWOs = billed.filter(b => ['SDN','SDR','SHC'].includes(b.shop));
            const serviceHours = serviceWOs.reduce((s, w) => s + w.hours, 0);
            const trackedHours = totalActual + tmTotalHours;
            const coveragePct = serviceHours > 0 ? Math.round((trackedHours / serviceHours) * 100) : 100;

            // ‚îÄ‚îÄ Per-shop NQA breakdown ‚îÄ‚îÄ
            const shopBreakdown = {};
            ['SDN','SDR','SHC'].forEach(s => {
                const shopJobs = enriched.filter(j => j.shop === s);
                const shopTm = tm.filter(j => j.shop === s);
                if (shopJobs.length === 0 && shopTm.length === 0) return;
                const shopVar = shopJobs.reduce((sum, j) => sum + j.variance, 0);
                const shopGain = shopJobs.reduce((sum, j) => sum + j.marginGain, 0);
                const shopLoss = shopJobs.reduce((sum, j) => sum + j.marginLoss, 0);
                shopBreakdown[s] = {
                    nqaCount: shopJobs.length,
                    tmCount: shopTm.length,
                    variance: +shopVar.toFixed(1),
                    netMargin: shopGain - shopLoss,
                    flatRate: rates[s] ? rates[s].flatRate : 218,
                };
            });

            // ‚îÄ‚îÄ OVERVIEW CARD ‚îÄ‚îÄ
            let html = `<div class="card">
                <div class="card-header">
                    <span class="card-title">üìã NQA Flat Rate Analysis - Service Shops</span>
                    <span id="nqaBadgeTimestamp" class="badge badge-green">Updated ${d.nqaLastUpdated}</span>
                </div>
                <div style="background:#14532d;padding:8px;border-radius:6px;margin-bottom:10px;font-size:0.8em;color:#bbf7d0;">
                    ü§ñ <strong>Auto-synced:</strong> ${enriched.length} NQA + ${tm.length} T&M = ${enriched.length + tm.length} tracked |
                    Billed WOs (service): ${serviceWOs.length} | Coverage: ${trackedHours.toFixed(1)}h / ${serviceHours.toFixed(1)}h (${coveragePct}%)
                    ${coveragePct < 95 ? ' <span style="color:#fca5a5;">‚ö†Ô∏è Some billed hours not classified</span>' : ' ‚úÖ'}
                </div>
                <div style="color:#94a3b8;font-size:0.9em;margin-bottom:15px;">
                    <strong>NQA (Non-Quoted Agreement)</strong> = Flat rate pricing for standard service jobs. Goal: Track if we're making or losing money on flat rate vs actual hours worked.
                    <span style="color:#f59e0b;">üí∞ NQA Total = Flat Rate Labor + ${Math.round(d.nqaAdminPct*100)}% Admin Fee (max $${d.nqaAdminCap})</span>
                </div>
                <div class="card-grid" style="margin-bottom:20px;">
                    <div class="metric">
                        <div class="metric-value" style="color:${wins.length >= enriched.length/2 ? '#10b981' : '#ef4444'};">${wins.length}/${enriched.length}</div>
                        <div class="metric-label">Win Rate</div>
                        <div class="metric-sub">Jobs at/under flat rate</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:${totalVariance <= 0 ? '#10b981' : '#ef4444'};">${totalVariance > 0 ? '+' : ''}${totalVariance}h</div>
                        <div class="metric-label">Hours Variance</div>
                        <div class="metric-sub">${totalVariance <= 0 ? 'Under flat rate = PROFIT' : 'Over flat rate = LOSS'}</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:${netMargin >= 0 ? '#10b981' : '#ef4444'};">${netMargin >= 0 ? '+' : ''}$${Math.abs(netMargin).toLocaleString()}</div>
                        <div class="metric-label">Labor Margin</div>
                        <div class="metric-sub">@ per-shop flat rates</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" style="color:#f59e0b;">${tm.length}</div>
                        <div class="metric-label">T&M Jobs</div>
                        <div class="metric-sub">No flat rate (billed hourly)</div>
                    </div>
                </div>
                <div style="background:${isProfitable ? 'rgba(16,185,129,0.2);border:2px solid #10b981' : 'rgba(239,68,68,0.2);border:2px solid #ef4444'};border-radius:10px;padding:15px;text-align:center;margin-bottom:20px;">
                    <div style="font-size:1.5em;font-weight:bold;color:${isProfitable ? '#10b981' : '#ef4444'};">${isProfitable ? '‚úÖ NQA PROFITABLE THIS MONTH' : '‚ùå NQA LOSING THIS MONTH'}</div>
                    <div style="color:${isProfitable ? '#a7f3d0' : '#fca5a5'};margin-top:5px;">Net ${totalVariance}h ${isProfitable ? 'under' : 'over'} flat rate = ${isProfitable ? 'Keep NQA system' : 'Review pricing urgently'}</div>
                </div>`;

            // ‚îÄ‚îÄ Per-shop rate cards ‚îÄ‚îÄ
            const shopColors = {SDN: '#3b82f6', SDR: '#f97316', SHC: '#a855f7'};
            html += `<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:20px;">`;
            ['SDN','SDR','SHC'].forEach(s => {
                const sb = shopBreakdown[s] || {nqaCount:0, tmCount:0, variance:0, netMargin:0, flatRate: rates[s].flatRate};
                const varColor = sb.variance <= 0 ? '#10b981' : '#ef4444';
                html += `<div style="background:#1e293b;padding:12px;border-radius:8px;border-left:4px solid ${shopColors[s]};text-align:center;">
                    <div style="color:${shopColors[s]};font-weight:bold;">${s}</div>
                    <div style="color:white;font-size:1.1em;font-weight:bold;">$${sb.flatRate}/hr</div>
                    <div style="font-size:0.8em;color:#94a3b8;">${sb.nqaCount} NQA | ${sb.tmCount} T&M</div>
                    <div style="font-size:0.85em;color:${varColor};font-weight:bold;margin-top:4px;">${sb.variance <= 0 ? '' : '+'}${sb.variance}h | ${sb.netMargin >= 0 ? '+' : ''}$${Math.abs(sb.netMargin).toLocaleString()}</div>
                </div>`;
            });
            html += `</div></div>`;

            // ‚îÄ‚îÄ NQA JOBS TABLE ‚îÄ‚îÄ
            html += `<div class="card">
                <div class="card-header">
                    <span class="card-title">üéØ NQA Flat Rate Jobs (SDN/SDR/SHC)</span>
                    <span class="badge badge-blue">${enriched.length} Jobs</span>
                </div>
                <div class="table-container"><table><thead>
                    <tr><th>WO#</th><th>Reg</th><th>Shop</th><th>Squawk</th><th style="text-align:right;">Actual</th><th style="text-align:right;">Flat Rate</th><th style="text-align:right;">Variance</th><th>Status</th></tr>
                </thead><tbody>`;

            // Sort: losses first (biggest), then overs, then wins (biggest savings first)
            const sorted = [...enriched].sort((a, b) => {
                if (a.isLoss && !b.isLoss) return -1;
                if (!a.isLoss && b.isLoss) return 1;
                if (a.isOver && !b.isOver && !b.isLoss) return -1;
                if (!a.isOver && !a.isLoss && b.isOver) return 1;
                return a.variance - b.variance;
            });

            sorted.forEach(j => {
                const rowBg = j.isLoss ? 'background:rgba(239,68,68,0.15)' : j.isOver ? 'background:rgba(245,158,11,0.1)' : 'background:rgba(16,185,129,0.1)';
                const varColor = j.variance <= 0 ? '#10b981' : j.isOver ? '#f59e0b' : '#ef4444';
                const badge = j.isLoss ? '<span class="badge badge-red">‚ùå LOSS</span>'
                    : j.isOver ? '<span class="badge badge-amber">‚ö†Ô∏è OVER</span>'
                    : '<span class="badge badge-green">‚úÖ WIN</span>';
                const varSign = j.variance > 0 ? '+' : '';
                html += `<tr style="${rowBg}"><td>${j.wo}</td><td>${j.reg}</td><td>${j.shop}</td>
                    <td>${j.squawk}</td><td style="text-align:right;">${j.actualHrs}h</td>
                    <td style="text-align:right;">${j.flatRateHrs}h</td>
                    <td style="text-align:right;color:${varColor};font-weight:bold;">${varSign}${j.variance}h</td>
                    <td>${badge}</td></tr>`;
            });

            html += `<tr style="font-weight:bold;background:rgba(255,255,255,0.1);">
                <td colspan="4">TOTAL NQA</td>
                <td style="text-align:right;">${totalActual.toFixed(1)}h</td>
                <td style="text-align:right;">${totalFlat.toFixed(1)}h</td>
                <td style="text-align:right;color:${totalVariance <= 0 ? '#10b981' : '#ef4444'};">${totalVariance > 0 ? '+' : ''}${totalVariance}h</td>
                <td><span class="badge ${totalVariance <= 0 ? 'badge-green' : 'badge-red'}">${totalVariance <= 0 ? 'NET WIN' : 'NET LOSS'}</span></td>
            </tr></tbody></table></div></div>`;

            // ‚îÄ‚îÄ PROBLEM JOBS (auto-generated from any variance > 0) ‚îÄ‚îÄ
            const problems = enriched.filter(j => j.variance > 0).sort((a, b) => b.variance - a.variance);
            if (problems.length > 0) {
                html += `<div class="card" style="border:2px solid #ef4444;">
                    <div class="card-header">
                        <span class="card-title" style="color:#ef4444;">‚ö†Ô∏è Problem Jobs - Review for NQA Adjustment</span>
                    </div>
                    <div style="color:#fca5a5;font-size:0.9em;margin-bottom:15px;">
                        These jobs exceeded flat rate hours. Consider: adjusting NQA price, switching to T&M, or reviewing tech efficiency.
                    </div>
                    <div style="display:grid;gap:10px;">`;

                problems.forEach(j => {
                    const severity = j.variance > 5 ? '#ef4444' : j.variance > 2 ? '#f59e0b' : '#64748b';
                    const borderColor = j.variance > 5 ? '#ef4444' : '#f59e0b';
                    const bgRgb = j.variance > 5 ? '239,68,68' : '251,191,36';
                    const bgAlpha = j.variance > 5 ? '0.15' : '0.1';
                    const titleColor = j.variance > 5 ? '#fca5a5' : '#fde68a';
                    html += `<div style="background:rgba(${bgRgb},${bgAlpha});padding:15px;border-radius:8px;border-left:4px solid ${borderColor};">
                        <div style="display:flex;justify-content:space-between;align-items:center;">
                            <div>
                                <span style="font-weight:bold;color:${titleColor};">${j.wo} - ${j.squawk.split(' ').slice(0,4).join(' ')} (${j.shop})</span>
                                <div style="color:#94a3b8;font-size:0.85em;">${j.reg} | ${j.squawk}</div>
                            </div>
                            <div style="text-align:right;">
                                <div style="color:${severity};font-weight:bold;font-size:1.2em;">+${j.variance}h over</div>
                                <div style="color:#fca5a5;font-size:0.9em;">~$${j.marginLoss.toLocaleString()} margin loss @ $${j.flatRate}/hr</div>
                            </div>
                        </div>
                        ${j.recommend ? '<div style="margin-top:10px;color:#fde68a;font-size:0.85em;">üí° Recommend: ' + j.recommend + '</div>' :
                            j.variance <= 2 ? '<div style="margin-top:10px;color:#a7f3d0;font-size:0.85em;">‚úì Minor variance - within acceptable range for complex aircraft</div>' : ''}
                    </div>`;
                });
                html += `</div></div>`;
            }

            // ‚îÄ‚îÄ T&M JOBS TABLE ‚îÄ‚îÄ
            html += `<div class="card">
                <div class="card-header">
                    <span class="card-title">üîß T&M Jobs (No NQA Match)</span>
                    <span class="badge badge-gray">${tm.length} Jobs | ${tmTotalHours.toFixed(1)}h</span>
                </div>
                <div style="color:#94a3b8;font-size:0.9em;margin-bottom:15px;">
                    These jobs don't have a matching NQA flat rate - billed at actual hours worked (T&M).
                </div>
                <div class="table-container"><table><thead>
                    <tr><th>WO#</th><th>Reg</th><th>Shop</th><th>Squawk</th><th style="text-align:right;">Hours</th></tr>
                </thead><tbody>`;

            tm.forEach(j => {
                html += `<tr><td>${j.wo}</td><td>${j.reg}</td><td>${j.shop}</td>
                    <td>${j.squawk}</td><td style="text-align:right;">${j.hours}h</td></tr>`;
            });

            html += `<tr style="font-weight:bold;background:rgba(255,255,255,0.1);">
                <td colspan="4">TOTAL T&M</td>
                <td style="text-align:right;">${tmTotalHours.toFixed(1)}h</td>
            </tr></tbody></table></div></div>`;

            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // NQA REFERENCE RENDERER ‚Äî Auto-syncs rates/codes from GOALS_DATA
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderNqaReference() {
            const container = document.getElementById('nqaReferenceContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const rates = d.shopRates;

            // Example calc
            const exHrs = 4;
            const exRate = d.nqaImpliedRate;
            const exLabor = exHrs * exRate;
            const exAdmin = Math.min(exLabor * d.nqaAdminPct, d.nqaAdminCap);
            const exTotal = exLabor + exAdmin;

            let html = `<div class="card">
                <div class="card-header"><span class="card-title">üìù NQA System Reference</span></div>

                <div style="background:rgba(251,191,36,0.15);padding:15px;border-radius:8px;border:1px solid #f59e0b;margin-bottom:15px;">
                    <div style="font-weight:bold;color:#f59e0b;margin-bottom:10px;">üí∞ NQA Pricing Structure</div>
                    <div style="color:#e2e8f0;font-size:0.9em;">
                        <table style="width:100%;font-size:0.95em;">
                            <tr><td>Flat Rate Labor</td><td style="text-align:right;">From Price Items (~$${d.nqaImpliedRate}/hr)</td></tr>
                            <tr><td><strong style="color:#f59e0b;">+ Admin Fee</strong></td><td style="text-align:right;color:#f59e0b;"><strong>${Math.round(d.nqaAdminPct*100)}% of labor (max $${d.nqaAdminCap})</strong></td></tr>
                            <tr style="border-top:1px solid #475569;"><td><strong>= Total to Customer</strong></td><td style="text-align:right;"><strong>NQA Quote Amount</strong></td></tr>
                        </table>
                    </div>
                    <div style="margin-top:10px;font-size:0.85em;color:#fcd34d;">
                        Example: $${exLabor.toLocaleString()} labor + $${exAdmin.toFixed(2)} admin (${Math.round(d.nqaAdminPct*100)}%) = <strong>$${exTotal.toFixed(2)} total NQA</strong>
                    </div>
                </div>

                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:15px;">
                    <div style="background:#1e293b;padding:12px;border-radius:6px;text-align:center;">
                        <div style="color:#3b82f6;font-weight:bold;">SDN</div>
                        <div style="color:white;font-size:1.1em;font-weight:bold;">$${rates.SDN.flatRate}/hr</div>
                        <div style="font-size:0.75em;color:#10b981;">‚úÖ NQA</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:6px;text-align:center;">
                        <div style="color:#f97316;font-weight:bold;">SDR</div>
                        <div style="color:white;font-size:1.1em;font-weight:bold;">$${rates.SDR.flatRate}/hr</div>
                        <div style="font-size:0.75em;color:#10b981;">‚úÖ NQA</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:6px;text-align:center;">
                        <div style="color:#a855f7;font-weight:bold;">SHC</div>
                        <div style="color:white;font-size:1.1em;font-weight:bold;">$${rates.SHC.flatRate}/hr</div>
                        <div style="font-size:0.75em;color:#10b981;">‚úÖ NQA</div>
                    </div>
                    <div style="background:#1e293b;padding:12px;border-radius:6px;text-align:center;border:2px solid #fbbf24;">
                        <div style="color:#fbbf24;font-weight:bold;">SDV</div>
                        <div style="color:#fbbf24;font-size:1.1em;font-weight:bold;">$${rates.SDV.flatRate}/hr</div>
                        <div style="font-size:0.75em;color:#f59e0b;">üö´ Quoted</div>
                    </div>
                </div>

                <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;">
                    <div style="background:rgba(20,184,166,0.15);padding:15px;border-radius:8px;border:1px solid #14b8a6;">
                        <div style="font-weight:bold;color:#14b8a6;margin-bottom:8px;">üìã NQA Applies To:</div>
                        <div style="color:#e2e8f0;font-size:0.9em;">
                            ‚Ä¢ SDN (Service) ‚Ä¢ SDR (Service)<br>
                            ‚Ä¢ SHC (Service/Hardware)<br>
                            ‚Ä¢ Standard troubleshooting jobs<br>
                            ‚Ä¢ Cert inspections (91.411/413)
                        </div>
                    </div>
                    <div style="background:rgba(139,92,246,0.15);padding:15px;border-radius:8px;border:1px solid #8b5cf6;">
                        <div style="font-weight:bold;color:#8b5cf6;margin-bottom:8px;">üö´ NOT NQA (Quote Separately):</div>
                        <div style="color:#e2e8f0;font-size:0.9em;">
                            ‚Ä¢ SDV (Installs) - Standard quotes<br>
                            ‚Ä¢ Complex troubleshooting - T&M<br>
                            ‚Ä¢ Custom/unusual work - T&M<br>
                            ‚Ä¢ Travel time - T&M
                        </div>
                    </div>
                </div>

                <div style="margin-top:15px;background:#0f172a;padding:15px;border-radius:8px;">
                    <div style="color:#94a3b8;font-size:0.9em;">
                        <strong style="color:#14b8a6;">NQA Decision Rule:</strong><br>
                        If monthly variance is consistently <span style="color:#ef4444;">POSITIVE (over flat rate)</span> ‚Üí Adjust NQA prices or switch to T&M<br>
                        If monthly variance is <span style="color:#10b981;">NEGATIVE (under flat rate)</span> ‚Üí NQA system is profitable, keep it
                    </div>
                </div>

                <div style="margin-top:10px;background:#1e1b4b;padding:10px;border-radius:6px;font-size:0.85em;color:#c4b5fd;">
                    <strong>üìä Price Items Master:</strong> ${d.nqaPriceItems} NQA items loaded | Implied rate: ~$${d.nqaImpliedRate}/hr | Source: AS400 Price Item Search
                </div>

                <div style="margin-top:15px;background:rgba(99,102,241,0.15);padding:15px;border-radius:8px;border:1px solid #6366f1;">
                    <div style="font-weight:bold;color:#818cf8;margin-bottom:8px;">üè∑Ô∏è Flat Rate Codes (from Hours per WO)</div>
                    <div style="color:#e2e8f0;font-size:0.85em;display:grid;grid-template-columns:1fr 1fr;gap:5px;">
                        ${d.flatRateCodes.map(c => '<div><strong>' + c.code + '</strong> = ' + c.desc + '</div>').join('')}
                    </div>
                </div>

                <div style="margin-top:15px;background:#14532d;padding:10px;border-radius:6px;font-size:0.8em;color:#bbf7d0;">
                    ü§ñ <strong>Auto-sync workflow:</strong> Billed WO report ‚Üí Match squawks to Price Items ‚Üí NQA jobs (flat rate) vs T&M (hourly) ‚Üí Auto-calculate margins per shop flat rate
                </div>
            </div>`;

            container.innerHTML = html;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // REFERENCE TAB RENDERER ‚Äî Financial Definitions from CFC Training
        // Auto-renders from GOALS_DATA.financialRef + shopRates
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderReference() {
            const container = document.getElementById('referenceContainer');
            if (!container) return;
            const d = GOALS_DATA;
            const ref = d.financialRef;
            const rates = d.shopRates;

            const makeTable = (items, cols) => {
                const hdr = cols.map(c => `<th style="text-align:left;padding:8px 10px;background:#1e293b;color:#94a3b8;font-size:0.8em;text-transform:uppercase;">${c.label}</th>`).join('');
                const rows = items.map(item => {
                    const cells = cols.map(c => {
                        let val = typeof c.fn === 'function' ? c.fn(item) : item[c.key] || '‚Äî';
                        return `<td style="padding:8px 10px;border-bottom:1px solid #1e293b;${c.style||''}">${val}</td>`;
                    }).join('');
                    return `<tr>${cells}</tr>`;
                }).join('');
                return `<table style="width:100%;border-collapse:collapse;font-size:0.88em;">${hdr ? `<thead><tr>${hdr}</tr></thead>` : ''}<tbody>${rows}</tbody></table>`;
            };

            // P&L Definitions
            const pnlTable = makeTable(ref.pnl, [
                {label: 'Term', key: 'term', style: 'font-weight:bold;color:#f1f5f9;white-space:nowrap;width:180px;'},
                {label: 'Also Known As', key: 'aka', style: 'color:#94a3b8;white-space:nowrap;width:140px;'},
                {label: 'Definition', key: 'def', style: 'color:#cbd5e1;'},
            ]);

            // Monthly Financial Metrics
            const metricsTable = makeTable(ref.metrics, [
                {label: 'Metric', key: 'term', style: 'font-weight:bold;color:#f1f5f9;width:220px;'},
                {label: 'Formula', key: 'formula', style: 'color:#60a5fa;font-family:monospace;white-space:nowrap;width:200px;'},
                {label: 'Definition', key: 'def', style: 'color:#cbd5e1;'},
            ]);

            // Hours Definitions
            const hoursTable = makeTable(ref.hours, [
                {label: 'Type', key: 'term', style: 'font-weight:bold;color:#f1f5f9;width:240px;'},
                {label: 'Definition', key: 'def', style: 'color:#cbd5e1;'},
            ]);

            // Labor Rates
            const ratesTable = makeTable(ref.laborRates, [
                {label: 'Rate Type', key: 'term', style: 'font-weight:bold;color:#f1f5f9;width:240px;'},
                {label: 'Definition', key: 'def', style: 'color:#cbd5e1;'},
            ]);

            // Shop Rate Cards (from shopRates)
            const shopCards = Object.entries(rates).map(([code, info]) => {
                const colors = {SDN: '#3b82f6', SDR: '#f97316', SHC: '#a855f7', SDV: '#10b981'};
                const border = colors[code] || '#64748b';
                return `<div style="background:#0f172a;border:2px solid ${border};border-radius:8px;padding:12px;text-align:center;">
                    <div style="font-weight:bold;color:${border};font-size:1.1em;margin-bottom:6px;">${code}</div>
                    <div style="font-size:1.4em;font-weight:bold;color:#f1f5f9;">$${info.flatRate}/hr</div>
                    <div style="color:#94a3b8;font-size:0.8em;margin-top:4px;">${info.type}</div>
                </div>`;
            }).join('');

            // ELR Factors
            const elrList = ref.elrFactors.map(f => `<span style="display:inline-block;background:#1e293b;border:1px solid #334155;border-radius:6px;padding:4px 10px;margin:3px;font-size:0.85em;color:#cbd5e1;">${f}</span>`).join('');

            // Big Picture Example
            const bp = ref.bigPictureExample;

            const sectionStyle = 'background:#0f172a;border:1px solid #1e293b;border-radius:10px;padding:16px;margin-bottom:14px;';
            const headStyle = 'font-size:1.05em;font-weight:bold;color:#f1f5f9;margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid #1e293b;';

            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">üìñ Satellite Financial Reference</span>
                        <span class="badge badge-blue">${ref.source}</span>
                    </div>

                    <div style="${sectionStyle}">
                        <div style="${headStyle}">üìä Profit & Loss Statement (P&L)</div>
                        <p style="color:#94a3b8;font-size:0.82em;margin-bottom:10px;">The P&L shows revenue, costs, and profit for a period. Understanding each line helps make better business and financial decisions.</p>
                        ${pnlTable}
                    </div>

                    <div style="${sectionStyle}">
                        <div style="${headStyle}">üìà Monthly Financial Metrics</div>
                        <p style="color:#94a3b8;font-size:0.82em;margin-bottom:10px;">Key indicators showing the general health of the satellite business. Tracked monthly and reviewed in financial meetings.</p>
                        ${metricsTable}
                    </div>

                    <div style="${sectionStyle}">
                        <div style="${headStyle}">‚è±Ô∏è Understanding Hours</div>
                        <p style="color:#94a3b8;font-size:0.82em;margin-bottom:10px;">Hours are the core unit of satellite operations. The relationship between bought, actual, and non-chargeable hours drives the A/B ratio.</p>
                        ${hoursTable}
                        <div style="margin-top:10px;padding:10px;background:#1e293b;border-radius:6px;">
                            <div style="display:flex;gap:20px;align-items:center;flex-wrap:wrap;">
                                <div style="text-align:center;flex:1;">
                                    <div style="font-size:2em;color:#60a5fa;">78%</div>
                                    <div style="color:#94a3b8;font-size:0.8em;">Actual (Billable)</div>
                                </div>
                                <div style="text-align:center;flex:1;">
                                    <div style="font-size:2em;color:#1e3a5f;">22%</div>
                                    <div style="color:#94a3b8;font-size:0.8em;">Non-Chargeable</div>
                                </div>
                                <div style="color:#64748b;font-size:0.75em;flex:2;">Typical satellite bought hours breakdown ‚Äî 78% sold to customer WOs, 22% allocated to shop squawks (PTB, training, cleanup, etc.)</div>
                            </div>
                        </div>
                    </div>

                    <div style="${sectionStyle}">
                        <div style="${headStyle}">üí≤ Labor Rates</div>
                        ${ratesTable}
                        <div style="margin-top:12px;">
                            <div style="font-weight:bold;color:#f1f5f9;font-size:0.9em;margin-bottom:8px;">Denver 889 Shop Rates (from dashboard):</div>
                            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;">
                                ${shopCards}
                            </div>
                        </div>
                    </div>

                    <div style="${sectionStyle}">
                        <div style="${headStyle}">üéØ ELR: What Factors Influence It?</div>
                        <div style="display:flex;flex-wrap:wrap;gap:4px;">
                            ${elrList}
                        </div>
                    </div>

                    <div style="${sectionStyle}">
                        <div style="${headStyle}">üåê A/B & ELR: The Big Picture (Company-Wide Example)</div>
                        <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:12px;">
                            <div style="text-align:center;background:#1e293b;border-radius:6px;padding:10px;">
                                <div style="color:#94a3b8;font-size:0.75em;">Bought Hrs</div>
                                <div style="font-size:1.1em;font-weight:bold;color:#f1f5f9;">${(bp.boughtHrs/1e6).toFixed(1)}M</div>
                            </div>
                            <div style="text-align:center;background:#1e293b;border-radius:6px;padding:10px;">
                                <div style="color:#94a3b8;font-size:0.75em;">Actual Hrs</div>
                                <div style="font-size:1.1em;font-weight:bold;color:#f1f5f9;">${(bp.actualHrs/1e6).toFixed(2)}M</div>
                            </div>
                            <div style="text-align:center;background:#1e293b;border-radius:6px;padding:10px;">
                                <div style="color:#94a3b8;font-size:0.75em;">A/B</div>
                                <div style="font-size:1.1em;font-weight:bold;color:#60a5fa;">${bp.ab}%</div>
                            </div>
                            <div style="text-align:center;background:#1e293b;border-radius:6px;padding:10px;">
                                <div style="color:#94a3b8;font-size:0.75em;">ELR</div>
                                <div style="font-size:1.1em;font-weight:bold;color:#10b981;">$${bp.elr}</div>
                            </div>
                            <div style="text-align:center;background:#1e293b;border-radius:6px;padding:10px;">
                                <div style="color:#94a3b8;font-size:0.75em;">Labor Sales</div>
                                <div style="font-size:1.1em;font-weight:bold;color:#f1f5f9;">$${(bp.laborSales/1e6).toFixed(1)}M</div>
                            </div>
                        </div>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                            <div style="background:linear-gradient(135deg,#1e3a5f,#1e293b);border-radius:8px;padding:14px;text-align:center;">
                                <div style="font-size:0.85em;color:#93c5fd;">üìà +1% A/B Improvement</div>
                                <div style="font-size:1.6em;font-weight:bold;color:#60a5fa;">30,000 hrs</div>
                                <div style="color:#93c5fd;font-size:0.85em;">= $2,400,000 additional revenue</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#064e3b,#1e293b);border-radius:8px;padding:14px;text-align:center;">
                                <div style="font-size:0.85em;color:#6ee7b7;">üí≤ +$1.00 ELR Improvement</div>
                                <div style="font-size:1.6em;font-weight:bold;color:#10b981;">$2,350,000</div>
                                <div style="color:#6ee7b7;font-size:0.85em;">additional profit for the company</div>
                            </div>
                        </div>
                        <div style="color:#64748b;font-size:0.78em;margin-top:8px;text-align:center;">${bp.note}</div>
                    </div>

                    <div style="${sectionStyle}">
                        <div style="${headStyle}">üí° Key Improvement Levers</div>
                        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;">
                            <div style="background:#1e293b;border-radius:6px;padding:12px;border-left:3px solid #3b82f6;">
                                <div style="font-weight:bold;color:#60a5fa;font-size:0.9em;">Improve A/B</div>
                                <div style="color:#94a3b8;font-size:0.82em;margin-top:4px;">1. Maintain a steady schedule<br>2. Control non-chargeables<br>3. Bill time for prep & travel</div>
                            </div>
                            <div style="background:#1e293b;border-radius:6px;padding:12px;border-left:3px solid #10b981;">
                                <div style="font-weight:bold;color:#34d399;font-size:0.9em;">Improve ELR</div>
                                <div style="color:#94a3b8;font-size:0.82em;margin-top:4px;">1. Meet/exceed flat-rate hours<br>2. Don't suppress WO hours<br>3. Bill appropriate rates</div>
                            </div>
                            <div style="background:#1e293b;border-radius:6px;padding:12px;border-left:3px solid #f97316;">
                                <div style="font-weight:bold;color:#fb923c;font-size:0.9em;">Improve GP</div>
                                <div style="color:#94a3b8;font-size:0.82em;margin-top:4px;">1. Maximize parts margin<br>2. Control COS (direct costs)<br>3. Accurate quoting & estimating</div>
                            </div>
                        </div>
                    </div>
                </div>`;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // TICKER BAR RENDERER ‚Äî Scans ALL GOALS_DATA for urgent actions
        // Auto-generates scrolling items sorted by priority
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderTicker() {
            const bar = document.getElementById('tickerBar');
            if (!bar) return;
            const d = GOALS_DATA;
            const rates = d.shopRates;
            const items = []; // {icon, label, value, cls, priority}  cls: t-urgent | t-warn | t-ok

            // ‚îÄ‚îÄ 1. OVER 30 DAYS ‚Äî open/dispute WOs ‚îÄ‚îÄ
            const o30open = d.over30Entries.filter(e => e.status === 'open');
            const o30dispute = d.over30Entries.filter(e => e.status === 'dispute');
            if (o30open.length > 0) {
                o30open.forEach(e => items.push({icon:'üî¥', label:'OVER 30', value:`${e.wo} (${e.days}d) ‚Äî ${e.notes}`, cls:'t-urgent', priority:1}));
            }
            o30dispute.forEach(e => items.push({icon:'‚ö†Ô∏è', label:'DISPUTE', value:`${e.wo} ${e.days}d ‚Äî ${e.notes}`, cls:'t-warn', priority:2}));

            // ‚îÄ‚îÄ 2. WIP ‚Äî unbilled high-value WOs needing action ‚îÄ‚îÄ
            const wipAction = d.wipEntries.filter(e => !e.flags.includes('billed') && !e.flags.includes('loaned') && e.notes && (e.notes.includes('Push') || e.notes.includes('Review')));
            wipAction.forEach(e => items.push({icon:'üí∞', label:'WIP', value:`${e.wo} $${e.wip.toLocaleString()} ‚Äî ${e.notes}`, cls:'t-warn', priority:3}));

            // ‚îÄ‚îÄ 3. WIP ‚Äî audit-flagged WOs ‚îÄ‚îÄ
            const wipAudit = d.wipEntries.filter(e => e.flags.includes('audit') && !e.flags.includes('billed'));
            if (wipAudit.length > 0) {
                items.push({icon:'üîç', label:'AUDIT', value:`${wipAudit.length} WO(s) cited: ${wipAudit.map(e=>e.wo).join(', ')}`, cls:'t-warn', priority:4});
            }

            // ‚îÄ‚îÄ 4. SDV Expected Hours ‚Äî missing estimates ‚îÄ‚îÄ
            const sdvMissing = d.sdvWOs.filter(w => !w.flags.includes('completed') && (w.expectedHrs === null || w.expectedHrs === 0));
            if (sdvMissing.length > 0) {
                items.push({icon:'üìã', label:'SDV ESTIMATES', value:`${sdvMissing.length} WO(s) missing: ${sdvMissing.map(w=>w.wo).join(', ')}`, cls:'t-warn', priority:5});
            }

            // ‚îÄ‚îÄ 5. NQA Problem Jobs ‚Äî big losses ‚îÄ‚îÄ
            const nqaLosses = d.nqaJobs.filter(j => {
                const v = j.actualHrs - j.flatRateHrs;
                return v > 2;
            }).sort((a,b) => (b.actualHrs-b.flatRateHrs) - (a.actualHrs-a.flatRateHrs));
            nqaLosses.forEach(j => {
                const v = +(j.actualHrs - j.flatRateHrs).toFixed(1);
                const fr = rates[j.shop] ? rates[j.shop].flatRate : 218;
                items.push({icon:'üìâ', label:'NQA LOSS', value:`${j.wo} (${j.shop}) +${v}h over ‚Üí ~$${Math.round(v*fr)} loss`, cls:'t-urgent', priority:6});
            });

            // ‚îÄ‚îÄ 6. Aging WO Goal ‚Äî progress ‚îÄ‚îÄ
            const agClosed = d.agingClosed.length;
            const agTarget = d.agingTarget;
            const agRemain = agTarget - agClosed;
            if (agRemain > 0) {
                items.push({icon:'üìÖ', label:'AGING GOAL', value:`${agClosed}/${agTarget} closed this week ‚Äî ${agRemain} remaining`, cls: agRemain <= 2 ? 't-warn' : 't-urgent', priority:7});
            } else {
                items.push({icon:'‚úÖ', label:'AGING GOAL', value:`${agTarget}/${agTarget} target met!`, cls:'t-ok', priority:20});
            }

            // ‚îÄ‚îÄ 7. Training ‚Äî upcoming/overdue ‚îÄ‚îÄ
            const now = new Date();
            const trainUpcoming = d.training.techSchedule.filter(t => {
                if (t.status === 'completed') return false;
                if (t.status === 'tbd') return false;
                // Check if within 14 days
                const dateStr = t.dates.split(' - ')[0].replace(/(\w+)\s(\d+)/, '$1 $2, 2026');
                const d2 = new Date(dateStr);
                return !isNaN(d2) && d2 > now && (d2 - now) < 14 * 86400000;
            });
            trainUpcoming.forEach(t => {
                items.push({icon:'üéì', label:'TRAINING', value:`${t.name} ‚Äî ${t.course} (${t.dates})`, cls:'t-warn', priority:8});
            });

            // ‚îÄ‚îÄ 8. LMS Pending ‚îÄ‚îÄ
            const lmsPending = d.training.lmsModules.filter(m => m.status === 'pending');
            if (lmsPending.length > 0) {
                items.push({icon:'üìö', label:'LMS', value:`${lmsPending.length} module(s) pending: ${lmsPending.map(m=>m.name).join(', ')}`, cls:'t-warn', priority:9});
            }

            // ‚îÄ‚îÄ 9. Vendor Disputes ‚Äî active ‚îÄ‚îÄ
            const activeDisputes = d.vendorDisputes.filter(v => v.notes && !v.notes.toLowerCase().includes('resolved'));
            if (activeDisputes.length > 0) {
                activeDisputes.forEach(v => items.push({icon:'üè≠', label:'VENDOR', value:`${v.wo} ‚Äî ${v.notes}`, cls:'t-warn', priority:10}));
            }

            // ‚îÄ‚îÄ 10. Audit findings ‚Äî open ‚îÄ‚îÄ
            if (d.audits && d.audits.length > 0) {
                const lastAudit = d.audits[d.audits.length - 1];
                if (lastAudit.findings > 0 && lastAudit.closed < lastAudit.findings) {
                    const open = lastAudit.findings - lastAudit.closed;
                    items.push({icon:'üîé', label:'AUDIT', value:`${open} finding(s) open from ${lastAudit.date} ${lastAudit.type} audit${lastAudit.repeats > 0 ? ' ('+lastAudit.repeats+' REPEAT)' : ''}`, cls:'t-warn', priority:4});
                }
            }

            // ‚îÄ‚îÄ 11. A/B Ranking ‚Äî position awareness ‚îÄ‚îÄ
            const denverRank = d.rankings.find(r => r.isDenver);
            if (denverRank) {
                const pos = d.rankings.filter(r => r.isDenver)[0];
                const rankIdx = d.rankings.indexOf(pos) + 1;
                const total = d.rankings.length;
                const abCls = pos.pct >= d.networkBudget ? 't-ok' : pos.pct >= 40 ? 't-warn' : 't-urgent';
                items.push({icon:'üìä', label:'A/B RANK', value:`#${rankIdx}/${total} (${pos.pct}%) ‚Äî Budget: ${d.networkBudget}%`, cls:abCls, priority:15});
            }

            // ‚îÄ‚îÄ 12. WIP Total ‚îÄ‚îÄ
            const openWip = d.wipEntries.filter(e => !e.flags.includes('billed'));
            const openWipTotal = openWip.reduce((s,e) => s+e.wip, 0);
            items.push({icon:'üíµ', label:'OPEN WIP', value:`$${openWipTotal.toLocaleString()} across ${openWip.length} WOs`, cls: openWipTotal > 20000 ? 't-warn' : 't-ok', priority:16});

            // ‚îÄ‚îÄ 13. Stale data warnings ‚îÄ‚îÄ
            const parseDate = s => { const p = s.split('/'); return new Date(2000 + parseInt(p[2]), parseInt(p[0])-1, parseInt(p[1])); };
            const daysSince = s => { try { return Math.floor((now - parseDate(s)) / 86400000); } catch(e) { return 0; } };

            const wipAge = daysSince(d.wipDate);
            if (wipAge > 3) items.push({icon:'‚è∞', label:'STALE DATA', value:`WIP data is ${wipAge} days old (${d.wipDate})`, cls:'t-urgent', priority:0});
            const rankAge = daysSince(d.rankingsDate);
            if (rankAge > 10) items.push({icon:'‚è∞', label:'STALE DATA', value:`Rankings data is ${rankAge} days old (${d.rankingsDate})`, cls:'t-warn', priority:0});
            const nqaAge = daysSince(d.nqaLastUpdated);
            if (nqaAge > 7) items.push({icon:'‚è∞', label:'STALE DATA', value:`NQA data is ${nqaAge} days old (${d.nqaLastUpdated})`, cls:'t-warn', priority:0});

            // ‚îÄ‚îÄ Sort by priority (lower = more urgent) ‚îÄ‚îÄ
            items.sort((a, b) => a.priority - b.priority);

            // ‚îÄ‚îÄ Determine overall status ‚îÄ‚îÄ
            const hasUrgent = items.some(i => i.cls === 't-urgent');
            const hasWarn = items.some(i => i.cls === 't-warn');
            const labelCls = hasUrgent ? '' : hasWarn ? '' : 'ticker-label-ok';
            const labelText = hasUrgent ? '‚ö° ACTION' : hasWarn ? '‚ö†Ô∏è ALERTS' : '‚úÖ ALL CLEAR';
            const urgentCount = items.filter(i => i.cls === 't-urgent').length;
            const warnCount = items.filter(i => i.cls === 't-warn').length;
            const countBadge = hasUrgent ? `<span style="background:#fca5a5;color:#7f1d1d;padding:1px 6px;border-radius:8px;font-size:0.8em;margin-left:4px;">${urgentCount}</span>` :
                               hasWarn ? `<span style="background:#fde68a;color:#78350f;padding:1px 6px;border-radius:8px;font-size:0.8em;margin-left:4px;">${warnCount}</span>` : '';

            // ‚îÄ‚îÄ Build ticker HTML ‚îÄ‚îÄ
            // Duplicate items for seamless loop
            const itemsHtml = items.map(i =>
                `<div class="ticker-item"><span class="t-icon">${i.icon}</span><span class="t-label">${i.label}</span><span class="t-value ${i.cls}">${i.value}</span></div>`
            ).join('');

            // Adjust speed: ~3 seconds per item
            const duration = Math.max(items.length * 3, 20);

            bar.innerHTML = `
                <div class="ticker-label ${labelCls}">${labelText}${countBadge}</div>
                <div class="ticker-track">
                    <div class="ticker-content" style="--ticker-duration:${duration}s">
                        ${itemsHtml}${itemsHtml}
                    </div>
                </div>`;
        }
        
        // Initialize tracking table and customer table
        renderNpsTable();
        renderCustomerTable();
        
        // Prevent input fields from triggering scroll pause
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('click', e => e.stopPropagation());
            input.addEventListener('focus', e => e.stopPropagation());
        });

        // === SMART TIMESTAMPS ‚Äî auto-update on every page load ===
        (function updateTimestamps() {
            const now = new Date();
            const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            const day = now.getDate();
            const year = now.getFullYear();
            const h = now.getHours();
            const m = now.getMinutes().toString().padStart(2, '0');
            const ampm = h >= 12 ? 'PM' : 'AM';
            const h12 = h % 12 || 12;
            const mmdd = (now.getMonth()+1).toString().padStart(2,'0') + '/' + day.toString().padStart(2,'0');
            const yy = year.toString().slice(-2);

            // Header: HARDCODED by Claude at file update time (not refresh time)
            // Claude updates this string each time index.html is modified
            const hdr = document.getElementById('headerTimestamp');
            if (hdr) hdr.textContent = 'Last updated: Feb 4, 2026 \u00B7 8:30 AM MST';

            // Customer DB: "Updated 02/03 10:00AM"
            const cdb = document.getElementById('customerDbTimestamp');
            if (cdb) cdb.textContent = 'Updated ' + mmdd + ' ' + h12 + ':' + m + ampm;

            // NQA badge: "Updated 02/03/26"
            const nqa = document.getElementById('nqaBadgeTimestamp');
            if (nqa) nqa.textContent = 'Updated ' + mmdd + '/' + yy;
        })();
    </script>
    <!-- TICKER BAR ‚Äî auto-rendered from GOALS_DATA -->
    <div id="tickerBar" class="ticker-bar"></div>
</body>
</html>
